{"version":3,"file":"mediadc-node_modules_moment_locale_sync_recursive_-src_views_CollectorDetails_vue.js?v=37e685682ee9cb2aa0b4","mappings":";8NA2BA,MACMA,EAAc,CACnBC,EAAE,UAAW,UACbA,EAAE,UAAW,UACbA,EAAE,UAAW,kBAGd,GACCC,QAAS,CACRC,YADQ,KAERC,mBAAmBC,GACXC,IAAAA,KAAYC,OAAOF,IAAOG,OAAO,uBAEzCC,eAAeC,GACVA,MAAAA,EACI,GAEY,KAAhBA,EAAKC,OACD,QAEqB,IAAxBJ,OAAOG,EAAKE,SAAgD,IAA/BL,OAAOG,EAAKG,gBACzCN,OAAOG,EAAKI,cAAgB,GAAKP,OAAOG,EAAKK,eAAiB,EAC1D,aAEJR,OAAOG,EAAKE,QAAU,EACrBN,GAAAA,GAASU,OAAST,OAAOG,EAAKI,cAAgBG,GAC1C,QAEA,UAGLV,OAAOG,EAAKG,eAAiB,GAA6B,IAAxBN,OAAOG,EAAKE,QAC1C,WAED,UAGTM,iBAAiBR,GAChB,GAAIA,EACH,IACC,OAAOV,EAAYO,OAAOY,KAAKC,MAAMV,EAAKW,oBAAoBC,eAC7D,MACD,MAAO,GAGT,MAAO,4GC5CV,MAUMC,EAAaC,IAClB,GAAIC,OAAOC,UAAW,CAIrB,OAHe,IAAIA,WACGC,gBAAgBH,EAAK,YACrBI,qBAAqB,aAAa,GAAGC,UAG3D,OAAQ,GAeJC,EAAkBC,MAAAA,IACvB,MAAMC,EAAU,GAAH,QAAMC,EAAAA,EAAAA,mBAAkB,OAAxB,mBAAwCC,EAAAA,EAAAA,kBAAiBC,KAAzD,OAA+DC,GAC5E,aAAaC,EAAAA,EAAAA,SAAM,CAClBC,OAAQ,WACRC,IAAKP,EACLQ,KArCiB,mSAsCjBC,QAAS,CAAEC,SAAS,EAAMC,MAAO,MAI7BxC,EAAc,CAACyC,EAAOC,EAAW,KACtC,GAAc,IAAVD,EAAa,MAAO,MACxB,MACME,EAAKD,EAAW,EAAI,EAAIA,EAExBE,EAAIC,KAAKC,MAAMD,KAAKE,IAAIN,GAASI,KAAKE,IAHlC,OAIV,OAAOC,YAAYP,EAAQI,KAAKI,IAJtB,KAI6BL,IAAIM,QAAQP,IAAO,IAF5C,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAEQC,kEC1EnEO,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,q4DAAs4D,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,oDAAoD,MAAQ,GAAG,SAAW,2sBAA2sB,eAAiB,CAAC,w5aAAi5a,WAAa,MAE/ogB,wECJIH,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,g6EAAi6E,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,yDAAyD,MAAQ,GAAG,SAAW,g0BAAg0B,eAAiB,CAAC,0jcAAmjc,WAAa,MAEt8iB,wECJIH,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,+kGAAglG,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,oDAAoD,MAAQ,GAAG,SAAW,4/BAA4/B,eAAiB,CAAC,sxeAA+we,WAAa,MAExgnB,wECJIH,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,23FAA43F,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,wDAAwD,MAAQ,GAAG,SAAW,8+BAA8+B,eAAiB,CAAC,ssaAA+ra,WAAa,MAE1tiB,wECJIH,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,olEAAqlE,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gDAAgD,MAAQ,GAAG,SAAW,mvBAAmvB,eAAiB,CAAC,80gBAAu0gB,WAAa,MAExzmB,wECJIH,QAA0B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,40IAA60I,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,4CAA4C,MAAQ,GAAG,SAAW,4iDAA4iD,eAAiB,CAAC,ujhBAAgjhB,WAAa,MAE9ktB,2BCNA,IAAIC,EAAM,CACT,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,MACX,aAAc,MACd,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,QAAS,MACT,WAAY,MACZ,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,gBAAiB,MACjB,aAAc,MACd,gBAAiB,MACjB,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,UAAW,MACX,aAAc,MACd,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,MACX,aAAc,MACd,UAAW,KACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,MACR,UAAW,MACX,WAAY,MACZ,cAAe,MACf,UAAW,MACX,aAAc,MACd,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,YAAa,MACb,eAAgB,MAChB,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,QAAS,MACT,WAAY,MACZ,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,UAAW,KACX,OAAQ,MACR,UAAW,MACX,UAAW,MACX,aAAc,MACd,QAAS,MACT,WAAY,MACZ,OAAQ,MACR,UAAW,MACX,QAAS,MACT,WAAY,MACZ,QAAS,MACT,aAAc,MACd,gBAAiB,MACjB,WAAY,MACZ,UAAW,KACX,aAAc,KACd,OAAQ,MACR,UAAW,MACX,OAAQ,MACR,UAAW,MACX,OAAQ,KACR,YAAa,MACb,eAAgB,MAChB,UAAW,KACX,OAAQ,MACR,UAAW,MACX,aAAc,MACd,gBAAiB,MACjB,OAAQ,MACR,UAAW,MACX,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,MACd,UAAW,MACX,aAAc,OAIf,SAASC,EAAeC,GACvB,IAAIH,EAAKI,EAAsBD,GAC/B,OAAOE,EAAoBL,GAE5B,SAASI,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAEL,EAAKE,GAAM,CACpC,IAAII,EAAI,IAAIC,MAAM,uBAAyBL,EAAM,KAEjD,MADAI,EAAEE,KAAO,mBACHF,EAEP,OAAON,EAAIE,GAEZD,EAAeQ,KAAO,WACrB,OAAOC,OAAOD,KAAKT,IAEpBC,EAAeU,QAAUR,EACzBL,EAAOc,QAAUX,EACjBA,EAAeF,GAAK,kECnSpB,8GC6FA,SACA,mBACA,qCACA,aACA,OACA,MACA,YACA,aAEA,OACA,WACA,aAEA,UACA,WACA,aAEA,cACA,WACA,aAEA,QACA,YACA,cAGA,UACA,CACA,UACA,WACA,cAGA,cACA,SACA,kBACA,yBACA,YAEA,WACA,8BACA,yJAEA,sFAIA,OACA,UACA,0BACA,gDACA,cACA,OACA,mBAEA,OACA,cAEA,qCAEA,eACA,sEACA,uBACA,mBAIA,cACA,sEACA,qBACA,+CAEA,iBACA,iDAEA,SACA,YACA,6BACA,oBACA,gBACA,gFACA,4BACA,2BACA,iBACA,oBAEA,iBACA,4EACA,oBACA,EACA,cAIA,SACA,gBAEA,mBACA,4BACA,kEACA,yBAGA,0BAGA,oBACA,iBACA,qJACA,UACA,mBACA,mBACA,4BACA,6CACA,kDACA,uEAEA,8CACA,cACA,8DACA,yBACA,0BACA,cACA,oCAEA,8BACA,4BACA,wDACA,yDAEA,kCACA,oEACA,8CACA,kEACA,wCACA,4EAEA,oEAEA,oBAEA,WACA,YACA,oEACA,qBAGA,YACA,gEACA,oBClPkL,uCCG9Kc,EAAU,CAEdA,OAAiB,OACjBA,WAAoB,GAEP,IAAI,IAASA,GAIX,0BCOf,SAXgB,OACd,GCTW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAO,UAAYP,EAAIQ,gBAAkB,OAAQ,CAAER,EAAY,SAAEI,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,OAAO,CAACE,YAAY,mBAAmBN,EAAIS,KAAKT,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,aAAaK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIa,SAASb,EAAIc,SAAS,CAAyB,UAAvBd,EAAIc,KAAKC,WAAiD,UAAvBf,EAAIc,KAAKC,WAAyBf,EAAIc,KAAKE,YAAcZ,EAAG,MAAM,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOpB,EAAU,OAAEqB,WAAW,WAAWf,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOpB,EAAU,OAAEqB,WAAW,WAAWC,IAAItB,EAAIc,KAAKS,SAASC,MAAM,CAAC,IAAMxB,EAAIyB,SAAS,IAAMzB,EAAIc,KAAKY,SAAS,MAAQ1B,EAAIc,KAAKS,UAAUZ,GAAG,CAAC,KAAOX,EAAI2B,YAAY3B,EAAIS,KAAKT,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQpB,EAAI4B,QAAiC,UAAvB5B,EAAIc,KAAKC,UAAuBM,WAAW,0CAA0Cf,YAAY,cAAcC,MAAO,eAAiBP,EAAIQ,gBAAkB,KAAMgB,MAAM,CAAC,MAAQxB,EAAIc,KAAKS,WAAW,CAACnB,EAAG,MAAM,CAACoB,MAAM,CAAC,MAAQ,MAAM,OAAS,MAAM,QAAU,MAAM,QAAU,gBAAgB,MAAQ,+BAA+B,CAACpB,EAAG,OAAO,CAACoB,MAAM,CAAC,EAAI,usDAAusDxB,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACoB,MAAM,CAAC,EAAI,uUAAuUxB,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACoB,MAAM,CAAC,EAAI,0GAA0GxB,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQpB,EAAI4B,QAAiC,UAAvB5B,EAAIc,KAAKC,UAAuBM,WAAW,0CAA0Cf,YAAY,cAAcC,MAAO,eAAiBP,EAAIQ,gBAAkB,KAAMgB,MAAM,CAAC,MAAQxB,EAAIc,KAAKS,WAAW,CAACnB,EAAG,MAAM,CAACoB,MAAM,CAAC,MAAQ,MAAM,oBAAoB,kBAAkB,QAAU,MAAM,QAAU,cAAc,YAAY,WAAW,MAAQ,+BAA+B,CAACpB,EAAG,OAAO,CAACoB,MAAM,CAAC,EAAI,wxBAAwxBxB,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACoB,MAAM,CAAC,EAAI,wSAAwSxB,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACE,YAAY,WAAWkB,MAAM,CAAC,MAAQxB,EAAIc,KAAKS,WAAW,CAACvB,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAIc,KAAKY,aAAa1B,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAIc,KAAKgB,cAAc9B,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAIrE,YAAYI,OAAOiE,EAAIc,KAAKiB,eAAe/B,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,UAAU0B,YAAY,CAAC,QAAU,SAAS,CAAC5B,EAAG,sBAAsB,CAACE,YAAY,iBAAiB0B,YAAY,CAAC,eAAe,QAAQR,MAAM,CAAC,QAAUxB,EAAIiC,SAAStB,GAAG,CAAC,iBAAiB,SAASC,GAAQZ,EAAIiC,QAAQrB,MAAWZ,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACE,YAAY,oCAAoCK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIkC,gBAAgBlC,EAAIc,WAAW,SAC3sL,IDWpB,EACA,KACA,WACA,MAI8B,uBE+FhC,MClHuL,EDkHvL,CACA,wBACA,2BACA,aACA,OACA,OACA,WACA,YACA,gBAEA,UACA,WACA,YACA,gBAEA,QACA,YACA,aAEA,cACA,aACA,aAEA,UACA,aACA,aAEA,gBACA,aACA,cAGA,UACA,CACA,gBACA,sBACA,iBACA,kBACA,mBAGA,cACA,SACA,kBACA,yBACA,oBACA,YAEA,wBACA,4BACA,6BACA,wCACA,uBAGA,OACA,QACA,0BAGA,SACA,wBACA,iEAEA,0BACA,yBACA,mEAEA,kDAEA,iBACA,qDACA,6CACA,8BACA,+DACA,OACA,oCAIA,+BAEA,IADA,uDAEA,4BAKA,uBACA,0DACA,oCACA,6BACA,qCACA,wDACA,OACA,oCAIA,4BAEA,IADA,uDAEA,4BAKA,qBACA,iCACA,iMACA,mBACA,sBACA,oDACA,6CAEA,iDACA,mDACA,uEAGA,sCACA,uCACA,cACA,wDACA,OACA,+BAGA,4BACA,iCACA,wCACA,kCACA,oEAEA,WACA,YACA,uDACA,qCAGA,qBACA,gDACA,sEACA,2BAGA,4BAGA,sBACA,iCACA,iMACA,eACA,6BACA,iDACA,mDACA,8BAEA,wBACA,0EACA,qCAEA,WACA,YACA,uDACA,qCAGA,uBACA,sBACA,6GACA,6CAEA,iDACA,mDACA,uEAIA,sCACA,uCACA,cACA,wDACA,OACA,+BAIA,4BACA,iCACA,wCACA,kCACA,iEAEA,mBACA,0BACA,sBACA,kHAEA,sBACA,wBAGA,oBACA,2EE3TI,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEP,IAAI,IAAS,GAIX,WCOf,SAXgB,OACd,GCTW,WAAa,IAAId,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAASF,EAAImC,aAAohH/B,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,eAAe0B,YAAY,CAAC,MAAQ,OAAO,OAAS,OAAO,QAAU,OAAO,OAAS,iBAA5nH5B,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIU,GAAG,WAAWV,EAAI6B,GAAG7B,EAAIvE,EAAE,UAAW,uBAAuB,YAAY2E,EAAG,OAAO,CAACgC,MAAMpC,EAAIqC,eAAiB,0CAA4C,0CAA0C1B,GAAG,CAAC,MAAQX,EAAIsC,uBAAuBtC,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,QAAQ,CAACoB,MAAM,CAAC,IAAM,oBAAoB,CAACxB,EAAIU,GAAG,aAAaV,EAAI6B,GAAG7B,EAAIvE,EAAE,UAAW,yBAAyB,cAAc2E,EAAG,QAAQ,CAACa,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOpB,EAAkB,eAAEqB,WAAW,mBAAmBG,MAAM,CAAC,GAAK,kBAAkB,KAAO,SAAS,KAAO,kBAAkB,YAAcxB,EAAIvE,EAAE,UAAW,qBAAqB8G,SAAS,CAAC,MAASvC,EAAkB,gBAAGW,GAAG,CAAC,MAAQ,CAAC,SAASC,GAAWA,EAAO4B,OAAOC,YAAqBzC,EAAI0C,eAAe9B,EAAO4B,OAAOpB,QAAOpB,EAAI2C,yBAAyB3C,EAAIU,GAAG,KAAMV,EAAI4C,aAAaC,OAAS,EAAGzC,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACN,EAAIU,GAAG,WAAWV,EAAI6B,GAAG7B,EAAI8C,gBAAgB,UAAW,4BAA6B,6BAA8B9C,EAAI4C,aAAaC,SAAS,YAAYzC,EAAG,MAAM,CAACE,YAAY,wBAAwB0B,YAAY,CAAC,OAAS,aAAa,SAAW,aAAa,CAAC5B,EAAG,MAAM,CAACE,YAAY,sCAAsCK,GAAG,CAAC,MAAQX,EAAI+C,yBAAyB/C,EAAIU,GAAG,KAAKN,EAAG,MAAM,CAACgC,MAAMpC,EAAIgD,mBAAqB,mBAAqB,cAAchB,YAAY,CAAC,MAAQ,SAAS,CAAC5B,EAAG,KAAK,CAACA,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,YAAY,iBAAiBK,GAAG,CAAC,MAAQX,EAAIiD,iBAAiB,CAAC7C,EAAG,OAAO,CAACJ,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAI4C,aAAaC,SAAW7C,EAAIkD,SAASL,OAAS7C,EAAIvE,EAAE,UAAW,gBAAkBuE,EAAIvE,EAAE,UAAW,sBAAsBuE,EAAIU,GAAG,KAAM/D,KAAKC,MAAMoD,EAAImD,OAAOC,iBAAiBP,OAAS7C,EAAIqD,kBAAmBjD,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,YAAY,iBAAiBK,GAAG,CAAC,MAAQX,EAAIsD,uBAAuB,CAAClD,EAAG,OAAO,CAACJ,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAIuD,sBAAsBV,SAAW7C,EAAIwD,MAAMX,OAAS7C,EAAIvE,EAAE,UAAW,wBAA0BuE,EAAIvE,EAAE,UAAW,8BAA8BuE,EAAIS,KAAKT,EAAIU,GAAG,KAAKN,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,YAAY,aAAakB,MAAM,CAAC,MAAQxB,EAAIvE,EAAE,UAAW,4BAA4BkF,GAAG,CAAC,MAAQX,EAAIyD,qBAAqB,CAACrD,EAAG,OAAO,CAACJ,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAI8C,gBAAgB,UAAW,cAAe,eAAgB9C,EAAI4C,aAAaC,gBAAgB7C,EAAIU,GAAG,KAAKN,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,YAAY,cAAcK,GAAG,CAAC,MAAQX,EAAI0D,qBAAqB,CAACtD,EAAG,OAAO,CAACJ,EAAIU,GAAGV,EAAI6B,GAAG7B,EAAI8C,gBAAgB,UAAW,cAAe,eAAgB9C,EAAI4C,aAAaC,wBAAwB7C,EAAIS,OAAOT,EAAIU,GAAG,KAAOV,EAAI2D,cAAyY3D,EAAI4D,cAAcf,OAAS,EAAGzC,EAAG,MAAM,CAACE,YAAY,uBAAuBN,EAAI6D,GAAI7D,EAAiB,eAAE,SAASc,GAAM,OAAOV,EAAG,cAAc,CAACkB,IAAIR,EAAKgD,OAAOtC,MAAM,CAAC,KAAOV,EAAK,MAAQd,EAAIwD,MAAM,YAAYxD,EAAIkD,SAAS,gBAAgBlD,EAAI4C,aAAa,OAAS5C,EAAImD,QAAQxC,GAAG,CAAC,sBAAsB,SAASC,GAAQZ,EAAI4C,aAAahC,GAAQ,uBAAuB,SAASA,GAAQZ,EAAI4C,aAAahC,SAAa,GAAGR,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,IAAI,CAAC4B,YAAY,CAAC,OAAS,aAAa,CAAChC,EAAIU,GAAG,WAAWV,EAAI6B,GAAG7B,EAAIvE,EAAE,UAAW,4BAA4B,cAAz7B2E,EAAG,MAAM,CAACE,YAAY,uBAAuBN,EAAI6D,GAAI7D,EAAS,OAAE,SAASc,GAAM,OAAOV,EAAG,cAAc,CAACkB,IAAIR,EAAKgD,OAAOtC,MAAM,CAAC,KAAOV,EAAK,MAAQd,EAAIwD,MAAM,YAAYxD,EAAIkD,SAAS,gBAAgBlD,EAAI4C,aAAa,OAAS5C,EAAImD,QAAQxC,GAAG,CAAC,sBAAsB,SAASC,GAAQZ,EAAI4C,aAAahC,GAAQ,uBAAuB,SAASA,GAAQZ,EAAI4C,aAAahC,SAAa,OACjhG,IDWpB,EACA,KACA,WACA,MAI8B,uBEkDhC,SACA,uBACA,wDACA,aACA,OACA,QACA,YACA,aAEA,qBACA,WACA,cAGA,UACA,CACA,UACA,OACA,aACA,gBACA,SACA,YACA,kBACA,WACA,kBACA,cAGA,cACA,SACA,OACA,UACA,sBAEA,iBACA,gFAGA,OACA,UACA,iCACA,0CACA,cACA,OACA,qBAEA,OACA,cAEA,4CAEA,iBACA,qCAEA,sBACA,uEACA,uBACA,kBAGA,qBACA,cACA,yEACA,yEAEA,sDACA,4CAGA,YACA,wDACA,uDACA,sDACA,6CAIA,cACA,uEACA,qBACA,yEACA,gDACA,4CAEA,iBACA,2EACA,kDACA,8CAEA,SACA,mBACA,eAgBA,oBAfA,+CACA,kBACA,OACA,qBACA,eACA,yBACA,4BAEA,0CACA,2BAGA,gBAMA,uBACA,oFACA,aACA,4CAEA,iDAGA,uBACA,aACA,aACA,4CAEA,kDAGA,sBACA,+GACA,2BACA,sDACA,0CACA,yBAGA,iBACA,WACA,4BACA,sBACA,qCAGA,aAFA,eAKA,UAEA,oBACA,gGACA,iBACA,uHACA,oBACA,6CACA,0BACA,0CACA,cACA,qCACA,6DACA,gCACA,uBACA,cACA,6CAEA,6BACA,kEACA,6DACA,WACA,iCACA,cACA,2CAEA,sBAEA,+EACA,oBAEA,WACA,YACA,+EACA,sBAIA,aACA,2EACA,sDACA,2CAEA,yBACA,MACA,2DACA,OACA,0BAGA,sDACA,2CAEA,YACA,2CACA,kBAGA,aACA,oCACA,2BCjRsL,mBCGlL,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEP,IAAI,IAAS,GAIX,WCOf,SAXgB,OACd,GCTW,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,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","sources":["webpack:///mediadc/src/mixins/Formats.js","webpack:///mediadc/src/utils/files.js","webpack:///mediadc/src/components/details/DetailsFile.vue?vue&type=style&index=0&id=0f225859&scoped=true&lang=css&","webpack:///mediadc/src/components/details/DetailsGroupList.vue?vue&type=style&index=0&id=287ce272&scoped=true&lang=css&","webpack:///mediadc/src/components/details/DetailsList.vue?vue&type=style&index=0&id=6970fd5d&scoped=true&lang=css&","webpack:///mediadc/src/components/details/DetailsListItem.vue?vue&type=style&index=0&id=08060f22&scoped=true&lang=css&","webpack:///mediadc/src/components/tasks/TasksEdit.vue?vue&type=style&index=0&id=5dcd7180&scoped=true&lang=css&","webpack:///mediadc/src/views/CollectorDetails.vue?vue&type=style&index=0&id=101b5a4b&scoped=true&lang=css&","webpack:///mediadc/node_modules/moment/locale|sync|/^\\.\\/.*$","webpack:///mediadc/src/views/CollectorDetails.vue?vue&type=template&id=101b5a4b&scoped=true&","webpack:///mediadc/src/components/details/DetailsFile.vue","webpack:///mediadc/src/components/details/DetailsFile.vue?vue&type=script&lang=js&","webpack://mediadc/./src/components/details/DetailsFile.vue?2db2","webpack://mediadc/./src/components/details/DetailsFile.vue?d5b4","webpack:///mediadc/src/components/details/DetailsFile.vue?vue&type=template&id=0f225859&scoped=true&","webpack:///mediadc/src/components/details/DetailsGroupList.vue","webpack:///mediadc/src/components/details/DetailsGroupList.vue?vue&type=script&lang=js&","webpack://mediadc/./src/components/details/DetailsGroupList.vue?36ae","webpack://mediadc/./src/components/details/DetailsGroupList.vue?34c2","webpack:///mediadc/src/components/details/DetailsGroupList.vue?vue&type=template&id=287ce272&scoped=true&","webpack:///mediadc/src/components/details/DetailsListItem.vue","webpack:///mediadc/src/components/details/DetailsListItem.vue?vue&type=script&lang=js&","webpack://mediadc/./src/components/details/DetailsListItem.vue?8f72","webpack://mediadc/./src/components/details/DetailsListItem.vue?df6d","webpack:///mediadc/src/components/details/DetailsListItem.vue?vue&type=template&id=08060f22&scoped=true&","webpack:///mediadc/src/components/details/DetailsList.vue","webpack:///mediadc/src/components/details/DetailsList.vue?vue&type=script&lang=js&","webpack://mediadc/./src/components/details/DetailsList.vue?17b8","webpack://mediadc/./src/components/details/DetailsList.vue?03d0","webpack:///mediadc/src/components/details/DetailsList.vue?vue&type=template&id=6970fd5d&scoped=true&","webpack:///mediadc/src/components/tasks/TasksEdit.vue","webpack:///mediadc/src/components/tasks/TasksEdit.vue?vue&type=script&lang=js&","webpack://mediadc/./src/components/tasks/TasksEdit.vue?eb0b","webpack://mediadc/./src/components/tasks/TasksEdit.vue?db3b","webpack:///mediadc/src/components/tasks/TasksEdit.vue?vue&type=template&id=5dcd7180&scoped=true&","webpack:///mediadc/src/views/CollectorDetails.vue","webpack:///mediadc/src/views/CollectorDetails.vue?vue&type=script&lang=js&","webpack://mediadc/./src/views/CollectorDetails.vue?1955","webpack://mediadc/./src/views/CollectorDetails.vue?5e70"],"sourcesContent":["/**\n * @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n *\n * @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n *\n * @author Andrey Borysenko <andrey18106x@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { formatBytes } from '../utils/files'\nimport moment from 'moment'\n\nconst keepAliveInterval = 8\nconst targetMType = [\n\tt('mediadc', 'Photos'),\n\tt('mediadc', 'Videos'),\n\tt('mediadc', 'Photos&Videos'),\n]\n\nexport default {\n\tmethods: {\n\t\tformatBytes,\n\t\tparseUnixTimestamp(time) {\n\t\t\treturn moment.unix(Number(time)).format('YYYY-MM-DD HH:mm:ss')\n\t\t},\n\t\tgetStatusBadge(task) {\n\t\t\tif (task === null || task === undefined) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\tif (task.errors !== '') {\n\t\t\t\treturn 'error'\n\t\t\t} else {\n\t\t\t\tif (Number(task.py_pid) === 0 && Number(task.finished_time) === 0\n\t\t\t\t\t&& Number(task.updated_time) > 0 && Number(task.files_scanned) > 0) {\n\t\t\t\t\treturn 'terminated'\n\t\t\t\t}\n\t\t\t\tif (Number(task.py_pid) > 0) {\n\t\t\t\t\tif (moment().unix() > Number(task.updated_time) + keepAliveInterval * 3) {\n\t\t\t\t\t\treturn 'error'\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 'running'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Number(task.finished_time) > 0 && Number(task.py_pid) === 0) {\n\t\t\t\t\treturn 'finished'\n\t\t\t\t}\n\t\t\t\treturn 'pending'\n\t\t\t}\n\t\t},\n\t\tparseTargetMtype(task) {\n\t\t\tif (task) {\n\t\t\t\ttry {\n\t\t\t\t\treturn targetMType[Number(JSON.parse(task.collector_settings).target_mtype)]\n\t\t\t\t} catch {\n\t\t\t\t\treturn ''\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t},\n}\n","/**\n * @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n *\n * @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n *\n * @author Andrey Borysenko <andrey18106x@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport axios from '@nextcloud/axios'\n\nconst davRequest = `<?xml version=\"1.0\"?>\n\t<d:propfind xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\"\n\t\t\t\txmlns:nc=\"http://nextcloud.org/ns\"\n\t\t\t\txmlns:ocs=\"http://open-collaboration-services.org/ns\">\n\t\t<d:prop>\n\t\t\t<oc:fileid />\n\t\t\t<d:getcontenttype />\n\t\t</d:prop>\n\t</d:propfind>`\n\nconst getFileId = (xml) => {\n\tif (window.DOMParser) {\n\t\tconst parser = new DOMParser()\n\t\tconst xmlDoc = parser.parseFromString(xml, 'text/xml')\n\t\tconst fileid = xmlDoc.getElementsByTagName('oc:fileid')[0].innerHTML\n\t\treturn fileid\n\t} else {\n\t\treturn -1\n\t}\n}\n\nconst getContentType = (xml) => {\n\tif (window.DOMParser) {\n\t\tconst parser = new DOMParser()\n\t\tconst xmlDoc = parser.parseFromString(xml, 'text/xml')\n\t\tconst contentType = xmlDoc.getElementsByTagName('d:getcontenttype')[0].innerHTML\n\t\treturn contentType\n\t} else {\n\t\treturn null\n\t}\n}\n\nconst requestFileInfo = async (path) => {\n\tconst davPath = `${generateRemoteUrl('dav')}/files/${getCurrentUser().uid}${path}`\n\treturn await axios({\n\t\tmethod: 'PROPFIND',\n\t\turl: davPath,\n\t\tdata: davRequest,\n\t\theaders: { details: true, depth: 0 },\n\t})\n}\n\nconst formatBytes = (bytes, decimals = 2) => {\n\tif (bytes === 0) return '0 B'\n\tconst k = 1024\n\tconst dm = decimals < 0 ? 0 : decimals\n\tconst sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n}\n\nexport {\n\trequestFileInfo,\n\tgetFileId,\n\tgetContentType,\n\tformatBytes,\n}\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.file[data-v-0f225859] {\\n\\tposition: relative;\\n}\\n.file-thumb[data-v-0f225859] {\\n\\tdisplay: flex;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n}\\n.file-thumb-loaded[data-v-0f225859] {\\n\\tdisplay: flex;\\n\\twidth: 100%;\\n}\\nimg[data-v-0f225859] {\\n\\twidth: 100%;\\n\\theight: auto;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n\\tcursor: pointer;\\n}\\n.updating-blackout[data-v-0f225859] {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground: rgba(0, 0, 0, 0.7);\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n.placeholder[data-v-0f225859] {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tcursor: pointer;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n}\\nbody.theme--dark .placeholder[data-v-0f225859] {\\n\\tbackground-color: #fff;\\n}\\n.file-info[data-v-0f225859] {\\n\\twidth: 100%;\\n\\tpadding: 5px 10px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\talign-items: center;\\n\\tbackground-color: #000;\\n\\ttext-align: center;\\n\\tborder-bottom-left-radius: 5px;\\n\\tborder-bottom-right-radius: 5px;\\n\\tcolor: #fff;\\n}\\n.filename[data-v-0f225859] {\\n\\twidth: 100%;\\n\\toverflow-x: hidden;\\n\\ttext-overflow: ellipsis;\\n\\twhite-space: nowrap;\\n}\\n.delete-file-btn[data-v-0f225859] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tbackground-image: var(--icon-delete-fff);\\n}\\n.delete-file-btn[data-v-0f225859]:hover {\\n\\tbackground-color: #eee;\\n}\\n.delete-file-btn[data-v-0f225859]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .delete-file-btn[data-v-0f225859] {\\n\\tbackground-image: var(--icon-delete-000);\\n}\\n.delete-file-btn[data-v-0f225859]:hover, body.theme--dark .delete-file-btn[data-v-0f225859]:hover {\\n\\tbackground-image: var(--icon-delete-e9322d);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/components/details/DetailsFile.vue\"],\"names\":[],\"mappings\":\";AA0PA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,2BAAA;CACA,4BAAA;AACA;AAEA;CACA,aAAA;CACA,WAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,2BAAA;CACA,4BAAA;CACA,eAAA;AACA;AAEA;CACA,kBAAA;CACA,MAAA;CACA,OAAA;CACA,QAAA;CACA,SAAA;CACA,8BAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,kBAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,eAAA;CACA,2BAAA;CACA,4BAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,WAAA;CACA,iBAAA;CACA,aAAA;CACA,sBAAA;CACA,mBAAA;CACA,sBAAA;CACA,kBAAA;CACA,8BAAA;CACA,+BAAA;CACA,WAAA;AACA;AAEA;CACA,WAAA;CACA,kBAAA;CACA,uBAAA;CACA,mBAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,WAAA;CACA,YAAA;CACA,eAAA;CACA,wCAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,wCAAA;AACA;AAEA;CACA,2CAAA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div class=\\\"file\\\" :style=\\\"'width: ' + detailsGridSize + 'px;'\\\">\\n\\t\\t<div v-if=\\\"updating\\\" class=\\\"updating-blackout\\\">\\n\\t\\t\\t<span class=\\\"icon-loading\\\" />\\n\\t\\t</div>\\n\\t\\t<div class=\\\"file-thumb\\\" @click=\\\"openFile(file)\\\">\\n\\t\\t\\t<div v-show=\\\"loaded\\\"\\n\\t\\t\\t\\tv-if=\\\"file.filempart === 'image' || (file.filempart === 'video' && file.has_preview)\\\"\\n\\t\\t\\t\\tclass=\\\"file-thumb-loaded\\\">\\n\\t\\t\\t\\t<img v-show=\\\"loaded\\\"\\n\\t\\t\\t\\t\\t:key=\\\"file.filepath\\\"\\n\\t\\t\\t\\t\\t:src=\\\"imageUrl\\\"\\n\\t\\t\\t\\t\\t:alt=\\\"file.filename\\\"\\n\\t\\t\\t\\t\\t:title=\\\"file.filepath\\\"\\n\\t\\t\\t\\t\\t@load=\\\"onLoad\\\">\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-show=\\\"!loaded && file.filempart === 'video'\\\"\\n\\t\\t\\t\\tclass=\\\"placeholder\\\"\\n\\t\\t\\t\\t:style=\\\"'min-height: ' + detailsGridSize + 'px'\\\"\\n\\t\\t\\t\\t:title=\\\"file.filepath\\\">\\n\\t\\t\\t\\t<svg width=\\\"50%\\\"\\n\\t\\t\\t\\t\\theight=\\\"50%\\\"\\n\\t\\t\\t\\t\\tversion=\\\"1.1\\\"\\n\\t\\t\\t\\t\\tviewBox=\\\"-31 0 512 512\\\"\\n\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t\\t\\t<path d=\\\"m440.59 206.68h-341.17l327.7-94.93c2.5469-0.73828 4.6953-2.4609 5.9766-4.7812 1.2812-2.3242 1.5859-5.0586 0.84766-7.6055l-17.148-59.199c-6.8516-23.645-28.867-40.16-53.539-40.16-5.1992 0-10.379 0.73828-15.402 2.1914l-307.68 89.129c-14.23 4.1211-26.023 13.582-33.215 26.633-7.1875 13.051-8.875 28.078-4.7539 42.305l16.754 57.836v238.25c0 30.688 24.965 55.652 55.648 55.652h120.16c5.5234 0 10-4.4766 10-10s-4.4766-10-10-10h-120.16c-19.66 0-35.652-15.992-35.652-35.652v-136.09h391.63v136.09c2.1e-4 19.66-15.992 35.652-35.652 35.652h-120.16c-5.5195 0-10 4.4766-10 10s4.4805 10 10 10h120.16c30.688 0 55.652-24.965 55.652-55.652v-239.67c0-5.5234-4.4766-10-10-10zm-176.33 93.586 42.488-73.586h55.262l-42.484 73.586zm-78.359 0 42.488-73.586h55.262l-42.484 73.586zm-78.355 0 42.484-73.586h55.266l-42.488 73.586zm37.18-129.46-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543l71.148 68.336-53.309 15.441c-0.375-0.54688-0.81641-1.0664-1.3125-1.543zm134-125.84 71.148 68.336-53.309 15.441c-0.375-0.54688-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543zm-75.266 21.805 71.148 68.332-53.309 15.445c-0.375-0.54687-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.37891 0.54297 0.81641 1.0625 1.3125 1.543zm149.96-45.367c3.2109-0.92969 6.5195-1.4023 9.8359-1.4023 15.824 0 29.938 10.578 34.328 25.727l14.367 49.59-40.121 11.621c-0.3789-0.54688-0.8164-1.0625-1.3164-1.543l-71.145-68.332zm-328.94 106.2c4.6094-8.3711 12.16-14.434 21.262-17.07l5.875-1.7031c0.37891 0.54688 0.81641 1.0664 1.3125 1.543l71.148 68.336-88.293 25.578-14.367-49.59c-2.6367-9.0976-1.5469-18.719 3.0625-27.094zm14.48 99.074h87.973l-42.484 73.586h-45.488zm303.66 73.586 42.484-73.586h45.488v73.586z\\\" />\\n\\t\\t\\t\\t\\t<path d=\\\"m303.92 405.11c0-3.5742-1.9062-6.875-5-8.6602l-87.855-50.723c-3.0938-1.7852-6.9062-1.7852-10 0-3.0938 1.7852-5 5.0859-5 8.6602v101.45c0 3.5703 1.9062 6.8711 5 8.6562 1.5469 0.89453 3.2734 1.3438 5 1.3438 1.7266 0 3.4531-0.44922 5-1.3438l87.855-50.719c3.0938-1.7852 5-5.0859 5-8.6602zm-87.855 33.402v-66.805l57.855 33.402z\\\" />\\n\\t\\t\\t\\t\\t<path d=\\\"m234.77 492c-5.5078 0-10 4.4922-10 10s4.4922 10 10 10c5.5117 0 10-4.4922 10-10s-4.4883-10-10-10z\\\" />\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-show=\\\"!loaded && file.filempart === 'image'\\\"\\n\\t\\t\\t\\tclass=\\\"placeholder\\\"\\n\\t\\t\\t\\t:style=\\\"'min-height: ' + detailsGridSize + 'px'\\\"\\n\\t\\t\\t\\t:title=\\\"file.filepath\\\">\\n\\t\\t\\t\\t<svg width=\\\"50%\\\"\\n\\t\\t\\t\\t\\tenable-background=\\\"new 0 0 512 512\\\"\\n\\t\\t\\t\\t\\tversion=\\\"1.1\\\"\\n\\t\\t\\t\\t\\tviewBox=\\\"0 0 512 512\\\"\\n\\t\\t\\t\\t\\txml:space=\\\"preserve\\\"\\n\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t\\t\\t<path d=\\\"m446.58 0h-381.15c-36.076 0-65.425 29.35-65.425 65.426v381.15c0 36.075 29.349 65.425 65.425 65.425h381.15c36.076 0 65.425-29.35 65.425-65.426v-381.15c0-36.076-29.349-65.426-65.425-65.426zm35.267 446.58c0 19.447-15.821 35.267-35.267 35.267h-381.15c-19.447 0-35.268-15.821-35.268-35.267v-55.007l99.255-84.451c3.622-3.082 8.906-3.111 12.562-0.075l62.174 51.628c5.995 4.977 14.795 4.569 20.304-0.946l147.73-147.95c2.67-2.675 5.783-2.935 7.408-2.852 1.62 0.083 4.695 0.661 7.078 3.596l95.176 117.19v118.87zm0-166.71-71.766-88.366c-7.117-8.764-17.666-14.122-28.942-14.701-11.268-0.57-22.317 3.672-30.294 11.662l-138.01 138.22-51.59-42.839c-14.959-12.422-36.563-12.293-51.373 0.308l-79.712 67.822v-286.55c0-19.447 15.821-35.268 35.268-35.268h381.15c19.447 0 35.267 15.821 35.267 35.268v214.44z\\\" />\\n\\t\\t\\t\\t\\t<path d=\\\"m161.17 62.995c-40.095 0-72.713 32.62-72.713 72.713 0 40.094 32.619 72.713 72.713 72.713s72.713-32.619 72.713-72.713-32.618-72.713-72.713-72.713zm0 115.27c-23.466 0-42.556-19.091-42.556-42.556 0-23.466 19.09-42.556 42.556-42.556s42.556 19.091 42.556 42.556-19.09 42.556-42.556 42.556z\\\" />\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"file-info\\\">\\n\\t\\t\\t<span class=\\\"filename\\\" :title=\\\"file.filepath\\\">{{ file.filename }}</span>\\n\\t\\t\\t<span class=\\\"owner\\\">{{ file.fileowner }}</span>\\n\\t\\t\\t<span class=\\\"size\\\">{{ formatBytes(Number(file.filesize)) }}</span>\\n\\t\\t\\t<div class=\\\"actions\\\" style=\\\"display: flex;\\\">\\n\\t\\t\\t\\t<CheckboxRadioSwitch class=\\\"batch-checkbox\\\"\\n\\t\\t\\t\\t\\t:checked.sync=\\\"checked\\\"\\n\\t\\t\\t\\t\\tstyle=\\\"margin-right: 20px;\\\" />\\n\\t\\t\\t\\t<span class=\\\"delete-file-btn icon-delete-white\\\" @click=\\\"deleteGroupFile(file)\\\" />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport axios from '@nextcloud/axios'\\nimport { generateRemoteUrl, generateUrl } from '@nextcloud/router'\\nimport { mapGetters } from 'vuex'\\nimport { getCurrentUser } from '@nextcloud/auth'\\nimport { emit, subscribe, unsubscribe } from '@nextcloud/event-bus'\\nimport { showError, showMessage, showWarning } from '@nextcloud/dialogs'\\nimport Formats from '../../mixins/Formats'\\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\\n\\nexport default {\\n\\tname: 'DetailsFile',\\n\\tcomponents: { CheckboxRadioSwitch },\\n\\tmixins: [Formats],\\n\\tprops: {\\n\\t\\tfile: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfiles: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tallFiles: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcheckedFiles: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tdetail: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tloaded: false,\\n\\t\\t\\tchecked: false,\\n\\t\\t\\tupdating: false,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'detailsGridSize',\\n\\t\\t\\t'deleteFileConfirmation',\\n\\t\\t\\t'details',\\n\\t\\t]),\\n\\t\\timageUrl() {\\n\\t\\t\\tif (this.file.has_preview) {\\n\\t\\t\\t\\treturn generateUrl(`/core/preview?fileId=${this.file.fileid}&x=${this.detailsGridSize}&y=${this.detailsGridSize}$forceIcon=0`)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\treturn generateRemoteUrl(`dav/files${this.file.filepath.replace('files/', '')}`)\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n\\twatch: {\\n\\t\\tchecked() {\\n\\t\\t\\tconst newCheckedFiles = this.checkedFiles\\n\\t\\t\\tconst fileIndex = newCheckedFiles.findIndex(f => f.fileid === this.file.fileid)\\n\\t\\t\\tif (this.checked) {\\n\\t\\t\\t\\tif (fileIndex === -1) {\\n\\t\\t\\t\\t\\tnewCheckedFiles.push(this.file)\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else if (fileIndex !== -1) {\\n\\t\\t\\t\\tnewCheckedFiles.splice(fileIndex, 1)\\n\\t\\t\\t}\\n\\t\\t\\tthis.$emit('update:checkedFiles', newCheckedFiles)\\n\\t\\t},\\n\\t\\tcheckedFiles() {\\n\\t\\t\\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === this.file.fileid)\\n\\t\\t\\tif (!this.checked && fileIndex !== -1) {\\n\\t\\t\\t\\tthis.checked = true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n\\tbeforeMount() {\\n\\t\\tconst fileIndexChecked = this.checkedFiles.findIndex(f => f.fileid === this.file.fileid)\\n\\t\\tthis.checked = fileIndexChecked !== -1\\n\\t\\tsubscribe('deselectFiles', this.deselect)\\n\\t},\\n\\tbeforeDestroy() {\\n\\t\\tunsubscribe('deselectFiles', this.deselect)\\n\\t},\\n\\tmethods: {\\n\\t\\topenFile(file) {\\n\\t\\t\\tconst filesList = this.files.map(file => ({\\n\\t\\t\\t\\tbasename: file.filename,\\n\\t\\t\\t\\tfileid: file.fileid,\\n\\t\\t\\t\\tfilename: file.filepath.replace(`/${getCurrentUser().uid}/files`, ''),\\n\\t\\t\\t\\tgetcontentlength: file.filesize,\\n\\t\\t\\t\\tgetcontenttype: file.filemtype,\\n\\t\\t\\t\\tmime: file.filemtype,\\n\\t\\t\\t\\tsize: file.filesize,\\n\\t\\t\\t}))\\n\\t\\t\\tOCA.Viewer.open({\\n\\t\\t\\t\\tpath: file.filepath.replace(`/${getCurrentUser().uid}/files`, ''),\\n\\t\\t\\t\\tlist: filesList.map(file => ({\\n\\t\\t\\t\\t\\t...file,\\n\\t\\t\\t\\t\\tlist: filesList,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tonLoad() {\\n\\t\\t\\tthis.loaded = true\\n\\t\\t},\\n\\t\\tdeleteGroupFile(file) {\\n\\t\\t\\tif (this.deleteFileConfirmation) {\\n\\t\\t\\t\\tif (confirm(t('mediadc', 'Are you sure, you want delete this file?'))) {\\n\\t\\t\\t\\t\\tthis._deleteGroupFile(file)\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis._deleteGroupFile(file)\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t_deleteGroupFile(file) {\\n\\t\\t\\tthis.updating = true\\n\\t\\t\\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/${file.fileid}`))\\n\\t\\t\\t\\t.then(res => {\\n\\t\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\t\\tconst files = this.files\\n\\t\\t\\t\\t\\t\\tif (this.allFiles.length === 2) { // Remove detail when 1 file left\\n\\t\\t\\t\\t\\t\\t\\temit('openNextDetailGroup', this.detail)\\n\\t\\t\\t\\t\\t\\t\\tthis.$store.dispatch('deleteDetail', this.detail)\\n\\t\\t\\t\\t\\t\\t\\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tconst fileidIndex = files.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\t\\t\\tfiles.splice(fileidIndex, 1)\\n\\t\\t\\t\\t\\t\\tconst checkedIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\t\\t\\tif (this.checked && checkedIndex !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tconst newCheckedFiles = this.checkedFiles\\n\\t\\t\\t\\t\\t\\t\\tnewCheckedFiles.splice(checkedIndex, 1)\\n\\t\\t\\t\\t\\t\\t\\tthis.$emit('update:checkedFiles', newCheckedFiles)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tthis.$emit('update:files', files)\\n\\t\\t\\t\\t\\t\\temit('updateTaskInfo')\\n\\t\\t\\t\\t\\t\\tthis.$store.dispatch('setTask', res.data.task).then(() => {\\n\\t\\t\\t\\t\\t\\t\\temit('updateGroupFilesPagination', this.file)\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t} else if ('locked' in res.data && res.data.locked) {\\n\\t\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Wait until file loaded before deleting'))\\n\\t\\t\\t\\t\\t} else if ('not_permited' in res.data && res.data.not_permited) {\\n\\t\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Not enough permitions to delete file'))\\n\\t\\t\\t\\t\\t} else if ('not_found' in res.data && res.data.not_found) {\\n\\t\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'File not found. Probably it\\\\'s already deleted'))\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Some error occured while deleting file'))\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tthis.updating = false\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch(err => {\\n\\t\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Some error occured while deleting file'))\\n\\t\\t\\t\\t\\tthis.updating = false\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t\\tdeselect(filesToDeselect) {\\n\\t\\t\\tif (this.checked && filesToDeselect.map(f => f.fileid).includes(this.file.fileid)) {\\n\\t\\t\\t\\tthis.checked = false\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.file {\\n\\tposition: relative;\\n}\\n\\n.file-thumb {\\n\\tdisplay: flex;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n}\\n\\n.file-thumb-loaded {\\n\\tdisplay: flex;\\n\\twidth: 100%;\\n}\\n\\nimg {\\n\\twidth: 100%;\\n\\theight: auto;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n\\tcursor: pointer;\\n}\\n\\n.updating-blackout {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground: rgba(0, 0, 0, 0.7);\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n\\n.placeholder {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tcursor: pointer;\\n\\tborder-top-left-radius: 5px;\\n\\tborder-top-right-radius: 5px;\\n}\\n\\nbody.theme--dark .placeholder {\\n\\tbackground-color: #fff;\\n}\\n\\n.file-info {\\n\\twidth: 100%;\\n\\tpadding: 5px 10px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\talign-items: center;\\n\\tbackground-color: #000;\\n\\ttext-align: center;\\n\\tborder-bottom-left-radius: 5px;\\n\\tborder-bottom-right-radius: 5px;\\n\\tcolor: #fff;\\n}\\n\\n.filename {\\n\\twidth: 100%;\\n\\toverflow-x: hidden;\\n\\ttext-overflow: ellipsis;\\n\\twhite-space: nowrap;\\n}\\n\\n.delete-file-btn {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tbackground-image: var(--icon-delete-fff);\\n}\\n\\n.delete-file-btn:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.delete-file-btn:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .delete-file-btn {\\n\\tbackground-image: var(--icon-delete-000);\\n}\\n\\n.delete-file-btn:hover, body.theme--dark .delete-file-btn:hover {\\n\\tbackground-image: var(--icon-delete-e9322d);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.details-group[data-v-287ce272] {\\n\\twidth: 100%;\\n\\tborder-top: 1px solid #dadada;\\n\\tborder-bottom: 1px solid #dadada;\\n\\tmargin: 10px 0;\\n}\\nbody.theme--dark .details-group[data-v-287ce272] {\\n\\tborder-color: #717171;\\n}\\n.details-group-files[data-v-287ce272] {\\n\\tdisplay: flex;\\n\\tflex-wrap: wrap;\\n\\tjustify-content: center;\\n\\tmax-height: 100vh;\\n\\toverflow-y: scroll;\\n}\\n.file[data-v-287ce272] {\\n\\tdisplay: flex;\\n\\theight: 100%;\\n\\tflex-direction: column;\\n\\tjustify-content: space-between;\\n\\twidth: 192px;\\n\\tborder-radius: 5px;\\n\\tborder: 1px solid #dadada;\\n\\ttransition: box-shadow .3s;\\n\\tmargin: 10px;\\n}\\nbody.theme--dark .file[data-v-287ce272] {\\n\\tborder-color: #717171;\\n}\\n@media (max-width: 540px) {\\n.file[data-v-287ce272] {\\n\\t\\tmax-width: 192px;\\n}\\n.filters[data-v-287ce272] {\\n\\t\\tflex-direction: column;\\n}\\n}\\n.file[data-v-287ce272]:hover {\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .25);\\n}\\n.filters[data-v-287ce272] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 10px;\\n\\tmargin: 10px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\n.search[data-v-287ce272] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n.sorting[data-v-287ce272] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n.sorting-group-files-btn[data-v-287ce272] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tmargin: 0 5px;\\n\\tcursor: pointer;\\n}\\n.sorting-group-files-btn[data-v-287ce272]:hover {\\n\\tbackground-color: #eee;\\n}\\n.sorting-group-files-btn[data-v-287ce272]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .sorting-group-files-btn[data-v-287ce272]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .sorting-group-files-btn[data-v-287ce272]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n.batch-editing[data-v-287ce272] {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n.batch-actions-menu-button[data-v-287ce272] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n.batch-actions-menu-button[data-v-287ce272]:hover {\\n\\tbackground-color: #eee;\\n}\\n.batch-actions-menu-button[data-v-287ce272]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .batch-actions-menu-button[data-v-287ce272]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .batch-actions-menu-button[data-v-287ce272]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/components/details/DetailsGroupList.vue\"],\"names\":[],\"mappings\":\";AAqUA;CACA,WAAA;CACA,6BAAA;CACA,gCAAA;CACA,cAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,aAAA;CACA,eAAA;CACA,uBAAA;CACA,iBAAA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,YAAA;CACA,sBAAA;CACA,8BAAA;CACA,YAAA;CACA,kBAAA;CACA,yBAAA;CACA,0BAAA;CACA,YAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;AACA;EACA,gBAAA;AACA;AAEA;EACA,sBAAA;AACA;AACA;AAEA;CACA,yCAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,iBAAA;CACA,cAAA;CACA,yBAAA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,aAAA;CACA,eAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,kBAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div v-if=\\\"!loadingFiles\\\" class=\\\"details-group\\\">\\n\\t\\t<div class=\\\"filters\\\">\\n\\t\\t\\t<div class=\\\"sorting\\\">\\n\\t\\t\\t\\t{{ t('mediadc', 'Files size sorting') }}\\n\\t\\t\\t\\t<span :class=\\\"filesAscending ? 'icon-triangle-s sorting-group-files-btn' : 'icon-triangle-n sorting-group-files-btn'\\\" @click=\\\"updateFileSorting\\\" />\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"search\\\">\\n\\t\\t\\t\\t<label for=\\\"filename-filter\\\">\\n\\t\\t\\t\\t\\t{{ t('mediadc', 'Filter by filename: ') }}\\n\\t\\t\\t\\t\\t<input id=\\\"filename-filter\\\"\\n\\t\\t\\t\\t\\t\\tv-model=\\\"filterFileName\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"search\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"filename-filter\\\"\\n\\t\\t\\t\\t\\t\\t:placeholder=\\\"t('mediadc', 'Filename or part')\\\"\\n\\t\\t\\t\\t\\t\\t@input=\\\"filterByFileName\\\">\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"checkedFiles.length > 0\\\" class=\\\"batch-editing\\\">\\n\\t\\t\\t\\t{{ translatePlural('mediadc', 'Batch actions for %n file', 'Batch actions for %n files', checkedFiles.length) }}\\n\\t\\t\\t\\t<div class=\\\"app-content-list-menu\\\" style=\\\"margin: 0 0 0 10px; position: relative;\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"icon-more batch-actions-menu-button\\\" @click=\\\"openBatchActionsPopup\\\" />\\n\\t\\t\\t\\t\\t<div :class=\\\"batchActionsOpened ? 'popovermenu open' : 'popovermenu'\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"right: -1px;\\\">\\n\\t\\t\\t\\t\\t\\t<ul>\\n\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-checkmark\\\" @click=\\\"selectAllFiles\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ checkedFiles.length === allFiles.length ? t('mediadc', 'Deselect all') : t('mediadc', 'Select all') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li v-if=\\\"JSON.parse(detail.group_files_ids).length > groupItemsPerPage\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-checkmark\\\" @click=\\\"selectAllFilesOnPage\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ checkedFilesIntersect.length === files.length ? t('mediadc', 'Deselect all on page') : t('mediadc', 'Select all on page') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-close\\\" :title=\\\"t('mediadc', 'Remove without deleting')\\\" @click=\\\"removeCheckedFiles\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ translatePlural('mediadc', 'Remove file', 'Remove files', checkedFiles.length) }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-delete\\\" @click=\\\"deleteCheckedFiles\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ translatePlural('mediadc', 'Delete file', 'Delete files', checkedFiles.length) }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div v-if=\\\"!filesFiltered\\\" class=\\\"details-group-files\\\">\\n\\t\\t\\t<DetailsFile\\n\\t\\t\\t\\tv-for=\\\"file in files\\\"\\n\\t\\t\\t\\t:key=\\\"file.fileid\\\"\\n\\t\\t\\t\\t:file=\\\"file\\\"\\n\\t\\t\\t\\t:files=\\\"files\\\"\\n\\t\\t\\t\\t:all-files=\\\"allFiles\\\"\\n\\t\\t\\t\\t:checked-files.sync=\\\"checkedFiles\\\"\\n\\t\\t\\t\\t:detail=\\\"detail\\\" />\\n\\t\\t</div>\\n\\t\\t<div v-else-if=\\\"filteredFiles.length > 0\\\" class=\\\"details-group-files\\\">\\n\\t\\t\\t<DetailsFile\\n\\t\\t\\t\\tv-for=\\\"file in filteredFiles\\\"\\n\\t\\t\\t\\t:key=\\\"file.fileid\\\"\\n\\t\\t\\t\\t:file=\\\"file\\\"\\n\\t\\t\\t\\t:files=\\\"files\\\"\\n\\t\\t\\t\\t:all-files=\\\"allFiles\\\"\\n\\t\\t\\t\\t:checked-files.sync=\\\"checkedFiles\\\"\\n\\t\\t\\t\\t:detail=\\\"detail\\\" />\\n\\t\\t</div>\\n\\t\\t<div v-else class=\\\"details-group-files\\\">\\n\\t\\t\\t<p style=\\\"margin: 0 0 10px;\\\">\\n\\t\\t\\t\\t{{ t('mediadc', 'No matches on this page') }}\\n\\t\\t\\t</p>\\n\\t\\t</div>\\n\\t</div>\\n\\t<div v-else>\\n\\t\\t<span class=\\\"icon-loading\\\" style=\\\"width: 20px; height: 20px; display: flex; margin: 20px auto;\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport Formats from '../../mixins/Formats'\\nimport { mapGetters } from 'vuex'\\nimport DetailsFile from './DetailsFile'\\nimport { showError, showMessage, showSuccess, showWarning } from '@nextcloud/dialogs'\\nimport { generateUrl } from '@nextcloud/router'\\nimport axios from '@nextcloud/axios'\\nimport { emit } from '@nextcloud/event-bus'\\n\\nexport default {\\n\\tname: 'DetailsGroupList',\\n\\tcomponents: { DetailsFile },\\n\\tmixins: [Formats],\\n\\tprops: {\\n\\t\\tfiles: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t\\tdefault: () => [],\\n\\t\\t},\\n\\t\\tallFiles: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t\\tdefault: () => [],\\n\\t\\t},\\n\\t\\tdetail: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tloadingFiles: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tupdating: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfilesAscending: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tcheckedFiles: [],\\n\\t\\t\\tbatchActionsOpened: false,\\n\\t\\t\\tfilesFiltered: false,\\n\\t\\t\\tfilterFileName: '',\\n\\t\\t\\tfilteredFiles: [],\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'detailsGridSize',\\n\\t\\t\\t'deleteFileConfirmation',\\n\\t\\t\\t'groupItemsPerPage',\\n\\t\\t\\t'details',\\n\\t\\t]),\\n\\t\\tcheckedFilesIntersect() {\\n\\t\\t\\tconst a = new Set(this.files)\\n\\t\\t\\tconst b = new Set(this.checkedFiles)\\n\\t\\t\\tconst intersect = new Set([...a].filter(i => b.has(i)))\\n\\t\\t\\treturn Array.from(intersect)\\n\\t\\t},\\n\\t},\\n\\twatch: {\\n\\t\\tfiles() {\\n\\t\\t\\tthis.filterByFileName()\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\topenBatchActionsPopup() {\\n\\t\\t\\tdocument.addEventListener('click', this.toggleBatchActionsPopup)\\n\\t\\t},\\n\\t\\ttoggleBatchActionsPopup() {\\n\\t\\t\\tif (this.batchActionsOpened) {\\n\\t\\t\\t\\tdocument.removeEventListener('click', this.toggleBatchActionsPopup)\\n\\t\\t\\t}\\n\\t\\t\\tthis.batchActionsOpened = !this.batchActionsOpened\\n\\t\\t},\\n\\t\\tselectAllFiles() {\\n\\t\\t\\tif (this.checkedFiles.length === this.allFiles.length) { // Deselect files\\n\\t\\t\\t\\temit('deselectFiles', this.checkedFiles)\\n\\t\\t\\t\\tfor (const file of this.allFiles) {\\n\\t\\t\\t\\t\\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\t\\tif (fileIndex !== -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedFiles.splice(fileIndex, 1)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tfor (const file of this.allFiles) {\\n\\t\\t\\t\\t\\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\t\\tif (fileIndex === -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedFiles.push(file)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tselectAllFilesOnPage() {\\n\\t\\t\\tif (this.files.length === this.checkedFilesIntersect.length) {\\n\\t\\t\\t\\tconst filesToDeselect = this.checkedFilesIntersect\\n\\t\\t\\t\\temit('deselectFiles', filesToDeselect)\\n\\t\\t\\t\\tfor (const fileid of filesToDeselect.map(f => f.fileid)) {\\n\\t\\t\\t\\t\\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\\n\\t\\t\\t\\t\\tif (fileIndex !== -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedFiles.splice(fileIndex, 1)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tfor (const file of this.files) {\\n\\t\\t\\t\\t\\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\t\\tif (fileIndex === -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedFiles.push(file)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tremoveCheckedFiles() {\\n\\t\\t\\tthis.$emit('update:updating', true)\\n\\t\\t\\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/remove`), { fileIds: this.checkedFiles.map(f => f.fileid) }).then(res => {\\n\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\tconst allFiles = this.allFiles\\n\\t\\t\\t\\t\\tif ((this.allFiles.length - this.checkedFiles.length) <= 1) {\\n\\t\\t\\t\\t\\t\\temit('openNextDetailGroup', this.detail)\\n\\t\\t\\t\\t\\t\\t// Remove detail\\n\\t\\t\\t\\t\\t\\tthis.$store.dispatch('deleteDetail', this.detail)\\n\\t\\t\\t\\t\\t\\tif ((this.allFiles.length - this.checkedFiles.length) === 1) {\\n\\t\\t\\t\\t\\t\\t\\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tfor (const fileid of res.data.removedFileIds) {\\n\\t\\t\\t\\t\\t\\tconst fileidIndex = allFiles.findIndex(f => f.fileid === fileid)\\n\\t\\t\\t\\t\\t\\tallFiles.splice(fileidIndex, 1)\\n\\t\\t\\t\\t\\t\\tconst checkedFileIdIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\\n\\t\\t\\t\\t\\t\\tif (checkedFileIdIndex !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tthis.checkedFiles.splice(checkedFileIdIndex, 1)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\temit('updateTaskInfo')\\n\\t\\t\\t\\t\\tthis.$emit('update:allFiles', allFiles)\\n\\t\\t\\t\\t\\temit('updateGroupFilesPagination')\\n\\t\\t\\t\\t\\tthis.$emit('update:updating', false)\\n\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Checked files successfully removed'))\\n\\t\\t\\t\\t}\\n\\t\\t\\t}).catch(err => {\\n\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t\\tshowError(this.t('mediadc', 'Some server error occured'))\\n\\t\\t\\t\\tthis.$emit('update:updating', false)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tdeleteCheckedFiles() {\\n\\t\\t\\tif (this.allFiles.length === this.checkedFiles.length) {\\n\\t\\t\\t\\tif (confirm(this.t('mediadc', 'Are you sure, you want delete all files'))) {\\n\\t\\t\\t\\t\\tthis._deleteCheckedFiles()\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis._deleteCheckedFiles()\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t_deleteCheckedFiles() {\\n\\t\\t\\tthis.$emit('update:updating', true)\\n\\t\\t\\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/delete`), { fileIds: this.checkedFiles.map(f => f.fileid) }).then(res => {\\n\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\tthis._updateDeletedFiles(res)\\n\\t\\t\\t\\t} else if (!res.data.success && res.data.deletedFileIds.length > 0) {\\n\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Not all files deleted'))\\n\\t\\t\\t\\t\\tthis._updateDeletedFiles(res)\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tconsole.debug(res.data.errors)\\n\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Some server error occured. Files not deleted'))\\n\\t\\t\\t\\t\\tthis.$emit('update:updating', false)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}).catch(err => {\\n\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t\\tshowError(this.t('mediadc', 'Some server error occured'))\\n\\t\\t\\t\\tthis.$emit('update:updating', false)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\t_updateDeletedFiles(res) {\\n\\t\\t\\tconst allFiles = this.allFiles\\n\\t\\t\\tif ((this.allFiles.length - this.checkedFiles.length) <= 1 && res.data.deletedFileIds.length === this.checkedFiles.length) {\\n\\t\\t\\t\\temit('openNextDetailGroup', this.detail)\\n\\t\\t\\t\\t// Remove detail\\n\\t\\t\\t\\tthis.$store.dispatch('deleteDetail', this.detail)\\n\\t\\t\\t\\tif ((this.allFiles.length - this.checkedFiles.length) === 1) {\\n\\t\\t\\t\\t\\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\tfor (const fileid of res.data.deletedFileIds) {\\n\\t\\t\\t\\tconst fileidIndex = allFiles.findIndex(f => f.fileid === fileid)\\n\\t\\t\\t\\tallFiles.splice(fileidIndex, 1)\\n\\t\\t\\t\\tconst checkedFileIdIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\\n\\t\\t\\t\\tif (checkedFileIdIndex !== -1) {\\n\\t\\t\\t\\t\\tthis.checkedFiles.splice(checkedFileIdIndex, 1)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\temit('updateTaskInfo')\\n\\t\\t\\tthis.$emit('update:allFiles', allFiles)\\n\\t\\t\\temit('updateGroupFilesPagination')\\n\\t\\t\\tthis.$emit('update:updating', false)\\n\\t\\t\\tshowSuccess(this.t('mediadc', 'Checked files successfully deleted'))\\n\\t\\t},\\n\\t\\tfilterByFileName() {\\n\\t\\t\\tif (this.filterFileName !== '') {\\n\\t\\t\\t\\tthis.filesFiltered = true\\n\\t\\t\\t\\tthis.filteredFiles = this.files.filter(f => f.filename.toLowerCase().includes(this.filterFileName.toLowerCase()))\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis.filesFiltered = false\\n\\t\\t\\t\\tthis.filteredFiles = []\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tupdateFileSorting() {\\n\\t\\t\\tthis.$emit('update:filesAscending', !this.filesAscending)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.details-group {\\n\\twidth: 100%;\\n\\tborder-top: 1px solid #dadada;\\n\\tborder-bottom: 1px solid #dadada;\\n\\tmargin: 10px 0;\\n}\\n\\nbody.theme--dark .details-group {\\n\\tborder-color: #717171;\\n}\\n\\n.details-group-files {\\n\\tdisplay: flex;\\n\\tflex-wrap: wrap;\\n\\tjustify-content: center;\\n\\tmax-height: 100vh;\\n\\toverflow-y: scroll;\\n}\\n\\n.file {\\n\\tdisplay: flex;\\n\\theight: 100%;\\n\\tflex-direction: column;\\n\\tjustify-content: space-between;\\n\\twidth: 192px;\\n\\tborder-radius: 5px;\\n\\tborder: 1px solid #dadada;\\n\\ttransition: box-shadow .3s;\\n\\tmargin: 10px;\\n}\\n\\nbody.theme--dark .file {\\n\\tborder-color: #717171;\\n}\\n\\n@media (max-width: 540px) {\\n\\t.file {\\n\\t\\tmax-width: 192px;\\n\\t}\\n\\n\\t.filters {\\n\\t\\tflex-direction: column;\\n\\t}\\n}\\n\\n.file:hover {\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .25);\\n}\\n\\n.filters {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 10px;\\n\\tmargin: 10px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\n\\n.search {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n.sorting {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n.sorting-group-files-btn {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tmargin: 0 5px;\\n\\tcursor: pointer;\\n}\\n\\n.sorting-group-files-btn:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.sorting-group-files-btn:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .sorting-group-files-btn:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .sorting-group-files-btn:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\n.batch-editing {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n.batch-actions-menu-button {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n\\n.batch-actions-menu-button:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.batch-actions-menu-button:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .batch-actions-menu-button:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .batch-actions-menu-button:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.task-details[data-v-6970fd5d] {\\n\\twidth: 100%;\\n\\tpadding: 20px 10px 20px 20px;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\toverflow-y: scroll;\\n\\tmargin: 0 auto;\\n}\\n.task-details-heading[data-v-6970fd5d] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n}\\n.action-blackout[data-v-6970fd5d] {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.5);\\n\\tz-index: 999;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n.task-details-heading h3[data-v-6970fd5d] {\\n\\tmargin: 0;\\n}\\n@media (max-width: 540px) {\\n.task-details-heading[data-v-6970fd5d] {\\n\\t\\tflex-direction: column;\\n\\t\\ttext-align: center;\\n}\\n}\\n.pagination[data-v-6970fd5d] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\t/* margin: 10px 0; */\\n}\\n.pagination-button[data-v-6970fd5d] {\\n\\tpadding: 20px;\\n\\tmargin: 0 5px;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n.sorting[data-v-6970fd5d] {\\n\\tdisplay: flex;\\n}\\n.toggle-sorting-button[data-v-6970fd5d] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n\\tcursor: pointer;\\n}\\n.pagination-button[data-v-6970fd5d]:hover, .toggle-sorting-button[data-v-6970fd5d]:hover {\\n\\tbackground-color: #eee;\\n}\\n.pagination-button[data-v-6970fd5d]:active, .toggle-sorting-button[data-v-6970fd5d]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .pagination-button[data-v-6970fd5d]:hover, body.theme--dark .toggle-sorting-button[data-v-6970fd5d]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .pagination-button[data-v-6970fd5d]:active, body.theme--dark .toggle-sorting-button[data-v-6970fd5d]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\nbody.theme--dark .task-details[data-v-6970fd5d] {\\n\\tborder-color: #717171;\\n}\\n.task-details-row[data-v-6970fd5d] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tborder: 1px solid #dedede;\\n\\tborder-radius: 5px;\\n\\tmargin-bottom: 5px;\\n\\ttransition: height .3s;\\n}\\n.filters[data-v-6970fd5d] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 10px;\\n\\tmargin: 10px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\nbody.theme--dark .task-details-row[data-v-6970fd5d], body.theme--dark .filters[data-v-6970fd5d] {\\n\\tborder-color: #717171;\\n}\\n@media (max-width: 540px) {\\n.filters[data-v-6970fd5d] {\\n\\t\\tflex-direction: column;\\n}\\n}\\n.batch-editing[data-v-6970fd5d] {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n.batch-actions-menu-button[data-v-6970fd5d] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n.batch-actions-menu-button[data-v-6970fd5d]:hover {\\n\\tbackground-color: #eee;\\n}\\n.batch-actions-menu-button[data-v-6970fd5d]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .batch-actions-menu-button[data-v-6970fd5d]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .batch-actions-menu-button[data-v-6970fd5d]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/components/details/DetailsList.vue\"],\"names\":[],\"mappings\":\";AA4TA;CACA,WAAA;CACA,4BAAA;CACA,yBAAA;CACA,kBAAA;CACA,kBAAA;CACA,cAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;AACA;AAEA;CACA,kBAAA;CACA,MAAA;CACA,OAAA;CACA,QAAA;CACA,SAAA;CACA,oCAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,kBAAA;AACA;AAEA;CACA,SAAA;AACA;AAEA;AACA;EACA,sBAAA;EACA,kBAAA;AACA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,oBAAA;AACA;AAEA;CACA,aAAA;CACA,aAAA;CACA,WAAA;CACA,YAAA;CACA,eAAA;CACA,kBAAA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,iBAAA;CACA,eAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,yBAAA;CACA,kBAAA;CACA,kBAAA;CACA,sBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,iBAAA;CACA,cAAA;CACA,yBAAA;CACA,kBAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;AACA;EACA,sBAAA;AACA;AACA;AAEA;CACA,kBAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div class=\\\"task-details\\\">\\n\\t\\t<div class=\\\"task-details-heading\\\">\\n\\t\\t\\t<h3>\\n\\t\\t\\t\\t{{ t('mediadc', 'Duplicates list') }}\\n\\t\\t\\t\\t<span v-if=\\\"getStatusBadge(task) === 'finished'\\\">\\n\\t\\t\\t\\t\\t- {{ details.length }} {{ translatePlural('mediadc', 'group, ', 'groups', details.length) }}\\n\\t\\t\\t\\t\\t({{ filestotal }} {{ translatePlural('mediadc', 'file', 'files', filestotal) }} - {{ formatBytes(filessize) }})\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</h3>\\n\\t\\t\\t<div class=\\\"pagination\\\">\\n\\t\\t\\t\\t<CheckboxRadioSwitch :checked.sync=\\\"sortGroups\\\" style=\\\"margin-right: 20px;\\\">\\n\\t\\t\\t\\t\\t{{ t('mediadc', 'Sort groups') }}\\n\\t\\t\\t\\t</CheckboxRadioSwitch>\\n\\t\\t\\t\\t<span :class=\\\"!sorted ? 'icon-triangle-s toggle-sorting-button' : 'icon-triangle-n toggle-sorting-button'\\\"\\n\\t\\t\\t\\t\\t:title=\\\"t('mediadc', 'Sorting details by files count')\\\"\\n\\t\\t\\t\\t\\t@click=\\\"toggleSorting\\\" />\\n\\t\\t\\t\\t<span v-if=\\\"details.length > itemsPerPage\\\"\\n\\t\\t\\t\\t\\tclass=\\\"icon-view-previous pagination-button\\\"\\n\\t\\t\\t\\t\\t@click=\\\"prevGroupsPage()\\\" />\\n\\t\\t\\t\\t<span v-if=\\\"details.length > itemsPerPage\\\">{{ t('mediadc', 'Page:') }}&nbsp;</span>\\n\\t\\t\\t\\t<span v-if=\\\"details.length > itemsPerPage\\\">{{ page + 1 }}/{{ Math.ceil(details.length / itemsPerPage) }}</span>\\n\\t\\t\\t\\t<span v-if=\\\"details.length > itemsPerPage\\\" class=\\\"icon-view-next pagination-button\\\" @click=\\\"nextGroupsPage()\\\" />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div v-if=\\\"details.length > 0\\\">\\n\\t\\t\\t<div class=\\\"filters\\\">\\n\\t\\t\\t\\t<label for=\\\"group-id-filter\\\">\\n\\t\\t\\t\\t\\t{{ t('mediadc', 'Filter by duplicate group id: ') }}\\n\\t\\t\\t\\t\\t<input id=\\\"group-id-filter\\\"\\n\\t\\t\\t\\t\\t\\tv-model=\\\"filterId\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"search\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"group-id-filter\\\"\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"#id\\\"\\n\\t\\t\\t\\t\\t\\t@input=\\\"filterByGroupId\\\">\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t<div v-if=\\\"checkedDetailGroups.length > 0\\\" class=\\\"batch-editing\\\">\\n\\t\\t\\t\\t\\t{{ translatePlural('mediadc', 'Batch actions for %n group', 'Batch actions for %n groups', checkedDetailGroups.length) }}\\n\\t\\t\\t\\t\\t<div class=\\\"app-content-list-menu\\\" style=\\\"margin: 0 0 0 10px; position: relative;\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"icon-more batch-actions-menu-button\\\" @click=\\\"openBatchActionsPopup\\\" />\\n\\t\\t\\t\\t\\t\\t<div :class=\\\"batchActionsOpened ? 'popovermenu open' : 'popovermenu'\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"right: -1px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ul>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-checkmark\\\" @click=\\\"selectAllGroups\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ checkedDetailGroups.length === details.length ? t('mediadc', 'Deselect all') : t('mediadc', 'Select all') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li v-if=\\\"details.length > itemsPerPage\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-checkmark\\\" @click=\\\"selectAllGroupsOnPage\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ checkedDetailGroupsIntersect.length === paginatedDetails[page].length ? t('mediadc', 'Deselect all on page') : t('mediadc', 'Select all on page') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-close\\\" @click=\\\"removeCheckedGroups\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ translatePlural('mediadc', 'Remove group', 'Remove groups', checkedDetailGroups.length) }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"batchUpdating\\\" class=\\\"action-blackout\\\">\\n\\t\\t\\t\\t<span class=\\\"icon-loading\\\" />\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else-if=\\\"detailsFiltered === undefined || (detailsFiltered.length === 0 && (filterId === '' || filterId === null))\\\">\\n\\t\\t\\t\\t<template v-if=\\\"sortGroups\\\">\\n\\t\\t\\t\\t\\t<div v-for=\\\"detail in paginatedSortedDetails[page]\\\"\\n\\t\\t\\t\\t\\t\\tv-show=\\\"JSON.parse(detail.group_files_ids).length > 1\\\"\\n\\t\\t\\t\\t\\t\\t:key=\\\"detail.id\\\"\\n\\t\\t\\t\\t\\t\\tclass=\\\"task-details-row\\\">\\n\\t\\t\\t\\t\\t\\t<DetailsListItem :detail=\\\"detail\\\" :checked-detail-groups.sync=\\\"checkedDetailGroups\\\" />\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</template>\\n\\t\\t\\t\\t<template v-else>\\n\\t\\t\\t\\t\\t<div v-for=\\\"detail in paginatedDetails[page]\\\"\\n\\t\\t\\t\\t\\t\\tv-show=\\\"JSON.parse(detail.group_files_ids).length > 1\\\"\\n\\t\\t\\t\\t\\t\\t:key=\\\"detail.id\\\"\\n\\t\\t\\t\\t\\t\\tclass=\\\"task-details-row\\\">\\n\\t\\t\\t\\t\\t\\t<DetailsListItem :detail=\\\"detail\\\" :checked-detail-groups.sync=\\\"checkedDetailGroups\\\" />\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</template>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else-if=\\\"detailsFiltered.length > 0\\\">\\n\\t\\t\\t\\t<div v-for=\\\"detail in detailsFiltered\\\"\\n\\t\\t\\t\\t\\tv-show=\\\"JSON.parse(detail.group_files_ids).length > 1\\\"\\n\\t\\t\\t\\t\\t:key=\\\"detail.id\\\"\\n\\t\\t\\t\\t\\tclass=\\\"task-details-row\\\">\\n\\t\\t\\t\\t\\t<DetailsListItem :detail=\\\"detail\\\" :checked-detail-groups.sync=\\\"checkedDetailGroups\\\" />\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<p style=\\\"text-align: center; font-weight: bold;\\\">\\n\\t\\t\\t\\t\\t{{ t('mediadc', 'No matching found') }}\\n\\t\\t\\t\\t</p>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div v-else style=\\\"margin-top: 10px;\\\">\\n\\t\\t\\t<strong>{{ t('mediadc', 'No duplicates found.') }}</strong>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport axios from '@nextcloud/axios'\\nimport { generateUrl } from '@nextcloud/router'\\nimport { showError, showSuccess, showWarning } from '@nextcloud/dialogs'\\nimport { mapGetters } from 'vuex'\\nimport Formats from '../../mixins/Formats'\\nimport DetailsListItem from './DetailsListItem'\\nimport { subscribe, unsubscribe, emit } from '@nextcloud/event-bus'\\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\\n\\nexport default {\\n\\tname: 'DetailsList',\\n\\tcomponents: { DetailsListItem, CheckboxRadioSwitch },\\n\\tmixins: [Formats],\\n\\tprops: {\\n\\t\\tfilessize: {\\n\\t\\t\\ttype: Number,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfilestotal: {\\n\\t\\t\\ttype: Number,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tpage: 0,\\n\\t\\t\\tfilterId: null,\\n\\t\\t\\tcheckedDetailGroups: [],\\n\\t\\t\\tbatchActionsOpened: false,\\n\\t\\t\\tbatchActionResult: null,\\n\\t\\t\\tbatchUpdating: false,\\n\\t\\t\\tsortGroups: true,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'task',\\n\\t\\t\\t'details',\\n\\t\\t\\t'sortedDetails',\\n\\t\\t\\t'sorted',\\n\\t\\t\\t'paginatedDetails',\\n\\t\\t\\t'paginatedSortedDetails',\\n\\t\\t\\t'itemsPerPage',\\n\\t\\t\\t'detailsFiltered',\\n\\t\\t\\t'autoOpenNextGroup',\\n\\t\\t]),\\n\\t\\tcheckedDetailGroupsIntersect() {\\n\\t\\t\\tconst a = new Set(this.paginatedDetails[this.page].map(d => d.id))\\n\\t\\t\\tconst b = new Set(this.checkedDetailGroups.map(d => d.id))\\n\\t\\t\\tconst intersect = new Set([...a].filter(i => b.has(i)))\\n\\t\\t\\treturn Array.from(intersect)\\n\\t\\t},\\n\\t},\\n\\twatch: {\\n\\t\\titemsPerPage(newItemsPerPage) {\\n\\t\\t\\tif (this.page >= Math.ceil(this.details.length / newItemsPerPage)) {\\n\\t\\t\\t\\tthis.page = Math.ceil(this.details.length / newItemsPerPage) - 1\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tdetails(newDetails) {\\n\\t\\t\\tif (this.page >= Math.ceil(newDetails.length / this.itemsPerPage)) {\\n\\t\\t\\t\\tthis.page = Math.ceil(newDetails.length / this.itemsPerPage) - 1\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tsortGroups() {\\n\\t\\t\\twindow.localStorage.setItem('mediadc_details_sort_groups', this.sortGroups)\\n\\t\\t\\tthis.$store.dispatch('setSortGroups', this.sortGroups)\\n\\t\\t},\\n\\t},\\n\\tbeforeMount() {\\n\\t\\tthis.$emit('update:loading', false)\\n\\t\\tconst sortGroups = window.localStorage.getItem('mediadc_details_sort_groups')\\n\\t\\tthis.sortGroups = sortGroups !== null ? JSON.parse(sortGroups) === true : true\\n\\t\\tthis.$store.dispatch('setSortGroups', sortGroups !== null ? JSON.parse(sortGroups) === true : true)\\n\\t\\tsubscribe('openNextDetailGroup', this.openNextDetailGroup)\\n\\t},\\n\\tbeforeDestroy() {\\n\\t\\tunsubscribe('openNextDetailGroup', this.openNextDetailGroup)\\n\\t},\\n\\tmethods: {\\n\\t\\tprevGroupsPage() {\\n\\t\\t\\tif (this.page > 0) {\\n\\t\\t\\t\\tthis.page -= 1\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'First page reached!'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tnextGroupsPage() {\\n\\t\\t\\tif (this.page < Math.ceil(this.details.length / this.itemsPerPage) - 1) {\\n\\t\\t\\t\\tthis.page += 1\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Last page reached!'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\ttoggleSorting() {\\n\\t\\t\\tthis.$store.dispatch('setSorted', !this.sorted)\\n\\t\\t},\\n\\t\\tfilterByGroupId() {\\n\\t\\t\\tif (this.filterId !== null && this.filterId !== '') {\\n\\t\\t\\t\\tthis.$store.dispatch('setDetailsFiltered', this.details.filter(d => d.id.toString().includes(this.filterId)))\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis.$store.dispatch('setDetailsFiltered', [])\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\topenBatchActionsPopup() {\\n\\t\\t\\tdocument.addEventListener('click', this.toggleBatchActionsPopup)\\n\\t\\t},\\n\\t\\ttoggleBatchActionsPopup() {\\n\\t\\t\\tif (this.batchActionsOpened) {\\n\\t\\t\\t\\tdocument.removeEventListener('click', this.toggleBatchActionsPopup)\\n\\t\\t\\t}\\n\\t\\t\\tthis.batchActionsOpened = !this.batchActionsOpened\\n\\t\\t},\\n\\t\\tremoveCheckedGroups() {\\n\\t\\t\\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.task.id}/details/remove`), { taskDetailIds: this.checkedDetailGroups.map(d => d.id) }).then(res => {\\n\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\temit('updateTaskInfo')\\n\\t\\t\\t\\t\\tconst updatedDetails = this.details\\n\\t\\t\\t\\t\\tfor (const taskDetail of res.data.removedTaskDetails) {\\n\\t\\t\\t\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === taskDetail.id)\\n\\t\\t\\t\\t\\t\\tthis.checkedDetailGroups.splice(detailIndex, 1)\\n\\t\\t\\t\\t\\t\\tconst removedDetailIndex = updatedDetails.findIndex(d => d.id === taskDetail.id)\\n\\t\\t\\t\\t\\t\\tupdatedDetails.splice(removedDetailIndex, 1)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tthis.$store.dispatch('setDetails', updatedDetails)\\n\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Selected groups successfully removed'))\\n\\t\\t\\t\\t}\\n\\t\\t\\t}).catch(err => {\\n\\t\\t\\t\\tshowError(this.t('mediadc', 'Some server error occured'))\\n\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tselectAllGroups() {\\n\\t\\t\\tif (this.checkedDetailGroups.length === this.details.length) {\\n\\t\\t\\t\\temit('deselectGroups', this.checkedDetailGroups.map(d => d.id))\\n\\t\\t\\t\\tfor (const detail of this.details) {\\n\\t\\t\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\tif (detailIndex !== -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedDetailGroups.splice(detailIndex, 1)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tsetTimeout(() => { this.batchUpdating = false }, 300)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tfor (const detail of this.details) {\\n\\t\\t\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\tif (detailIndex === -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedDetailGroups.push(detail)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tselectAllGroupsOnPage() {\\n\\t\\t\\tif (this.paginatedDetails[this.page].length === this.checkedDetailGroupsIntersect.length) {\\n\\t\\t\\t\\tconst groupsToDeselect = this.checkedDetailGroupsIntersect\\n\\t\\t\\t\\temit('deselectGroups', groupsToDeselect)\\n\\t\\t\\t\\tfor (const detail of groupsToDeselect) {\\n\\t\\t\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\tif (detailIndex !== -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedDetailGroups.splice(detailIndex, 1)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tfor (const detail of this.paginatedDetails[this.page]) {\\n\\t\\t\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\tif (detailIndex === -1) {\\n\\t\\t\\t\\t\\t\\tthis.checkedDetailGroups.push(detail)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\topenNextDetailGroup(detail) {\\n\\t\\t\\tif (this.autoOpenNextGroup) {\\n\\t\\t\\t\\tconst detailIndex = this.details.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\tif (detailIndex !== -1) {\\n\\t\\t\\t\\t\\tif (detailIndex !== this.details.length - 1) {\\n\\t\\t\\t\\t\\t\\temit('openGroup', this.details[detailIndex + 1])\\n\\t\\t\\t\\t\\t} else if (detailIndex === this.details.length - 1 && this.details.length >= 2) {\\n\\t\\t\\t\\t\\t\\temit('openGroup', this.details[detailIndex - 1])\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.task-details {\\n\\twidth: 100%;\\n\\tpadding: 20px 10px 20px 20px;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\toverflow-y: scroll;\\n\\tmargin: 0 auto;\\n}\\n\\n.task-details-heading {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n}\\n\\n.action-blackout {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.5);\\n\\tz-index: 999;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n\\n.task-details-heading h3 {\\n\\tmargin: 0;\\n}\\n\\n@media (max-width: 540px) {\\n\\t.task-details-heading {\\n\\t\\tflex-direction: column;\\n\\t\\ttext-align: center;\\n\\t}\\n}\\n\\n.pagination {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\t/* margin: 10px 0; */\\n}\\n\\n.pagination-button {\\n\\tpadding: 20px;\\n\\tmargin: 0 5px;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n\\n.sorting {\\n\\tdisplay: flex;\\n}\\n\\n.toggle-sorting-button {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n\\tcursor: pointer;\\n}\\n\\n.pagination-button:hover, .toggle-sorting-button:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.pagination-button:active, .toggle-sorting-button:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .pagination-button:hover, body.theme--dark .toggle-sorting-button:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .pagination-button:active, body.theme--dark .toggle-sorting-button:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\nbody.theme--dark .task-details {\\n\\tborder-color: #717171;\\n}\\n\\n.task-details-row {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tborder: 1px solid #dedede;\\n\\tborder-radius: 5px;\\n\\tmargin-bottom: 5px;\\n\\ttransition: height .3s;\\n}\\n\\n.filters {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 10px;\\n\\tmargin: 10px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\n\\nbody.theme--dark .task-details-row, body.theme--dark .filters {\\n\\tborder-color: #717171;\\n}\\n\\n@media (max-width: 540px) {\\n\\t.filters {\\n\\t\\tflex-direction: column;\\n\\t}\\n}\\n\\n.batch-editing {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n.batch-actions-menu-button {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n\\n.batch-actions-menu-button:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.batch-actions-menu-button:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .batch-actions-menu-button:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .batch-actions-menu-button:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.details-list-item[data-v-08060f22] {\\n\\twidth: 100%;\\n\\tpadding: 10px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tflex-direction: column;\\n\\tposition: relative;\\n}\\n.details-list-item-title[data-v-08060f22] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n.group-info[data-v-08060f22] {\\n\\tpadding: 10px;\\n\\tborder-radius: 20px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tuser-select: none;\\n}\\n.group-info[data-v-08060f22]:hover {\\n\\tcursor: pointer;\\n\\tbackground-color: #eee;\\n}\\n.group-info[data-v-08060f22]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .group-info[data-v-08060f22]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .group-info[data-v-08060f22]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n.pagination[data-v-08060f22] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\t/* margin: 10px 0; */\\n}\\n.pagination-button[data-v-08060f22] {\\n\\tpadding: 20px;\\n\\tmargin: 0 5px;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n.pagination-button[data-v-08060f22]:hover {\\n\\tbackground-color: #eee;\\n}\\n.pagination-button[data-v-08060f22]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .pagination-button[data-v-08060f22]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .pagination-button[data-v-08060f22]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n.open-details-btn[data-v-08060f22] {\\n\\tdisplay: inline-flex;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tmargin: 0 5px 0 10px;\\n\\tcursor: pointer;\\n}\\n.delete-group-btn[data-v-08060f22] {\\n\\tvisibility: hidden;\\n\\tcursor: pointer;\\n\\tmargin: 0 10px 0 5px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n}\\n.delete-group-btn[data-v-08060f22]:hover {\\n\\tbackground-color: #eee;\\n}\\n.delete-group-btn[data-v-08060f22]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .delete-group-btn[data-v-08060f22]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .delete-group-btn[data-v-08060f22]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n.details-list-item:hover .delete-group-btn[data-v-08060f22] {\\n\\tvisibility: visible;\\n}\\n.action-blackout[data-v-08060f22] {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.5);\\n\\tz-index: 999;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n.batch-checkbox[data-v-08060f22] {\\n\\tvisibility: hidden;\\n\\tmargin-right: 20px;\\n}\\n.batch-checkbox .checkbox-radio-switch__icon[data-v-08060f22] {\\n\\tmargin-right: 0;\\n\\tcolor: #000;\\n}\\n.batch-checkbox.checkbox-radio-switch--checked[data-v-08060f22] {\\n\\tvisibility: visible;\\n}\\n.details-list-item:hover .batch-checkbox[data-v-08060f22] {\\n\\tvisibility: visible;\\n}\\n@media (max-width: 540px) {\\n.delete-group-btn[data-v-08060f22] {\\n\\t\\tvisibility: visible;\\n}\\n.batch-checkbox[data-v-08060f22] {\\n\\t\\tvisibility: visible;\\n\\t\\tmargin-right: 10px;\\n}\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/components/details/DetailsListItem.vue\"],\"names\":[],\"mappings\":\";AAyRA;CACA,WAAA;CACA,aAAA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,sBAAA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;AACA;AAEA;CACA,eAAA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,oBAAA;AACA;AAEA;CACA,aAAA;CACA,aAAA;CACA,WAAA;CACA,YAAA;CACA,eAAA;CACA,kBAAA;CACA,iBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,oBAAA;CACA,WAAA;CACA,YAAA;CACA,oBAAA;CACA,eAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;CACA,oBAAA;CACA,aAAA;CACA,kBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,kBAAA;CACA,MAAA;CACA,OAAA;CACA,QAAA;CACA,SAAA;CACA,oCAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,kBAAA;AACA;AAEA;CACA,kBAAA;CACA,kBAAA;AACA;AAEA;CACA,eAAA;CACA,WAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;AACA;EACA,mBAAA;AACA;AAEA;EACA,mBAAA;EACA,kBAAA;AACA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div class=\\\"details-list-item\\\">\\n\\t\\t<div v-show=\\\"updating\\\" class=\\\"action-blackout\\\">\\n\\t\\t\\t<span class=\\\"icon-loading\\\" />\\n\\t\\t</div>\\n\\t\\t<div class=\\\"details-list-item-title\\\">\\n\\t\\t\\t<CheckboxRadioSwitch class=\\\"batch-checkbox\\\" :checked.sync=\\\"checked\\\" />\\n\\t\\t\\t<span class=\\\"group-info\\\" @click=\\\"openDetailFiles(detail)\\\">\\n\\t\\t\\t\\t<span class=\\\"icon-projects\\\" style=\\\"margin: 0 10px 0 10px;\\\" />\\n\\t\\t\\t\\t{{ t('mediadc', 'Duplicate group') }} #{{ detail.id }} ({{ JSON.parse(detail.group_files_ids).length }}\\n\\t\\t\\t\\t{{ translatePlural('mediadc', 'file', 'files', JSON.parse(detail.group_files_ids).length) }}{{ Array.isArray(files) && files.length > 0 ? ' - ' + formatBytes(groupFilesSize) : '' }})\\n\\t\\t\\t\\t<span :class=\\\"!opened ? 'icon-triangle-s open-details-btn' : 'icon-triangle-n open-details-btn'\\\" />\\n\\t\\t\\t</span>\\n\\t\\t\\t<span class=\\\"icon-delete delete-group-btn\\\"\\n\\t\\t\\t\\t:title=\\\"t('mediadc', 'Remove group without deleting files')\\\"\\n\\t\\t\\t\\t@click=\\\"removeTaskDetail(detail)\\\" />\\n\\t\\t</div>\\n\\t\\t<div v-if=\\\"opened && JSON.parse(detail.group_files_ids).length > groupItemsPerPage\\\" class=\\\"pagination\\\">\\n\\t\\t\\t<span class=\\\"icon-view-previous pagination-button\\\"\\n\\t\\t\\t\\t@click=\\\"openPrevDetailFiles(detail)\\\" />\\n\\t\\t\\t<span>{{ t('mediadc', 'Page:') }}&nbsp;</span>\\n\\t\\t\\t<span>{{ page + 1 }}/{{ Math.ceil(JSON.parse(detail.group_files_ids).length / groupItemsPerPage) }}</span>\\n\\t\\t\\t<span class=\\\"icon-view-next pagination-button\\\"\\n\\t\\t\\t\\t@click=\\\"openNextDetailFiles(detail)\\\" />\\n\\t\\t</div>\\n\\t\\t<DetailsGroupList v-show=\\\"opened\\\"\\n\\t\\t\\t:detail=\\\"detail\\\"\\n\\t\\t\\t:files=\\\"files\\\"\\n\\t\\t\\t:all-files=\\\"allFiles\\\"\\n\\t\\t\\t:loading-files.sync=\\\"loadingFiles\\\"\\n\\t\\t\\t:updating.sync=\\\"updating\\\"\\n\\t\\t\\t:files-ascending.sync=\\\"filesAscending\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport axios from '@nextcloud/axios'\\nimport { generateUrl } from '@nextcloud/router'\\nimport DetailsGroupList from './DetailsGroupList'\\nimport Formats from '../../mixins/Formats'\\nimport { mapGetters } from 'vuex'\\nimport { showError, showSuccess, showWarning } from '@nextcloud/dialogs'\\nimport { subscribe, unsubscribe, emit } from '@nextcloud/event-bus'\\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\\n\\nexport default {\\n\\tname: 'DetailsListItem',\\n\\tcomponents: { DetailsGroupList, CheckboxRadioSwitch },\\n\\tmixins: [Formats],\\n\\tprops: {\\n\\t\\tdetail: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcheckedDetailGroups: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\topened: false,\\n\\t\\t\\tpage: 0,\\n\\t\\t\\ttotalPages: 0,\\n\\t\\t\\tloadingFiles: false,\\n\\t\\t\\tfiles: [],\\n\\t\\t\\tallFiles: [],\\n\\t\\t\\tpaginatedFiles: {},\\n\\t\\t\\tchecked: false,\\n\\t\\t\\tfilesAscending: false,\\n\\t\\t\\tupdating: false,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'task',\\n\\t\\t\\t'details',\\n\\t\\t\\t'groupItemsPerPage',\\n\\t\\t]),\\n\\t\\tgroupFilesSize() {\\n\\t\\t\\treturn this.allFiles.length > 0 ? this.allFiles.reduce((sum, file) => sum + file.filesize, 0) : 0\\n\\t\\t},\\n\\t},\\n\\twatch: {\\n\\t\\tchecked() {\\n\\t\\t\\tconst newCheckedDetailGroups = this.checkedDetailGroups\\n\\t\\t\\tconst detailIndex = newCheckedDetailGroups.findIndex(d => d.id === this.detail.id)\\n\\t\\t\\tif (this.checked) {\\n\\t\\t\\t\\tif (detailIndex === -1) {\\n\\t\\t\\t\\t\\tnewCheckedDetailGroups.push(this.detail)\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else if (detailIndex !== -1) {\\n\\t\\t\\t\\tnewCheckedDetailGroups.splice(detailIndex, 1)\\n\\t\\t\\t}\\n\\t\\t\\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\\n\\t\\t},\\n\\t\\tfilesAscending() {\\n\\t\\t\\tthis.sortFiles(this.filesAscending)\\n\\t\\t},\\n\\t\\tcheckedDetailGroups() {\\n\\t\\t\\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === this.detail.id)\\n\\t\\t\\tif (!this.checked && detailIndex !== -1) {\\n\\t\\t\\t\\tthis.checked = true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tgroupItemsPerPage(newGroupItemsPerPage) {\\n\\t\\t\\tif (this.opened) {\\n\\t\\t\\t\\tif (this.page >= Math.ceil(JSON.parse(this.detail.group_files_ids).length / newGroupItemsPerPage)) {\\n\\t\\t\\t\\t\\tthis.page = Math.ceil(JSON.parse(this.detail.group_files_ids).length / newGroupItemsPerPage) - 1\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\\n\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tallFiles(newAllFiles) {\\n\\t\\t\\tif (this.page >= Math.ceil(newAllFiles.length / this.groupItemsPerPage)) {\\n\\t\\t\\t\\tthis.page = Math.ceil(newAllFiles.length / this.groupItemsPerPage) - 1\\n\\t\\t\\t\\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\\n\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n\\tbeforeMount() {\\n\\t\\tconst detailCheckedIndex = this.checkedDetailGroups.findIndex(d => d.id === this.detail.id)\\n\\t\\tthis.checked = detailCheckedIndex !== -1\\n\\t\\tsubscribe('updateGroupFilesPagination', this.updateFilesPagination)\\n\\t\\tsubscribe('deselectGroups', this.deselect)\\n\\t\\tsubscribe('openGroup', this.openGroup)\\n\\t},\\n\\tbeforeDestroy() {\\n\\t\\tunsubscribe('updateGroupFilesPagination', this.updateFilesPagination)\\n\\t\\tunsubscribe('deselectGroups', this.deselect)\\n\\t\\tunsubscribe('openGroup', this.openGroup)\\n\\t},\\n\\tmethods: {\\n\\t\\topenDetailFiles(detail) {\\n\\t\\t\\tif (!this.opened) {\\n\\t\\t\\t\\tif (this.files === undefined || this.files.length === 0) {\\n\\t\\t\\t\\t\\tconst taskId = detail.task_id\\n\\t\\t\\t\\t\\tconst detailId = detail.id\\n\\t\\t\\t\\t\\tthis.loadingFiles = true\\n\\t\\t\\t\\t\\tthis.opened = true\\n\\t\\t\\t\\t\\tif (this.allFiles.length === 0) {\\n\\t\\t\\t\\t\\t\\tthis.loadAllFilesInfo(taskId, detailId)\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t\\t\\t\\tthis.loadingFiles = false\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tthis.opened = true\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis.opened = false\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\topenNextDetailFiles(detail) {\\n\\t\\t\\tif (this.page < Math.ceil(JSON.parse(detail.group_files_ids).length / this.groupItemsPerPage) - 1) {\\n\\t\\t\\t\\tthis.page += 1\\n\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Last page reached!'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\topenPrevDetailFiles(detail) {\\n\\t\\t\\tif (this.page > 0) {\\n\\t\\t\\t\\tthis.page -= 1\\n\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'First page reached!'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tloadAllFilesInfo(taskId, detailId) {\\n\\t\\t\\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${taskId}/files/${detailId}/all`)).then(res => {\\n\\t\\t\\t\\tthis.allFiles = res.data.files\\n\\t\\t\\t\\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\\n\\t\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t\\t\\tthis.loadingFiles = false\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tpaginateFiles(files) {\\n\\t\\t\\tconst paginatedFiles = []\\n\\t\\t\\tfor (let i = 0; i < files.length; i++) {\\n\\t\\t\\t\\tconst last = paginatedFiles[paginatedFiles.length - 1]\\n\\t\\t\\t\\tif (!last || last.length === this.groupItemsPerPage) {\\n\\t\\t\\t\\t\\tpaginatedFiles.push([files[i]])\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tlast.push(files[i])\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn paginatedFiles\\n\\t\\t},\\n\\t\\tremoveTaskDetail(detail) {\\n\\t\\t\\tif (confirm(this.t('mediadc', 'Are you sure, you want remove this group without deleting files?'))) {\\n\\t\\t\\t\\tthis.updating = true\\n\\t\\t\\t\\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${detail.task_id}/detail/${detail.id}`)).then(res => {\\n\\t\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\t\\temit('openNextDetailGroup', this.detail)\\n\\t\\t\\t\\t\\t\\tconst updatedDetails = [...this.details]\\n\\t\\t\\t\\t\\t\\tconst removedDetailIndex = updatedDetails.findIndex(d => d.id === this.detail.id)\\n\\t\\t\\t\\t\\t\\tupdatedDetails.splice(removedDetailIndex, 1)\\n\\t\\t\\t\\t\\t\\tthis.$store.dispatch('setDetails', updatedDetails)\\n\\t\\t\\t\\t\\t\\tconst checkedIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\t\\tconst newCheckedDetailGroups = [...this.checkedDetailGroups]\\n\\t\\t\\t\\t\\t\\tif (this.checked && checkedIndex !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tnewCheckedDetailGroups.splice(checkedIndex, 1)\\n\\t\\t\\t\\t\\t\\t\\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\temit('updateTaskInfo')\\n\\t\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Duplicate group succesffully removed'))\\n\\t\\t\\t\\t\\t\\tconst detailCheckedIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\\n\\t\\t\\t\\t\\t\\tif (detailCheckedIndex !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tconst newCheckedDetailGroups = this.checkedDetailGroups\\n\\t\\t\\t\\t\\t\\t\\tnewCheckedDetailGroups.splice(detailCheckedIndex, 1)\\n\\t\\t\\t\\t\\t\\t\\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tthis.updating = false\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Some error occured while deleting duplicate group'))\\n\\t\\t\\t\\t\\t\\tthis.updating = false\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}).catch(err => {\\n\\t\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t\\t\\tshowError(this.t('mediadc', 'Some error occured while deleting duplicate group'))\\n\\t\\t\\t\\t\\tthis.updating = false\\n\\t\\t\\t\\t})\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tsortFiles(ascending) {\\n\\t\\t\\tthis.allFiles.sort((a, b) => (ascending) ? a.filesize - b.filesize : b.filesize - a.filesize)\\n\\t\\t\\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\\n\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t},\\n\\t\\tupdateFilesPagination(file) {\\n\\t\\t\\tif (file) {\\n\\t\\t\\t\\tconst deletedFileIndex = this.allFiles.findIndex(f => f.fileid === file.fileid)\\n\\t\\t\\t\\tif (deletedFileIndex !== -1) {\\n\\t\\t\\t\\t\\tthis.allFiles.splice(deletedFileIndex, 1)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\\n\\t\\t\\tthis.files = this.paginatedFiles[this.page]\\n\\t\\t},\\n\\t\\tdeselect(groupsToDeselect) {\\n\\t\\t\\tif (this.checked && groupsToDeselect.includes(this.detail.id)) {\\n\\t\\t\\t\\tthis.checked = false\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\topenGroup(detail) {\\n\\t\\t\\tif (this.detail.id === detail.id && !this.opened) {\\n\\t\\t\\t\\tthis.openDetailFiles(detail)\\n\\t\\t\\t}\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.details-list-item {\\n\\twidth: 100%;\\n\\tpadding: 10px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tflex-direction: column;\\n\\tposition: relative;\\n}\\n\\n.details-list-item-title {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.group-info {\\n\\tpadding: 10px;\\n\\tborder-radius: 20px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tuser-select: none;\\n}\\n\\n.group-info:hover {\\n\\tcursor: pointer;\\n\\tbackground-color: #eee;\\n}\\n\\n.group-info:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .group-info:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .group-info:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\n.pagination {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\t/* margin: 10px 0; */\\n}\\n\\n.pagination-button {\\n\\tpadding: 20px;\\n\\tmargin: 0 5px;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tcursor: pointer;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n\\n.pagination-button:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.pagination-button:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .pagination-button:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .pagination-button:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\n.open-details-btn {\\n\\tdisplay: inline-flex;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tmargin: 0 5px 0 10px;\\n\\tcursor: pointer;\\n}\\n\\n.delete-group-btn {\\n\\tvisibility: hidden;\\n\\tcursor: pointer;\\n\\tmargin: 0 10px 0 5px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n}\\n\\n.delete-group-btn:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.delete-group-btn:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .delete-group-btn:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .delete-group-btn:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\n.details-list-item:hover .delete-group-btn {\\n\\tvisibility: visible;\\n}\\n\\n.action-blackout {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.5);\\n\\tz-index: 999;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tborder-radius: 5px;\\n}\\n\\n.batch-checkbox {\\n\\tvisibility: hidden;\\n\\tmargin-right: 20px;\\n}\\n\\n.batch-checkbox .checkbox-radio-switch__icon {\\n\\tmargin-right: 0;\\n\\tcolor: #000;\\n}\\n\\n.batch-checkbox.checkbox-radio-switch--checked {\\n\\tvisibility: visible;\\n}\\n\\n.details-list-item:hover .batch-checkbox {\\n\\tvisibility: visible;\\n}\\n\\n@media (max-width: 540px) {\\n\\t.delete-group-btn {\\n\\t\\tvisibility: visible;\\n\\t}\\n\\n\\t.batch-checkbox {\\n\\t\\tvisibility: visible;\\n\\t\\tmargin-right: 10px;\\n\\t}\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.blackout[data-v-5dcd7180] {\\n\\tposition: fixed;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.3);\\n\\tz-index: 999;\\n}\\n.edit-task-block[data-v-5dcd7180] {\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tbox-shadow: 0 0 4px 0 rgba(0, 0, 0, .05);\\n\\tpadding: 20px;\\n\\twidth: 100%;\\n\\tmax-width: 600px;\\n\\tposition: absolute;\\n\\tbackground-color: #fff;\\n\\ttop: 50%;\\n\\tleft: 50%;\\n\\ttransform: translate(-50%, -50%);\\n}\\n.selection-container[data-v-5dcd7180] {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n}\\n@media (max-width: 767px) {\\n.selection-container[data-v-5dcd7180] {\\n\\t\\tflex-wrap: wrap;\\n}\\n}\\n@media (max-width: 540px) {\\n.edit-task-block[data-v-5dcd7180] {\\n\\t\\twidth: 90vw;\\n\\t\\theight: 80vh;\\n\\t\\toverflow-y: scroll;\\n\\t\\ttop: calc(50% + calc(100% - 96vh));\\n}\\n}\\n.block[data-v-5dcd7180] {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tmax-height: 200px;\\n\\toverflow-y: scroll;\\n\\tpadding: 10px 15px;\\n\\tmargin: 5px 10px;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\n.block[data-v-5dcd7180]:hover {\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .05)\\n}\\n.target-directory[data-v-5dcd7180], .custom-mask[data-v-5dcd7180] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 0;\\n\\tborder-bottom: 1px solid #dadada;\\n}\\n.delete-button[data-v-5dcd7180] {\\n\\tdisplay: inline-flex;\\n\\twidth: 15px;\\n\\theight: 15px;\\n\\tcursor: pointer;\\n\\tmargin: 0 10px;\\n}\\n.close-edit-button[data-v-5dcd7180] {\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 15px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\topacity: 0.5;\\n}\\n.close-edit-button[data-v-5dcd7180]:hover, .close-edit-button[data-v-5dcd7180]:active {\\n\\topacity: 1;\\n}\\nbody.theme--dark .actions-menu-button[data-v-5dcd7180]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .close-edit-button[data-v-5dcd7180]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\nbody.theme--dark .edit-task-block[data-v-5dcd7180], body.theme--dark .block[data-v-5dcd7180] {\\n\\tborder-color: #717171;\\n}\\nbody.theme--dark .edit-task-block[data-v-5dcd7180] {\\n\\tbackground-color: #111;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/components/tasks/TasksEdit.vue\"],\"names\":[],\"mappings\":\";AA4XA;CACA,eAAA;CACA,MAAA;CACA,OAAA;CACA,QAAA;CACA,SAAA;CACA,oCAAA;CACA,YAAA;AACA;AAEA;CACA,yBAAA;CACA,kBAAA;CACA,wCAAA;CACA,aAAA;CACA,WAAA;CACA,gBAAA;CACA,kBAAA;CACA,sBAAA;CACA,QAAA;CACA,SAAA;CACA,gCAAA;AACA;AAEA;CACA,WAAA;CACA,aAAA;AACA;AAEA;AACA;EACA,eAAA;AACA;AACA;AAEA;AACA;EACA,WAAA;EACA,YAAA;EACA,kBAAA;EACA,kCAAA;AACA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,iBAAA;CACA,kBAAA;CACA,kBAAA;CACA,gBAAA;CACA,yBAAA;CACA,kBAAA;AACA;AAEA;CACA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,cAAA;CACA,gCAAA;AACA;AAEA;CACA,oBAAA;CACA,WAAA;CACA,YAAA;CACA,eAAA;CACA,cAAA;AACA;AAEA;CACA,kBAAA;CACA,SAAA;CACA,WAAA;CACA,aAAA;CACA,kBAAA;CACA,eAAA;CACA,YAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,sBAAA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div v-show=\\\"opened\\\" class=\\\"blackout\\\">\\n\\t\\t<div class=\\\"edit-task-block\\\">\\n\\t\\t\\t<span class=\\\"icon-close close-edit-button\\\" @click=\\\"closeEditTaskDialog\\\" />\\n\\t\\t\\t<h2>{{ t('mediadc', 'Edit task') }}</h2>\\n\\t\\t\\t<div class=\\\"selection-container\\\">\\n\\t\\t\\t\\t<div class=\\\"block target-directories-block\\\">\\n\\t\\t\\t\\t\\t<h3>{{ t('mediadc', 'Target directories') }}</h3>\\n\\t\\t\\t\\t\\t<div v-if=\\\"targetDirectoriesIds.length > 0\\\">\\n\\t\\t\\t\\t\\t\\t<div v-for=\\\"fileid in targetDirectoriesIds\\\" :key=\\\"fileid\\\" class=\\\"selected-target-directories-list\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"target-directory\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span style=\\\"overflow-y: scroll; white-space: nowrap;\\\">{{ targetDirectoriesPaths[fileid] }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"delete-button icon-delete\\\" @click=\\\"removeTargetDirectory(fileid)\\\" />\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Not selected') }}</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t\\t<button @click=\\\"openDirectoriesExplorer\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"icon-add\\\" />\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Select') }}\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"block\\\">\\n\\t\\t\\t\\t\\t<h3>{{ t('mediadc', 'Exclude directories') }}</h3>\\n\\t\\t\\t\\t\\t<div v-if=\\\"excludeDirectoriesPaths.length > 0\\\">\\n\\t\\t\\t\\t\\t\\t<div v-for=\\\"fileid in Object.keys(excludeFileIds)\\\" :key=\\\"fileid\\\" class=\\\"selected-excluded-directories-list\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"target-directory\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span style=\\\"overflow-y: scroll;\\\">{{ excludeFileIds[fileid] }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"delete-button icon-delete\\\" @click=\\\"removeExcludeDirectory(fileid)\\\" />\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Not selected') }}</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t\\t<button @click=\\\"openExcludeExplorer\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"icon-add\\\" />\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Select') }}\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"selection-container\\\">\\n\\t\\t\\t\\t<div class=\\\"block\\\">\\n\\t\\t\\t\\t\\t<h3>{{ t('mediadc', 'Custom exclude mask') }}</h3>\\n\\t\\t\\t\\t\\t<div v-if=\\\"customExcludeList.length > 0\\\" class=\\\"custom-masks-list\\\">\\n\\t\\t\\t\\t\\t\\t<div v-for=\\\"(mask, index) in customExcludeList\\\" :key=\\\"index\\\" class=\\\"custom-mask\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span>{{ mask }}</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"icon-delete\\\" style=\\\"cursor: pointer;\\\" @click=\\\"deleteCustomMask(mask)\\\" />\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Not added') }}</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-if=\\\"addingCustomMask\\\" style=\\\"display: flex; align-items: center;\\\">\\n\\t\\t\\t\\t\\t\\t<input id=\\\"custom-exclude-mask\\\"\\n\\t\\t\\t\\t\\t\\t\\tref=\\\"customExcludeMask\\\"\\n\\t\\t\\t\\t\\t\\t\\tv-model=\\\"customExcludeMask\\\"\\n\\t\\t\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t\\t\\t@keyup.enter=\\\"addCustomMask\\\"\\n\\t\\t\\t\\t\\t\\t\\t@keyup.esc=\\\"cancelAddingCustomMask\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"icon-checkmark\\\" style=\\\"width: 18px; height: 18px; margin: 0 5px; display: inline-block; cursor: pointer;\\\" @click=\\\"addCustomMask\\\" />\\n\\t\\t\\t\\t\\t\\t<span class=\\\"icon-close\\\" style=\\\"width: 18px; height: 18px; margin: 0 5px; display: inline-block; cursor: pointer;\\\" @click=\\\"cancelAddingCustomMask\\\" />\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div style=\\\"display: flex; align-items: center; margin: 20px 0;\\\">\\n\\t\\t\\t\\t\\t\\t<button @click=\\\"addNewMask\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"icon-add\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Add mask') }}</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"block\\\">\\n\\t\\t\\t\\t\\t<h3 style=\\\"margin: 5px 0;\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Target Mime Type') }}\\n\\t\\t\\t\\t\\t</h3>\\n\\t\\t\\t\\t\\t<select id=\\\"target_mtype\\\"\\n\\t\\t\\t\\t\\t\\tv-model=\\\"targetMimeType\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"target_mtype\\\">\\n\\t\\t\\t\\t\\t\\t<option :value=\\\"0\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Photos') }}\\n\\t\\t\\t\\t\\t\\t</option>\\n\\t\\t\\t\\t\\t\\t<option :value=\\\"1\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Videos') }}\\n\\t\\t\\t\\t\\t\\t</option>\\n\\t\\t\\t\\t\\t\\t<option :value=\\\"2\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Photos and Videos') }}\\n\\t\\t\\t\\t\\t\\t</option>\\n\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t<h3 style=\\\"margin: 5px 0;\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Similarity threshold') }}\\n\\t\\t\\t\\t\\t</h3>\\n\\t\\t\\t\\t\\t<input v-model=\\\"similarity_threshold\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"number\\\"\\n\\t\\t\\t\\t\\t\\tmin=\\\"50\\\"\\n\\t\\t\\t\\t\\t\\tmax=\\\"100\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"margin: 0 0 10px;\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<button v-if=\\\"!runningTask\\\"\\n\\t\\t\\t\\tstyle=\\\"margin: 10px 5px 0\\\"\\n\\t\\t\\t\\t:disabled=\\\"Object.keys(targetDirectoriesPaths).length === 0\\\"\\n\\t\\t\\t\\t@click=\\\"restartTask\\\">\\n\\t\\t\\t\\t{{ t('mediadc', 'Restart task') }}\\n\\t\\t\\t</button>\\n\\t\\t\\t<button v-else disabled>\\n\\t\\t\\t\\t<span class=\\\"icon-loading\\\" />\\n\\t\\t\\t</button>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport { generateUrl } from '@nextcloud/router'\\nimport { getFilePickerBuilder, showWarning, showSuccess } from '@nextcloud/dialogs'\\nimport axios from '@nextcloud/axios'\\nimport { requestFileInfo, getFileId } from '../../utils/files'\\nimport { mapGetters } from 'vuex'\\nimport { getCurrentUser } from '@nextcloud/auth'\\nimport { emit } from '@nextcloud/event-bus'\\n\\nexport default {\\n\\tname: 'TasksEdit',\\n\\tprops: {\\n\\t\\topened: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\ttargetDirectoriesPaths: {},\\n\\t\\t\\ttargetDirectoriesIds: [],\\n\\t\\t\\texcludeDirectoriesPaths: [],\\n\\t\\t\\texcludeFileIds: {},\\n\\t\\t\\ttargetMimeType: 0,\\n\\t\\t\\tsimilarity_threshold: 90,\\n\\t\\t\\tcustomExcludeList: [],\\n\\t\\t\\tcustomExcludeMask: '',\\n\\t\\t\\taddingCustomMask: false,\\n\\t\\t\\trunningTask: false,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'settings',\\n\\t\\t\\t'settingByName',\\n\\t\\t\\t'tasks',\\n\\t\\t\\t'task',\\n\\t\\t\\t'taskInfo',\\n\\t\\t]),\\n\\t},\\n\\tbeforeMount() {\\n\\t\\tthis.similarity_threshold = this.settingByName('similarity_threshold') !== undefined\\n\\t\\t\\t? this.settingByName('similarity_threshold').value\\n\\t\\t\\t: 90\\n\\t\\tthis.targetMimeType = JSON.parse(this.task.collector_settings).target_mtype\\n\\t\\tthis.similarity_threshold = JSON.parse(this.task.collector_settings).similarity_threshold\\n\\t\\tthis.parseTaskSettings()\\n\\t},\\n\\tmethods: {\\n\\t\\tparseTaskSettings() {\\n\\t\\t\\tif (this.taskInfo !== null && 'target_directories' in this.taskInfo) {\\n\\t\\t\\t\\tthis.taskInfo.target_directories.forEach(dir => {\\n\\t\\t\\t\\t\\tthis.targetDirectoriesIds.push(dir.fileid.toString())\\n\\t\\t\\t\\t\\tthis.targetDirectoriesPaths[dir.fileid.toString()] = dir.filepath.replace(`/${getCurrentUser().uid}/files`, '') !== '' ? dir.filepath.replace(`/${getCurrentUser().uid}/files`, '') : '/'\\n\\t\\t\\t\\t})\\n\\t\\t\\t}\\n\\t\\t\\tif (this.taskInfo !== null && 'exclude_directories' in this.taskInfo) {\\n\\t\\t\\t\\tthis.taskInfo.exclude_directories.forEach(dir => {\\n\\t\\t\\t\\t\\tthis.excludeDirectoriesPaths.push(dir.filepath.replace())\\n\\t\\t\\t\\t\\tthis.excludeFileIds[dir.fileid.toString()] = dir.filepath.replace(`/${getCurrentUser().uid}/files`, '')\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tthis.customExcludeList = JSON.parse(this.task.exclude_list).user.mask\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tgetDirectoriesPicker(title) {\\n\\t\\t\\treturn getFilePickerBuilder(title)\\n\\t\\t\\t\\t.setMultiSelect(false)\\n\\t\\t\\t\\t.addMimeTypeFilter('httpd/unix-directory')\\n\\t\\t\\t\\t.setModal(true)\\n\\t\\t\\t\\t.setType(1)\\n\\t\\t\\t\\t.allowDirectories(true)\\n\\t\\t\\t\\t.build()\\n\\t\\t},\\n\\t\\tgetFilesPicker(title) {\\n\\t\\t\\treturn getFilePickerBuilder(title)\\n\\t\\t\\t\\t.setMultiSelect(false)\\n\\t\\t\\t\\t.setModal(true)\\n\\t\\t\\t\\t.setType(1)\\n\\t\\t\\t\\t.allowDirectories(true)\\n\\t\\t\\t\\t.build()\\n\\t\\t},\\n\\t\\topenDirectoriesExplorer() {\\n\\t\\t\\tthis.getDirectoriesPicker(this.t('mediadc', 'Choose target directory')).pick().then(dir => {\\n\\t\\t\\t\\tif (dir.startsWith('/')) {\\n\\t\\t\\t\\t\\trequestFileInfo(dir).then(res => {\\n\\t\\t\\t\\t\\t\\tconst fileid = getFileId(res.data)\\n\\t\\t\\t\\t\\t\\tif (fileid !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tif (!(fileid in this.targetDirectoriesPaths)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.targetDirectoriesIds.push(fileid)\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.targetDirectoriesPaths[fileid.toString()] = dir\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'This directory already selected'))\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\trequestFileInfo('/').then(res => {\\n\\t\\t\\t\\t\\t\\tconst fileid = getFileId(res.data)\\n\\t\\t\\t\\t\\t\\tif (fileid !== -1) {\\n\\t\\t\\t\\t\\t\\t\\tif (!(fileid in this.targetDirectoriesPaths)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.targetDirectoriesIds.push(fileid)\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.targetDirectoriesPaths[fileid.toString()] = '/'\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'This directory already selected'))\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\tthis.targetDirectoriesPaths.push('/')\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\topenExcludeExplorer() {\\n\\t\\t\\tthis.getDirectoriesPicker(this.t('mediadc', 'Choose directory to exclude')).pick().then(dir => {\\n\\t\\t\\t\\tif (Object.values(this.excludeFileIds).findIndex(targetDir => targetDir === dir) === -1) {\\n\\t\\t\\t\\t\\tif (dir.startsWith('/')) {\\n\\t\\t\\t\\t\\t\\trequestFileInfo(dir).then(res => {\\n\\t\\t\\t\\t\\t\\t\\tconst fileid = getFileId(res.data)\\n\\t\\t\\t\\t\\t\\t\\tif (fileid !== -1) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.excludeDirectoriesPaths.push(dir)\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.excludeFileIds[fileid.toString()] = dir\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\trequestFileInfo('/').then(res => {\\n\\t\\t\\t\\t\\t\\t\\tconst fileid = getFileId(res.data)\\n\\t\\t\\t\\t\\t\\t\\tif (fileid !== -1) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.excludeDirectoriesPaths.push(dir)\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.excludeFileIds[fileid.toString()] = '/'\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'This directory already excluded'))\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\trestartTask() {\\n\\t\\t\\tthis.runningTask = true\\n\\t\\t\\tthis.getSettings().then(res => {\\n\\t\\t\\t\\tthis.$store.dispatch('setSettings', res.data)\\n\\t\\t\\t\\taxios.post(generateUrl('/apps/mediadc/api/v1/tasks/restart'), {\\n\\t\\t\\t\\t\\ttaskId: this.task.id,\\n\\t\\t\\t\\t\\ttargetDirectoryIds: JSON.stringify(this.targetDirectoriesIds),\\n\\t\\t\\t\\t\\texcludeList: {\\n\\t\\t\\t\\t\\t\\tuser: {\\n\\t\\t\\t\\t\\t\\t\\tmask: this.customExcludeList,\\n\\t\\t\\t\\t\\t\\t\\tfileid: Object.keys(this.excludeFileIds).map(item => Number(item)),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tadmin: JSON.parse(this.settingByName('exclude_list').value) || { mask: [], fileid: [] },\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tcollectorSettings: {\\n\\t\\t\\t\\t\\t\\thashing_algorithm: JSON.parse(this.settingByName('hashing_algorithm').value) || 'dhash',\\n\\t\\t\\t\\t\\t\\tsimilarity_threshold: Number(this.similarity_threshold),\\n\\t\\t\\t\\t\\t\\thash_size: Number(this.settingByName('hash_size').value) || 16,\\n\\t\\t\\t\\t\\t\\ttarget_mtype: this.targetMimeType,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}).then(res => {\\n\\t\\t\\t\\t\\tthis.runningTask = false\\n\\t\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\t\\tthis.runningTask = false\\n\\t\\t\\t\\t\\t\\tthis.closeEditTaskDialog()\\n\\t\\t\\t\\t\\t\\temit('restartTask')\\n\\t\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Task successfully restarted!'))\\n\\t\\t\\t\\t\\t} else if (res.data.limit) {\\n\\t\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Running tasks limit exceed. Try again later.'))\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tshowWarning(t('medaidc', 'Some error occured while running Collector Task. Try again.'))\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t})\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tremoveTargetDirectory(fileid) {\\n\\t\\t\\tdelete this.targetDirectoriesPaths[fileid]\\n\\t\\t\\tconst fileidIndex = this.targetDirectoriesIds.findIndex(id => id === fileid)\\n\\t\\t\\tthis.targetDirectoriesIds.splice(fileidIndex, 1)\\n\\t\\t},\\n\\t\\tremoveExcludeDirectory(fileid) {\\n\\t\\t\\tif (fileid in this.excludeFileIds) {\\n\\t\\t\\t\\tconst dirIndex = this.excludeDirectoriesPaths.findIndex(dir => dir === this.excludeFileIds[fileid])\\n\\t\\t\\t\\tthis.excludeDirectoriesPaths.splice(dirIndex, 1)\\n\\t\\t\\t\\tdelete this.excludeFileIds[fileid]\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tremoveExcludeFileid(fileid) {\\n\\t\\t\\tdelete this.excludeFileIds[fileid]\\n\\t\\t},\\n\\t\\taddNewMask() {\\n\\t\\t\\tthis.addingCustomMask = true\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tthis.$refs.customExcludeMask.focus()\\n\\t\\t\\t}, 100)\\n\\t\\t},\\n\\t\\taddCustomMask() {\\n\\t\\t\\tif (this.customExcludeMask.length > 0) {\\n\\t\\t\\t\\tif (this.customExcludeList.findIndex(mask => mask === this.customExcludeMask) === -1) {\\n\\t\\t\\t\\t\\tthis.customExcludeList.push(this.customExcludeMask)\\n\\t\\t\\t\\t\\tthis.customExcludeMask = ''\\n\\t\\t\\t\\t\\tthis.addingCustomMask = false\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'This mask already exists!'))\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Enter custom mask!'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcancelAddingCustomMask() {\\n\\t\\t\\tthis.customExcludeMask = ''\\n\\t\\t\\tthis.addingCustomMask = false\\n\\t\\t},\\n\\t\\tdeleteCustomMask(mask) {\\n\\t\\t\\tconst maskIndex = this.customExcludeList.findIndex(m => m === mask)\\n\\t\\t\\tthis.customExcludeList.splice(maskIndex, 1)\\n\\t\\t},\\n\\t\\tasync getTasks() {\\n\\t\\t\\taxios.get(generateUrl('/apps/mediadc/api/v1/tasks')).then(res => {\\n\\t\\t\\t\\tthis.$store.dispatch('setTasks', res.data)\\n\\t\\t\\t\\tthis.$emit('update:loading', false)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tresetForm() {\\n\\t\\t\\tthis.targetDirectoriesPaths = {}\\n\\t\\t\\tthis.targetDirectoriesIds = []\\n\\t\\t\\tthis.excludeDirectoriesNames = []\\n\\t\\t\\tthis.excludeFileIds = {}\\n\\t\\t\\tthis.targetMimeType = 0\\n\\t\\t\\tthis.similarity_threshold = this.settingByName('similarity_threshold') !== undefined\\n\\t\\t\\t\\t? this.settingByName('similarity_threshold').value\\n\\t\\t\\t\\t: 90\\n\\t\\t\\tthis.customExcludeList = []\\n\\t\\t\\tthis.runningTask = false\\n\\t\\t},\\n\\t\\tcloseEditTaskDialog() {\\n\\t\\t\\tthis.$emit('update:opened', false)\\n\\t\\t},\\n\\t\\tasync getSettings() {\\n\\t\\t\\treturn axios.get(generateUrl('/apps/mediadc/api/v1/settings'))\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.blackout {\\n\\tposition: fixed;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n\\tbackground-color: rgba(0, 0, 0, 0.3);\\n\\tz-index: 999;\\n}\\n\\n.edit-task-block {\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tbox-shadow: 0 0 4px 0 rgba(0, 0, 0, .05);\\n\\tpadding: 20px;\\n\\twidth: 100%;\\n\\tmax-width: 600px;\\n\\tposition: absolute;\\n\\tbackground-color: #fff;\\n\\ttop: 50%;\\n\\tleft: 50%;\\n\\ttransform: translate(-50%, -50%);\\n}\\n\\n.selection-container {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n}\\n\\n@media (max-width: 767px) {\\n\\t.selection-container {\\n\\t\\tflex-wrap: wrap;\\n\\t}\\n}\\n\\n@media (max-width: 540px) {\\n\\t.edit-task-block {\\n\\t\\twidth: 90vw;\\n\\t\\theight: 80vh;\\n\\t\\toverflow-y: scroll;\\n\\t\\ttop: calc(50% + calc(100% - 96vh));\\n\\t}\\n}\\n\\n.block {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tmax-height: 200px;\\n\\toverflow-y: scroll;\\n\\tpadding: 10px 15px;\\n\\tmargin: 5px 10px;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n}\\n\\n.block:hover {\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .05)\\n}\\n\\n.target-directory, .custom-mask {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: space-between;\\n\\tpadding: 5px 0;\\n\\tborder-bottom: 1px solid #dadada;\\n}\\n\\n.delete-button {\\n\\tdisplay: inline-flex;\\n\\twidth: 15px;\\n\\theight: 15px;\\n\\tcursor: pointer;\\n\\tmargin: 0 10px;\\n}\\n\\n.close-edit-button {\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 15px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\topacity: 0.5;\\n}\\n\\n.close-edit-button:hover, .close-edit-button:active {\\n\\topacity: 1;\\n}\\n\\nbody.theme--dark .actions-menu-button:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .close-edit-button:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\nbody.theme--dark .edit-task-block, body.theme--dark .block {\\n\\tborder-color: #717171;\\n}\\n\\nbody.theme--dark .edit-task-block {\\n\\tbackground-color: #111;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.container[data-v-101b5a4b] {\\n\\tpadding: 0 20px;\\n\\twidth: 100%;\\n\\tmax-width: 1440px;\\n\\tmargin: 0 auto;\\n\\tmax-height: 100%;\\n}\\n@media (min-width: 1920px) {\\n.container[data-v-101b5a4b] {\\n\\t\\tmax-width: 80vw;\\n}\\n}\\nh2[data-v-101b5a4b] {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\twidth: 100%;\\n\\tmargin: 20px auto 10px;\\n\\ttext-align: center;\\n}\\n.collapse-task-status-btn[data-v-101b5a4b] {\\n\\tdisplay: inline-flex;\\n\\tcursor: pointer;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tmargin: 0 10px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n.task-details-heading p[data-v-101b5a4b] {\\n\\ttext-align: center;\\n}\\n.details-row[data-v-101b5a4b] {\\n\\tdisplay: flex;\\n\\tmargin: 0 10px 20px;\\n\\tposition: relative;\\n}\\n@media (max-width: 767px) {\\n.details-row[data-v-101b5a4b] {\\n\\t\\tflex-wrap: wrap;\\n}\\n.task-details-heading[data-v-101b5a4b] {\\n\\t\\tflex-direction: column;\\n}\\n}\\n.task-status-row[data-v-101b5a4b] {\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tflex-wrap: wrap;\\n}\\n.task-status[data-v-101b5a4b] {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tmargin: 20px;\\n\\tpadding: 10px;\\n}\\n.actions-menu-button[data-v-101b5a4b] {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n.actions-menu-button[data-v-101b5a4b]:hover, .collapse-task-status-btn[data-v-101b5a4b]:hover {\\n\\tbackground-color: #eee;\\n}\\n.actions-menu-button[data-v-101b5a4b]:active, .collapse-task-status-btn[data-v-101b5a4b]:active {\\n\\tbackground-color: #ddd;\\n}\\nbody.theme--dark .actions-menu-button[data-v-101b5a4b]:hover, body.theme--dark .collapse-task-status-btn[data-v-101b5a4b]:hover {\\n\\tbackground-color: #727272;\\n}\\nbody.theme--dark .actions-menu-button[data-v-101b5a4b]:active, body.theme--dark .collapse-task-status-btn[data-v-101b5a4b]:active {\\n\\tbackground-color: #5b5b5b;\\n}\\nbody.theme--dark .task-status[data-v-101b5a4b], body.theme--dark .task-info[data-v-101b5a4b] {\\n\\tborder-color: #717171;\\n}\\n.task-info[data-v-101b5a4b] {\\n\\tmargin: 20px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tpadding: 10px 20px;\\n\\theight: 100%;\\n\\tmin-height: 94px;\\n\\tmax-height: 94px;\\n\\tmax-width: 50%;\\n\\toverflow-y: scroll;\\n}\\n.owner-tooltip[data-v-101b5a4b] {\\n\\tposition: relative;\\n}\\n.tooltip-title[data-v-101b5a4b] {\\n\\tdisplay: none;\\n\\tpadding: 0 5px;\\n\\tborder-radius: 5px;\\n\\tbackground-color: #000;\\n\\tcolor: #fff;\\n\\tposition: absolute;\\n\\ttop: calc(-100% - 5px);\\n\\tleft: 50%;\\n\\ttransform: translateX(-50%);\\n\\tfont-size: 12px;\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\\n}\\n.tooltip-title[data-v-101b5a4b]:before {\\n\\tcontent: '';\\n\\tposition: absolute;\\n\\tleft: 50%;\\n\\ttransform: translateX(-50%) rotateZ(45deg);\\n\\tbottom: -3px;\\n\\twidth: 10px;\\n\\theight: 10px;\\n\\tbackground-color: #000;\\n\\tz-index: -1;\\n}\\n.owner-tooltip:hover .tooltip-title[data-v-101b5a4b] {\\n\\tdisplay: block;\\n}\\n@media (max-width: 767px) {\\n.details-row[data-v-101b5a4b] {\\n\\t\\tmargin: 0 0 20px;\\n}\\n.task-status[data-v-101b5a4b] {\\n\\t\\tflex-direction: column;\\n\\t\\tmargin: 0 0 20px;\\n\\t\\twidth: 100%;\\n}\\n.task-info[data-v-101b5a4b] {\\n\\t\\tmax-width: 100%;\\n\\t\\tmargin: 0;\\n}\\n}\\n.task-info h3[data-v-101b5a4b] {\\n\\tmargin: 0 0 5px 0;\\n}\\n.target-directory-row[data-v-101b5a4b] {\\n\\twhite-space: nowrap;\\n}\\n.badge[data-v-101b5a4b] {\\n\\tdisplay: inline-flex;\\n\\tpadding: 0 10px;\\n\\tbackground-color: #eee;\\n\\tborder-radius: 20px;\\n\\tmargin-right: 20px;\\n}\\n@media (max-width: 540px) {\\n.task-status-row[data-v-101b5a4b] {\\n\\t\\tflex-direction: column;\\n\\t\\tmargin: 20px 0;\\n}\\n.badge[data-v-101b5a4b] {\\n\\t\\tmargin-right: 0;\\n\\t\\tmargin-top: 10px;\\n\\t\\tmargin-bottom: 10px;\\n}\\n}\\n.badge.finished[data-v-101b5a4b] {\\n\\tbackground-color: #49b382;\\n\\tcolor: #fff;\\n}\\n.badge.running[data-v-101b5a4b], .badge.pending[data-v-101b5a4b] {\\n\\tbackground-color: #dadada;\\n\\tcolor: #000;\\n}\\n.badge.error[data-v-101b5a4b] {\\n\\tbackground-color: #bd3f3f;\\n\\tcolor: #fff;\\n}\\n.badge.terminated[data-v-101b5a4b] {\\n\\tbackground-color: #f17b1b;\\n\\tcolor: #fff;\\n}\\n.errors[data-v-101b5a4b] {\\n\\tmargin: 20px;\\n\\tborder: 1px solid #bd3f3f;\\n\\tborder-radius: 5px;\\n\\tpadding: 10px;\\n\\tmax-height: 100vh;\\n\\toverflow-y: scroll;\\n}\\n.error-row[data-v-101b5a4b] {\\n\\tborder-bottom: 1px solid #bd3f3f;\\n\\tpadding: 5px 0;\\n\\tmax-height: 100%;\\n\\toverflow-y: scroll;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/views/CollectorDetails.vue\"],\"names\":[],\"mappings\":\";AAiVA;CACA,eAAA;CACA,WAAA;CACA,iBAAA;CACA,cAAA;CACA,gBAAA;AACA;AAEA;AACA;EACA,eAAA;AACA;AACA;AAEA;CACA,oBAAA;CACA,mBAAA;CACA,uBAAA;CACA,WAAA;CACA,sBAAA;CACA,kBAAA;AACA;AAEA;CACA,oBAAA;CACA,eAAA;CACA,WAAA;CACA,YAAA;CACA,cAAA;CACA,aAAA;CACA,kBAAA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,kBAAA;AACA;AAEA;AACA;EACA,eAAA;AACA;AACA;EACA,sBAAA;AACA;AACA;AAEA;CACA,aAAA;CACA,uBAAA;CACA,mBAAA;CACA,eAAA;AACA;AAEA;CACA,oBAAA;CACA,mBAAA;CACA,yBAAA;CACA,kBAAA;CACA,YAAA;CACA,aAAA;AACA;AAEA;CACA,aAAA;CACA,kBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,yBAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,cAAA;CACA,yBAAA;CACA,kBAAA;CACA,kBAAA;CACA,YAAA;CACA,gBAAA;CACA,gBAAA;CACA,cAAA;CACA,kBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,aAAA;CACA,cAAA;CACA,kBAAA;CACA,sBAAA;CACA,WAAA;CACA,kBAAA;CACA,sBAAA;CACA,SAAA;CACA,2BAAA;CACA,eAAA;CACA,yCAAA;AACA;AAEA;CACA,WAAA;CACA,kBAAA;CACA,SAAA;CACA,0CAAA;CACA,YAAA;CACA,WAAA;CACA,YAAA;CACA,sBAAA;CACA,WAAA;AACA;AAEA;CACA,cAAA;AACA;AAEA;AACA;EACA,gBAAA;AACA;AAEA;EACA,sBAAA;EACA,gBAAA;EACA,WAAA;AACA;AAEA;EACA,eAAA;EACA,SAAA;AACA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,oBAAA;CACA,eAAA;CACA,sBAAA;CACA,mBAAA;CACA,kBAAA;AACA;AAEA;AACA;EACA,sBAAA;EACA,cAAA;AACA;AAEA;EACA,eAAA;EACA,gBAAA;EACA,mBAAA;AACA;AACA;AAEA;CACA,yBAAA;CACA,WAAA;AACA;AAEA;CACA,yBAAA;CACA,WAAA;AACA;AAEA;CACA,yBAAA;CACA,WAAA;AACA;AAEA;CACA,yBAAA;CACA,WAAA;AACA;AAEA;CACA,YAAA;CACA,yBAAA;CACA,kBAAA;CACA,aAAA;CACA,iBAAA;CACA,kBAAA;AACA;AAEA;CACA,gCAAA;CACA,cAAA;CACA,gBAAA;CACA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\\n -\\n - @author Andrey Borysenko <andrey18106x@gmail.com>\\n -\\n - @license AGPL-3.0-or-later\\n -\\n - This program is free software: you can redistribute it and/or modify\\n - it under the terms of the GNU Affero General Public License as\\n - published by the Free Software Foundation, either version 3 of the\\n - License, or (at your option) any later version.\\n -\\n - This program is distributed in the hope that it will be useful,\\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n - GNU Affero General Public License for more details.\\n -\\n - You should have received a copy of the GNU Affero General Public License\\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n -\\n -->\\n\\n<template>\\n\\t<div v-if=\\\"!loading\\\" class=\\\"container\\\">\\n\\t\\t<TasksEdit v-if=\\\"editingTask\\\" :opened.sync=\\\"editingTask\\\" />\\n\\t\\t<div class=\\\"task-details\\\">\\n\\t\\t\\t<div class=\\\"task-details-heading\\\">\\n\\t\\t\\t\\t<h2>\\n\\t\\t\\t\\t\\t{{ rootTitle }}\\n\\t\\t\\t\\t\\t<span :class=\\\"!collapsedStatus\\n\\t\\t\\t\\t\\t\\t\\t? 'icon-triangle-n collapse-task-status-btn'\\n\\t\\t\\t\\t\\t\\t\\t: 'icon-triangle-s collapse-task-status-btn'\\\"\\n\\t\\t\\t\\t\\t\\t:title=\\\"t('mediadc', 'Collapse task status')\\\"\\n\\t\\t\\t\\t\\t\\t@click=\\\"collapseTaskStatus\\\" />\\n\\t\\t\\t\\t</h2>\\n\\t\\t\\t\\t<div v-show=\\\"!collapsedStatus\\\" class=\\\"task-details-description\\\">\\n\\t\\t\\t\\t\\t<p>\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Here you can view task details, manage task (stop or restart), ' +\\n\\t\\t\\t\\t\\t\\t\\t'delete found duplicated photos and videos.') }}\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t<p>\\n\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'Deleted files are placed in the trashbin, so that they can be restored in case of need.') }}\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-show=\\\"!collapsedStatus\\\" class=\\\"task-status-row\\\">\\n\\t\\t\\t\\t<div class=\\\"task-status\\\">\\n\\t\\t\\t\\t\\t<span :class=\\\"'badge ' + getStatusBadge(task)\\\">{{ getStatusBadge(task) }}</span>\\n\\t\\t\\t\\t\\t<div style=\\\"display: flex; flex-direction: column;\\\">\\n\\t\\t\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t\\t\\t<b>{{ parseTargetMtype(task) }}</b> {{ task.files_scanned !== task.files_total ? `${task.files_scanned}/` : '' }}{{ task.files_total }} {{ translatePlural('mediadc', 'file', 'files', task.files_total) }}\\n\\t\\t\\t\\t\\t\\t\\t({{ formatBytes(Number(task.files_total_size)) }})\\n\\t\\t\\t\\t\\t\\t\\t({{ task !== null && 'collector_settings' in task ? t('mediadc', 'precision: ') + JSON.parse(task.collector_settings).similarity_threshold + '%' : '' }})\\n\\t\\t\\t\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t\\t\\t\\t<b>{{ t('mediadc', 'Deleted: ') }} </b>\\n\\t\\t\\t\\t\\t\\t\\t{{ task.deleted_files_count }} {{ translatePlural('mediadc', 'file', 'files', task.deleted_files_count) }}\\n\\t\\t\\t\\t\\t\\t\\t({{ formatBytes(Number(task.deleted_files_size)) }})\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t\\t\\t{{ parseUnixTimestamp(task.created_time) }}\\n\\t\\t\\t\\t\\t\\t\\t{{ Number(task.finished_time) > 0 ? ' - ' + parseUnixTimestamp(task.finished_time) : '' }}\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\\\"app-content-list-menu\\\" style=\\\"margin: 0 0 0 10px; position: relative;\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"icon-more actions-menu-button\\\" @click=\\\"openActionsPopup\\\" />\\n\\t\\t\\t\\t\\t\\t<div :class=\\\"actionsOpened ? 'popovermenu open' : 'popovermenu'\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"right: -1px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ul>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-history\\\" @click=\\\"restartTask(task)\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Restart') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-rename\\\" @click=\\\"openEditTaskDialog(task)\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Edit') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-pause\\\" @click=\\\"terminateTask(task)\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Stop') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon-delete\\\" @click=\\\"deleteTask(task)\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{ t('mediadc', 'Delete') }}</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"task-info\\\">\\n\\t\\t\\t\\t\\t<h3>{{ t('mediadc', 'Target directories') }}</h3>\\n\\t\\t\\t\\t\\t<div class=\\\"target-directories-list\\\">\\n\\t\\t\\t\\t\\t\\t<div v-for=\\\"dir in taskInfo.target_directories\\\" :key=\\\"dir.fileid\\\" class=\\\"target-directory-row\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"owner-tooltip\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tooltip-title\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{ t('mediadc', 'onwer:') }} {{ dir.fileowner }}\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tooltip-content\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a :href=\\\"filesDirLink(dir)\\\" target=\\\"_blank\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${currentUser}/files`, '') !== ''\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t? dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${currentUser}/files`, '')\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t: '/'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</b>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t({{ formatBytes(dir.filesize) }})\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"isValidUser\\\" class=\\\"details-row\\\">\\n\\t\\t\\t\\t<DetailsList v-if=\\\"getStatusBadge(task) === 'finished'\\\"\\n\\t\\t\\t\\t\\t:filessize=\\\"filessize\\\"\\n\\t\\t\\t\\t\\t:filestotal=\\\"filestotal\\\" />\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<p style=\\\"text-align: center;\\\">\\n\\t\\t\\t\\t\\t<b>{{ t('mediadc', 'You are not allowed to manage other user\\\\'s tasks.') }}</b>\\n\\t\\t\\t\\t</p>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"task.errors !== undefined && task.errors.length > 0\\\" class=\\\"errors\\\">\\n\\t\\t\\t\\t<h3>{{ t('mediadc', 'Task errors') }}</h3>\\n\\t\\t\\t\\t<div v-for=\\\"error in task.errors.split('\\\\\\\\n')\\\" :key=\\\"error\\\" class=\\\"error-row\\\">\\n\\t\\t\\t\\t\\t{{ error }}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport axios from '@nextcloud/axios'\\nimport { mapGetters } from 'vuex'\\nimport Formats from '../mixins/Formats'\\nimport { generateUrl } from '@nextcloud/router'\\nimport DetailsList from '../components/details/DetailsList'\\nimport { showSuccess, showError, showWarning } from '@nextcloud/dialogs'\\nimport Configure from '../mixins/Configure'\\nimport { getCurrentUser } from '@nextcloud/auth'\\nimport { subscribe, unsubscribe } from '@nextcloud/event-bus'\\nimport TasksEdit from '../components/tasks/TasksEdit'\\n\\nexport default {\\n\\tname: 'CollectorDetails',\\n\\tcomponents: {\\n\\t\\tDetailsList,\\n\\t\\tTasksEdit,\\n\\t},\\n\\tmixins: [\\n\\t\\tFormats,\\n\\t\\tConfigure,\\n\\t],\\n\\tprops: {\\n\\t\\trootTitle: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tloading: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tupdater: null,\\n\\t\\t\\tstatsUpdater: null,\\n\\t\\t\\tfilessize: 0,\\n\\t\\t\\tfilestotal: 0,\\n\\t\\t\\tactionsOpened: false,\\n\\t\\t\\tcollapsedStatus: false,\\n\\t\\t\\teditingTask: false,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapGetters([\\n\\t\\t\\t'task',\\n\\t\\t\\t'taskInfo',\\n\\t\\t\\t'details',\\n\\t\\t\\t'settingByName',\\n\\t\\t]),\\n\\t\\tisValidUser() {\\n\\t\\t\\treturn getCurrentUser().uid === this.task.owner\\n\\t\\t},\\n\\t\\tcurrentUser() {\\n\\t\\t\\treturn getCurrentUser().uid\\n\\t\\t},\\n\\t},\\n\\tbeforeMount() {\\n\\t\\tthis.$emit('update:loading', true)\\n\\t\\tthis.getTaskDetails()\\n\\t\\tthis.getTaskInfo()\\n\\t\\tsubscribe('restartTask', this.onRestartTaskEvent)\\n\\t\\tsubscribe('updateTaskInfo', this.getDetailFilesTotalSize)\\n\\t\\tthis.updater = setInterval(this.getTaskDetails, 5000)\\n\\t},\\n\\tbeforeDestroy() {\\n\\t\\tclearInterval(this.updater)\\n\\t\\tunsubscribe('updateTaskInfo', this.getTaskInfo)\\n\\t\\tunsubscribe('restartTask', this.onRestartTaskEvent)\\n\\t},\\n\\tmethods: {\\n\\t\\tterminateTask(task) {\\n\\t\\t\\tthis.toggleActionsPopup()\\n\\t\\t\\tif (this.isValidUser) {\\n\\t\\t\\t\\tthis.terminating = true\\n\\t\\t\\t\\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${task.id}/terminate`)).then(res => {\\n\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Task terminated'))\\n\\t\\t\\t\\t\\tthis.terminating = false\\n\\t\\t\\t\\t\\tthis.getTaskDetails()\\n\\t\\t\\t\\t})\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'You are not allowed to terminate this task'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\trestartTask(task) {\\n\\t\\t\\tthis.toggleActionsPopup()\\n\\t\\t\\tif (this.isValidUser) {\\n\\t\\t\\t\\tthis.restarting = true\\n\\t\\t\\t\\tthis.getSettings().then(() => {\\n\\t\\t\\t\\t\\taxios.post(generateUrl('/apps/mediadc/api/v1/tasks/restart'), {\\n\\t\\t\\t\\t\\t\\ttaskId: task.id,\\n\\t\\t\\t\\t\\t\\ttargetDirectoryIds: task.target_directory_ids,\\n\\t\\t\\t\\t\\t\\texcludeList: {\\n\\t\\t\\t\\t\\t\\t\\tuser: JSON.parse(task.exclude_list).user,\\n\\t\\t\\t\\t\\t\\t\\tadmin: JSON.parse(this.settingByName('exclude_list').value),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tcollectorSettings: {\\n\\t\\t\\t\\t\\t\\t\\thashing_algorithm: JSON.parse(this.settingByName('hashing_algorithm').value) || 'dhash',\\n\\t\\t\\t\\t\\t\\t\\tsimilarity_threshold: Number(JSON.parse(this.task.collector_settings).similarity_threshold),\\n\\t\\t\\t\\t\\t\\t\\thash_size: Number(this.settingByName('hash_size').value) || 16,\\n\\t\\t\\t\\t\\t\\t\\ttarget_mtype: Number(JSON.parse(this.task.collector_settings).target_mtype),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t}).then(res => {\\n\\t\\t\\t\\t\\t\\tthis.restarting = false\\n\\t\\t\\t\\t\\t\\tif (res.data.success) {\\n\\t\\t\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Task successfully restarted with previous settings!'))\\n\\t\\t\\t\\t\\t\\t\\tthis.getTaskDetails()\\n\\t\\t\\t\\t\\t\\t\\tthis.filessize = 0\\n\\t\\t\\t\\t\\t\\t\\tthis.filestotal = 0\\n\\t\\t\\t\\t\\t\\t} else if (res.data.limit) {\\n\\t\\t\\t\\t\\t\\t\\tshowWarning(this.t('mediadc', 'Running tasks limit exceed. Try again later.'))\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\tshowWarning(this.t('medaidc', 'Some error occured while running Collector Task. Try again.'))\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}).catch(err => {\\n\\t\\t\\t\\t\\t\\tthis.restarting = false\\n\\t\\t\\t\\t\\t\\tconsole.debug(err)\\n\\t\\t\\t\\t\\t\\tshowError('Some error occured while running Collector Task. Try again.')\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t})\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'You are not allowed to restart this task'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tdeleteTask(task) {\\n\\t\\t\\tthis.toggleActionsPopup()\\n\\t\\t\\tif (this.isValidUser) {\\n\\t\\t\\t\\tif (confirm(this.t('mediadc', 'Are sure, you want delete this task?'))) {\\n\\t\\t\\t\\t\\tthis.deleting = true\\n\\t\\t\\t\\t\\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${task.id}`)).then(res => {\\n\\t\\t\\t\\t\\t\\tthis.$router.push({ name: 'collector' })\\n\\t\\t\\t\\t\\t\\tshowSuccess(this.t('mediadc', 'Task successfully deleted'))\\n\\t\\t\\t\\t\\t\\tthis.deleting = false\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tshowWarning(this.t('mediadc', 'You are not allowed to delete this task'))\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tasync getTaskDetails() {\\n\\t\\t\\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}`)).then(res => {\\n\\t\\t\\t\\tif ('success' in res.data && res.data.success) {\\n\\t\\t\\t\\t\\tthis.$store.dispatch('setTask', res.data.collectorTask)\\n\\t\\t\\t\\t\\tthis.$store.dispatch('setDetails', res.data.collectorTaskDetails)\\n\\t\\t\\t\\t\\tif (this.getStatusBadge(this.task) === 'finished'\\n\\t\\t\\t\\t\\t\\t&& this.filestotal === 0 && this.filessize === 0) {\\n\\t\\t\\t\\t\\t\\tthis.getDetailFilesTotalSize()\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.$emit('update:loading', false)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tasync getTaskInfo() {\\n\\t\\t\\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}/info`)).then(res => {\\n\\t\\t\\t\\tthis.$store.dispatch('setTaskInfo', res.data.collectorTaskInfo)\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tasync getDetailFilesTotalSize() {\\n\\t\\t\\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}/filestotal`)).then(res => {\\n\\t\\t\\t\\tthis.filessize = res.data.filessize\\n\\t\\t\\t\\tthis.filestotal = res.data.filestotal\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\topenActionsPopup() {\\n\\t\\t\\tdocument.addEventListener('click', this.toggleActionsPopup)\\n\\t\\t},\\n\\t\\ttoggleActionsPopup() {\\n\\t\\t\\tif (this.actionsOpened) {\\n\\t\\t\\t\\tdocument.removeEventListener('click', this.toggleActionsPopup)\\n\\t\\t\\t}\\n\\t\\t\\tthis.actionsOpened = !this.actionsOpened\\n\\t\\t},\\n\\t\\tcollapseTaskStatus() {\\n\\t\\t\\tthis.collapsedStatus = !this.collapsedStatus\\n\\t\\t},\\n\\t\\topenEditTaskDialog() {\\n\\t\\t\\tthis.editingTask = true\\n\\t\\t},\\n\\t\\tfilesDirLink(dir) {\\n\\t\\t\\tif (dir) {\\n\\t\\t\\t\\tconst path = dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${this.currentUser}/files`, '') !== ''\\n\\t\\t\\t\\t\\t? dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${this.currentUser}/files`, '')\\n\\t\\t\\t\\t\\t: '/'\\n\\t\\t\\t\\treturn generateUrl(`/apps/files?dir=${path}`)\\n\\t\\t\\t}\\n\\t\\t\\treturn '#'\\n\\t\\t},\\n\\t\\tonRestartTaskEvent() {\\n\\t\\t\\tthis.getTaskInfo()\\n\\t\\t\\tthis.getTaskDetails()\\n\\t\\t\\tthis.filessize = 0\\n\\t\\t\\tthis.filestotal = 0\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.container {\\n\\tpadding: 0 20px;\\n\\twidth: 100%;\\n\\tmax-width: 1440px;\\n\\tmargin: 0 auto;\\n\\tmax-height: 100%;\\n}\\n\\n@media (min-width: 1920px) {\\n\\t.container {\\n\\t\\tmax-width: 80vw;\\n\\t}\\n}\\n\\nh2 {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\twidth: 100%;\\n\\tmargin: 20px auto 10px;\\n\\ttext-align: center;\\n}\\n\\n.collapse-task-status-btn {\\n\\tdisplay: inline-flex;\\n\\tcursor: pointer;\\n\\twidth: 16px;\\n\\theight: 16px;\\n\\tmargin: 0 10px;\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tuser-select: none;\\n}\\n\\n.task-details-heading p {\\n\\ttext-align: center;\\n}\\n\\n.details-row {\\n\\tdisplay: flex;\\n\\tmargin: 0 10px 20px;\\n\\tposition: relative;\\n}\\n\\n@media (max-width: 767px) {\\n\\t.details-row {\\n\\t\\tflex-wrap: wrap;\\n\\t}\\n\\t.task-details-heading {\\n\\t\\tflex-direction: column;\\n\\t}\\n}\\n\\n.task-status-row {\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tflex-wrap: wrap;\\n}\\n\\n.task-status {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tmargin: 20px;\\n\\tpadding: 10px;\\n}\\n\\n.actions-menu-button {\\n\\tpadding: 20px;\\n\\tborder-radius: 50%;\\n\\tcursor: pointer;\\n\\tuser-select: none;\\n}\\n\\n.actions-menu-button:hover, .collapse-task-status-btn:hover {\\n\\tbackground-color: #eee;\\n}\\n\\n.actions-menu-button:active, .collapse-task-status-btn:active {\\n\\tbackground-color: #ddd;\\n}\\n\\nbody.theme--dark .actions-menu-button:hover, body.theme--dark .collapse-task-status-btn:hover {\\n\\tbackground-color: #727272;\\n}\\n\\nbody.theme--dark .actions-menu-button:active, body.theme--dark .collapse-task-status-btn:active {\\n\\tbackground-color: #5b5b5b;\\n}\\n\\nbody.theme--dark .task-status, body.theme--dark .task-info {\\n\\tborder-color: #717171;\\n}\\n\\n.task-info {\\n\\tmargin: 20px 0;\\n\\tborder: 1px solid #dadada;\\n\\tborder-radius: 5px;\\n\\tpadding: 10px 20px;\\n\\theight: 100%;\\n\\tmin-height: 94px;\\n\\tmax-height: 94px;\\n\\tmax-width: 50%;\\n\\toverflow-y: scroll;\\n}\\n\\n.owner-tooltip {\\n\\tposition: relative;\\n}\\n\\n.tooltip-title {\\n\\tdisplay: none;\\n\\tpadding: 0 5px;\\n\\tborder-radius: 5px;\\n\\tbackground-color: #000;\\n\\tcolor: #fff;\\n\\tposition: absolute;\\n\\ttop: calc(-100% - 5px);\\n\\tleft: 50%;\\n\\ttransform: translateX(-50%);\\n\\tfont-size: 12px;\\n\\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\\n}\\n\\n.tooltip-title:before {\\n\\tcontent: '';\\n\\tposition: absolute;\\n\\tleft: 50%;\\n\\ttransform: translateX(-50%) rotateZ(45deg);\\n\\tbottom: -3px;\\n\\twidth: 10px;\\n\\theight: 10px;\\n\\tbackground-color: #000;\\n\\tz-index: -1;\\n}\\n\\n.owner-tooltip:hover .tooltip-title {\\n\\tdisplay: block;\\n}\\n\\n@media (max-width: 767px) {\\n\\t.details-row {\\n\\t\\tmargin: 0 0 20px;\\n\\t}\\n\\n\\t.task-status {\\n\\t\\tflex-direction: column;\\n\\t\\tmargin: 0 0 20px;\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t.task-info {\\n\\t\\tmax-width: 100%;\\n\\t\\tmargin: 0;\\n\\t}\\n}\\n\\n.task-info h3 {\\n\\tmargin: 0 0 5px 0;\\n}\\n\\n.target-directory-row {\\n\\twhite-space: nowrap;\\n}\\n\\n.badge {\\n\\tdisplay: inline-flex;\\n\\tpadding: 0 10px;\\n\\tbackground-color: #eee;\\n\\tborder-radius: 20px;\\n\\tmargin-right: 20px;\\n}\\n\\n@media (max-width: 540px) {\\n\\t.task-status-row {\\n\\t\\tflex-direction: column;\\n\\t\\tmargin: 20px 0;\\n\\t}\\n\\n\\t.badge {\\n\\t\\tmargin-right: 0;\\n\\t\\tmargin-top: 10px;\\n\\t\\tmargin-bottom: 10px;\\n\\t}\\n}\\n\\n.badge.finished {\\n\\tbackground-color: #49b382;\\n\\tcolor: #fff;\\n}\\n\\n.badge.running, .badge.pending {\\n\\tbackground-color: #dadada;\\n\\tcolor: #000;\\n}\\n\\n.badge.error {\\n\\tbackground-color: #bd3f3f;\\n\\tcolor: #fff;\\n}\\n\\n.badge.terminated {\\n\\tbackground-color: #f17b1b;\\n\\tcolor: #fff;\\n}\\n\\n.errors {\\n\\tmargin: 20px;\\n\\tborder: 1px solid #bd3f3f;\\n\\tborder-radius: 5px;\\n\\tpadding: 10px;\\n\\tmax-height: 100vh;\\n\\toverflow-y: scroll;\\n}\\n\\n.error-row {\\n\\tborder-bottom: 1px solid #bd3f3f;\\n\\tpadding: 5px 0;\\n\\tmax-height: 100%;\\n\\toverflow-y: scroll;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 85893,\n\t\"./ss.js\": 85893,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.loading)?_c('div',{staticClass:\"container\"},[(_vm.editingTask)?_c('TasksEdit',{attrs:{\"opened\":_vm.editingTask},on:{\"update:opened\":function($event){_vm.editingTask=$event}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"task-details\"},[_c('div',{staticClass:\"task-details-heading\"},[_c('h2',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.rootTitle)+\"\\n\\t\\t\\t\\t\"),_c('span',{class:!_vm.collapsedStatus\n\t\t\t\t\t\t? 'icon-triangle-n collapse-task-status-btn'\n\t\t\t\t\t\t: 'icon-triangle-s collapse-task-status-btn',attrs:{\"title\":_vm.t('mediadc', 'Collapse task status')},on:{\"click\":_vm.collapseTaskStatus}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.collapsedStatus),expression:\"!collapsedStatus\"}],staticClass:\"task-details-description\"},[_c('p',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Here you can view task details, manage task (stop or restart), ' +\n\t\t\t\t\t\t'delete found duplicated photos and videos.'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Deleted files are placed in the trashbin, so that they can be restored in case of need.'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.collapsedStatus),expression:\"!collapsedStatus\"}],staticClass:\"task-status-row\"},[_c('div',{staticClass:\"task-status\"},[_c('span',{class:'badge ' + _vm.getStatusBadge(_vm.task)},[_vm._v(_vm._s(_vm.getStatusBadge(_vm.task)))]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('span',[_c('b',[_vm._v(_vm._s(_vm.parseTargetMtype(_vm.task)))]),_vm._v(\" \"+_vm._s(_vm.task.files_scanned !== _vm.task.files_total ? ((_vm.task.files_scanned) + \"/\") : '')+_vm._s(_vm.task.files_total)+\" \"+_vm._s(_vm.translatePlural('mediadc', 'file', 'files', _vm.task.files_total))+\"\\n\\t\\t\\t\\t\\t\\t(\"+_vm._s(_vm.formatBytes(Number(_vm.task.files_total_size)))+\")\\n\\t\\t\\t\\t\\t\\t(\"+_vm._s(_vm.task !== null && 'collector_settings' in _vm.task ? _vm.t('mediadc', 'precision: ') + JSON.parse(_vm.task.collector_settings).similarity_threshold + '%' : '')+\")\\n\\t\\t\\t\\t\\t\\t\"),_c('br'),_vm._v(\" \"),_c('b',[_vm._v(_vm._s(_vm.t('mediadc', 'Deleted: '))+\" \")]),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.task.deleted_files_count)+\" \"+_vm._s(_vm.translatePlural('mediadc', 'file', 'files', _vm.task.deleted_files_count))+\"\\n\\t\\t\\t\\t\\t\\t(\"+_vm._s(_vm.formatBytes(Number(_vm.task.deleted_files_size)))+\")\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.parseUnixTimestamp(_vm.task.created_time))+\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(Number(_vm.task.finished_time) > 0 ? ' - ' + _vm.parseUnixTimestamp(_vm.task.finished_time) : '')+\"\\n\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-menu\",staticStyle:{\"margin\":\"0 0 0 10px\",\"position\":\"relative\"}},[_c('div',{staticClass:\"icon-more actions-menu-button\",on:{\"click\":_vm.openActionsPopup}}),_vm._v(\" \"),_c('div',{class:_vm.actionsOpened ? 'popovermenu open' : 'popovermenu',staticStyle:{\"right\":\"-1px\"}},[_c('ul',[_c('li',[_c('a',{staticClass:\"icon-history\",on:{\"click\":function($event){return _vm.restartTask(_vm.task)}}},[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Restart')))])])]),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-rename\",on:{\"click\":function($event){return _vm.openEditTaskDialog(_vm.task)}}},[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Edit')))])])]),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-pause\",on:{\"click\":function($event){return _vm.terminateTask(_vm.task)}}},[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Stop')))])])]),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-delete\",on:{\"click\":function($event){return _vm.deleteTask(_vm.task)}}},[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Delete')))])])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"task-info\"},[_c('h3',[_vm._v(_vm._s(_vm.t('mediadc', 'Target directories')))]),_vm._v(\" \"),_c('div',{staticClass:\"target-directories-list\"},_vm._l((_vm.taskInfo.target_directories),function(dir){return _c('div',{key:dir.fileid,staticClass:\"target-directory-row\"},[_c('div',{staticClass:\"owner-tooltip\"},[_c('div',{staticClass:\"tooltip-title\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'onwer:'))+\" \"+_vm._s(dir.fileowner)+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tooltip-content\"},[_c('a',{attrs:{\"href\":_vm.filesDirLink(dir),\"target\":\"_blank\"}},[_c('b',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(dir.filepath.replace((\"/\" + (dir.fileowner) + \"/files\"), '').replace((\"/\" + _vm.currentUser + \"/files\"), '') !== ''\n\t\t\t\t\t\t\t\t\t\t\t\t? dir.filepath.replace((\"/\" + (dir.fileowner) + \"/files\"), '').replace((\"/\" + _vm.currentUser + \"/files\"), '')\n\t\t\t\t\t\t\t\t\t\t\t\t: '/')+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")]),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(\"+_vm._s(_vm.formatBytes(dir.filesize))+\")\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])}),0)])]),_vm._v(\" \"),(_vm.isValidUser)?_c('div',{staticClass:\"details-row\"},[(_vm.getStatusBadge(_vm.task) === 'finished')?_c('DetailsList',{attrs:{\"filessize\":_vm.filessize,\"filestotal\":_vm.filestotal}}):_vm._e()],1):_c('div',[_c('p',{staticStyle:{\"text-align\":\"center\"}},[_c('b',[_vm._v(_vm._s(_vm.t('mediadc', 'You are not allowed to manage other user\\'s tasks.')))])])]),_vm._v(\" \"),(_vm.task.errors !== undefined && _vm.task.errors.length > 0)?_c('div',{staticClass:\"errors\"},[_c('h3',[_vm._v(_vm._s(_vm.t('mediadc', 'Task errors')))]),_vm._v(\" \"),_vm._l((_vm.task.errors.split('\\\\n')),function(error){return _c('div',{key:error,staticClass:\"error-row\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(error)+\"\\n\\t\\t\\t\")])})],2):_vm._e()])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div class=\"file\" :style=\"'width: ' + detailsGridSize + 'px;'\">\n\t\t<div v-if=\"updating\" class=\"updating-blackout\">\n\t\t\t<span class=\"icon-loading\" />\n\t\t</div>\n\t\t<div class=\"file-thumb\" @click=\"openFile(file)\">\n\t\t\t<div v-show=\"loaded\"\n\t\t\t\tv-if=\"file.filempart === 'image' || (file.filempart === 'video' && file.has_preview)\"\n\t\t\t\tclass=\"file-thumb-loaded\">\n\t\t\t\t<img v-show=\"loaded\"\n\t\t\t\t\t:key=\"file.filepath\"\n\t\t\t\t\t:src=\"imageUrl\"\n\t\t\t\t\t:alt=\"file.filename\"\n\t\t\t\t\t:title=\"file.filepath\"\n\t\t\t\t\t@load=\"onLoad\">\n\t\t\t</div>\n\t\t\t<div v-show=\"!loaded && file.filempart === 'video'\"\n\t\t\t\tclass=\"placeholder\"\n\t\t\t\t:style=\"'min-height: ' + detailsGridSize + 'px'\"\n\t\t\t\t:title=\"file.filepath\">\n\t\t\t\t<svg width=\"50%\"\n\t\t\t\t\theight=\"50%\"\n\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\tviewBox=\"-31 0 512 512\"\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path d=\"m440.59 206.68h-341.17l327.7-94.93c2.5469-0.73828 4.6953-2.4609 5.9766-4.7812 1.2812-2.3242 1.5859-5.0586 0.84766-7.6055l-17.148-59.199c-6.8516-23.645-28.867-40.16-53.539-40.16-5.1992 0-10.379 0.73828-15.402 2.1914l-307.68 89.129c-14.23 4.1211-26.023 13.582-33.215 26.633-7.1875 13.051-8.875 28.078-4.7539 42.305l16.754 57.836v238.25c0 30.688 24.965 55.652 55.648 55.652h120.16c5.5234 0 10-4.4766 10-10s-4.4766-10-10-10h-120.16c-19.66 0-35.652-15.992-35.652-35.652v-136.09h391.63v136.09c2.1e-4 19.66-15.992 35.652-35.652 35.652h-120.16c-5.5195 0-10 4.4766-10 10s4.4805 10 10 10h120.16c30.688 0 55.652-24.965 55.652-55.652v-239.67c0-5.5234-4.4766-10-10-10zm-176.33 93.586 42.488-73.586h55.262l-42.484 73.586zm-78.359 0 42.488-73.586h55.262l-42.484 73.586zm-78.355 0 42.484-73.586h55.266l-42.488 73.586zm37.18-129.46-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543l71.148 68.336-53.309 15.441c-0.375-0.54688-0.81641-1.0664-1.3125-1.543zm134-125.84 71.148 68.336-53.309 15.441c-0.375-0.54688-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543zm-75.266 21.805 71.148 68.332-53.309 15.445c-0.375-0.54687-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.37891 0.54297 0.81641 1.0625 1.3125 1.543zm149.96-45.367c3.2109-0.92969 6.5195-1.4023 9.8359-1.4023 15.824 0 29.938 10.578 34.328 25.727l14.367 49.59-40.121 11.621c-0.3789-0.54688-0.8164-1.0625-1.3164-1.543l-71.145-68.332zm-328.94 106.2c4.6094-8.3711 12.16-14.434 21.262-17.07l5.875-1.7031c0.37891 0.54688 0.81641 1.0664 1.3125 1.543l71.148 68.336-88.293 25.578-14.367-49.59c-2.6367-9.0976-1.5469-18.719 3.0625-27.094zm14.48 99.074h87.973l-42.484 73.586h-45.488zm303.66 73.586 42.484-73.586h45.488v73.586z\" />\n\t\t\t\t\t<path d=\"m303.92 405.11c0-3.5742-1.9062-6.875-5-8.6602l-87.855-50.723c-3.0938-1.7852-6.9062-1.7852-10 0-3.0938 1.7852-5 5.0859-5 8.6602v101.45c0 3.5703 1.9062 6.8711 5 8.6562 1.5469 0.89453 3.2734 1.3438 5 1.3438 1.7266 0 3.4531-0.44922 5-1.3438l87.855-50.719c3.0938-1.7852 5-5.0859 5-8.6602zm-87.855 33.402v-66.805l57.855 33.402z\" />\n\t\t\t\t\t<path d=\"m234.77 492c-5.5078 0-10 4.4922-10 10s4.4922 10 10 10c5.5117 0 10-4.4922 10-10s-4.4883-10-10-10z\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div v-show=\"!loaded && file.filempart === 'image'\"\n\t\t\t\tclass=\"placeholder\"\n\t\t\t\t:style=\"'min-height: ' + detailsGridSize + 'px'\"\n\t\t\t\t:title=\"file.filepath\">\n\t\t\t\t<svg width=\"50%\"\n\t\t\t\t\tenable-background=\"new 0 0 512 512\"\n\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\tviewBox=\"0 0 512 512\"\n\t\t\t\t\txml:space=\"preserve\"\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path d=\"m446.58 0h-381.15c-36.076 0-65.425 29.35-65.425 65.426v381.15c0 36.075 29.349 65.425 65.425 65.425h381.15c36.076 0 65.425-29.35 65.425-65.426v-381.15c0-36.076-29.349-65.426-65.425-65.426zm35.267 446.58c0 19.447-15.821 35.267-35.267 35.267h-381.15c-19.447 0-35.268-15.821-35.268-35.267v-55.007l99.255-84.451c3.622-3.082 8.906-3.111 12.562-0.075l62.174 51.628c5.995 4.977 14.795 4.569 20.304-0.946l147.73-147.95c2.67-2.675 5.783-2.935 7.408-2.852 1.62 0.083 4.695 0.661 7.078 3.596l95.176 117.19v118.87zm0-166.71-71.766-88.366c-7.117-8.764-17.666-14.122-28.942-14.701-11.268-0.57-22.317 3.672-30.294 11.662l-138.01 138.22-51.59-42.839c-14.959-12.422-36.563-12.293-51.373 0.308l-79.712 67.822v-286.55c0-19.447 15.821-35.268 35.268-35.268h381.15c19.447 0 35.267 15.821 35.267 35.268v214.44z\" />\n\t\t\t\t\t<path d=\"m161.17 62.995c-40.095 0-72.713 32.62-72.713 72.713 0 40.094 32.619 72.713 72.713 72.713s72.713-32.619 72.713-72.713-32.618-72.713-72.713-72.713zm0 115.27c-23.466 0-42.556-19.091-42.556-42.556 0-23.466 19.09-42.556 42.556-42.556s42.556 19.091 42.556 42.556-19.09 42.556-42.556 42.556z\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"file-info\">\n\t\t\t<span class=\"filename\" :title=\"file.filepath\">{{ file.filename }}</span>\n\t\t\t<span class=\"owner\">{{ file.fileowner }}</span>\n\t\t\t<span class=\"size\">{{ formatBytes(Number(file.filesize)) }}</span>\n\t\t\t<div class=\"actions\" style=\"display: flex;\">\n\t\t\t\t<CheckboxRadioSwitch class=\"batch-checkbox\"\n\t\t\t\t\t:checked.sync=\"checked\"\n\t\t\t\t\tstyle=\"margin-right: 20px;\" />\n\t\t\t\t<span class=\"delete-file-btn icon-delete-white\" @click=\"deleteGroupFile(file)\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateRemoteUrl, generateUrl } from '@nextcloud/router'\nimport { mapGetters } from 'vuex'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { emit, subscribe, unsubscribe } from '@nextcloud/event-bus'\nimport { showError, showMessage, showWarning } from '@nextcloud/dialogs'\nimport Formats from '../../mixins/Formats'\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\n\nexport default {\n\tname: 'DetailsFile',\n\tcomponents: { CheckboxRadioSwitch },\n\tmixins: [Formats],\n\tprops: {\n\t\tfile: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tallFiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcheckedFiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdetail: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloaded: false,\n\t\t\tchecked: false,\n\t\t\tupdating: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'detailsGridSize',\n\t\t\t'deleteFileConfirmation',\n\t\t\t'details',\n\t\t]),\n\t\timageUrl() {\n\t\t\tif (this.file.has_preview) {\n\t\t\t\treturn generateUrl(`/core/preview?fileId=${this.file.fileid}&x=${this.detailsGridSize}&y=${this.detailsGridSize}$forceIcon=0`)\n\t\t\t} else {\n\t\t\t\treturn generateRemoteUrl(`dav/files${this.file.filepath.replace('files/', '')}`)\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\tchecked() {\n\t\t\tconst newCheckedFiles = this.checkedFiles\n\t\t\tconst fileIndex = newCheckedFiles.findIndex(f => f.fileid === this.file.fileid)\n\t\t\tif (this.checked) {\n\t\t\t\tif (fileIndex === -1) {\n\t\t\t\t\tnewCheckedFiles.push(this.file)\n\t\t\t\t}\n\t\t\t} else if (fileIndex !== -1) {\n\t\t\t\tnewCheckedFiles.splice(fileIndex, 1)\n\t\t\t}\n\t\t\tthis.$emit('update:checkedFiles', newCheckedFiles)\n\t\t},\n\t\tcheckedFiles() {\n\t\t\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === this.file.fileid)\n\t\t\tif (!this.checked && fileIndex !== -1) {\n\t\t\t\tthis.checked = true\n\t\t\t}\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tconst fileIndexChecked = this.checkedFiles.findIndex(f => f.fileid === this.file.fileid)\n\t\tthis.checked = fileIndexChecked !== -1\n\t\tsubscribe('deselectFiles', this.deselect)\n\t},\n\tbeforeDestroy() {\n\t\tunsubscribe('deselectFiles', this.deselect)\n\t},\n\tmethods: {\n\t\topenFile(file) {\n\t\t\tconst filesList = this.files.map(file => ({\n\t\t\t\tbasename: file.filename,\n\t\t\t\tfileid: file.fileid,\n\t\t\t\tfilename: file.filepath.replace(`/${getCurrentUser().uid}/files`, ''),\n\t\t\t\tgetcontentlength: file.filesize,\n\t\t\t\tgetcontenttype: file.filemtype,\n\t\t\t\tmime: file.filemtype,\n\t\t\t\tsize: file.filesize,\n\t\t\t}))\n\t\t\tOCA.Viewer.open({\n\t\t\t\tpath: file.filepath.replace(`/${getCurrentUser().uid}/files`, ''),\n\t\t\t\tlist: filesList.map(file => ({\n\t\t\t\t\t...file,\n\t\t\t\t\tlist: filesList,\n\t\t\t\t})),\n\t\t\t})\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.loaded = true\n\t\t},\n\t\tdeleteGroupFile(file) {\n\t\t\tif (this.deleteFileConfirmation) {\n\t\t\t\tif (confirm(t('mediadc', 'Are you sure, you want delete this file?'))) {\n\t\t\t\t\tthis._deleteGroupFile(file)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._deleteGroupFile(file)\n\t\t\t}\n\t\t},\n\t\t_deleteGroupFile(file) {\n\t\t\tthis.updating = true\n\t\t\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/${file.fileid}`))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.success) {\n\t\t\t\t\t\tconst files = this.files\n\t\t\t\t\t\tif (this.allFiles.length === 2) { // Remove detail when 1 file left\n\t\t\t\t\t\t\temit('openNextDetailGroup', this.detail)\n\t\t\t\t\t\t\tthis.$store.dispatch('deleteDetail', this.detail)\n\t\t\t\t\t\t\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst fileidIndex = files.findIndex(f => f.fileid === file.fileid)\n\t\t\t\t\t\tfiles.splice(fileidIndex, 1)\n\t\t\t\t\t\tconst checkedIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\n\t\t\t\t\t\tif (this.checked && checkedIndex !== -1) {\n\t\t\t\t\t\t\tconst newCheckedFiles = this.checkedFiles\n\t\t\t\t\t\t\tnewCheckedFiles.splice(checkedIndex, 1)\n\t\t\t\t\t\t\tthis.$emit('update:checkedFiles', newCheckedFiles)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$emit('update:files', files)\n\t\t\t\t\t\temit('updateTaskInfo')\n\t\t\t\t\t\tthis.$store.dispatch('setTask', res.data.task).then(() => {\n\t\t\t\t\t\t\temit('updateGroupFilesPagination', this.file)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if ('locked' in res.data && res.data.locked) {\n\t\t\t\t\t\tshowWarning(this.t('mediadc', 'Wait until file loaded before deleting'))\n\t\t\t\t\t} else if ('not_permited' in res.data && res.data.not_permited) {\n\t\t\t\t\t\tshowError(this.t('mediadc', 'Not enough permitions to delete file'))\n\t\t\t\t\t} else if ('not_found' in res.data && res.data.not_found) {\n\t\t\t\t\t\tshowError(this.t('mediadc', 'File not found. Probably it\\'s already deleted'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowError(this.t('mediadc', 'Some error occured while deleting file'))\n\t\t\t\t\t}\n\t\t\t\t\tthis.updating = false\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.debug(err)\n\t\t\t\t\tshowError(this.t('mediadc', 'Some error occured while deleting file'))\n\t\t\t\t\tthis.updating = false\n\t\t\t\t})\n\t\t},\n\t\tdeselect(filesToDeselect) {\n\t\t\tif (this.checked && filesToDeselect.map(f => f.fileid).includes(this.file.fileid)) {\n\t\t\t\tthis.checked = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.file {\n\tposition: relative;\n}\n\n.file-thumb {\n\tdisplay: flex;\n\tborder-top-left-radius: 5px;\n\tborder-top-right-radius: 5px;\n}\n\n.file-thumb-loaded {\n\tdisplay: flex;\n\twidth: 100%;\n}\n\nimg {\n\twidth: 100%;\n\theight: auto;\n\tborder-top-left-radius: 5px;\n\tborder-top-right-radius: 5px;\n\tcursor: pointer;\n}\n\n.updating-blackout {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(0, 0, 0, 0.7);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 5px;\n}\n\n.placeholder {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n\tborder-top-left-radius: 5px;\n\tborder-top-right-radius: 5px;\n}\n\nbody.theme--dark .placeholder {\n\tbackground-color: #fff;\n}\n\n.file-info {\n\twidth: 100%;\n\tpadding: 5px 10px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tbackground-color: #000;\n\ttext-align: center;\n\tborder-bottom-left-radius: 5px;\n\tborder-bottom-right-radius: 5px;\n\tcolor: #fff;\n}\n\n.filename {\n\twidth: 100%;\n\toverflow-x: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.delete-file-btn {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: pointer;\n\tbackground-image: var(--icon-delete-fff);\n}\n\n.delete-file-btn:hover {\n\tbackground-color: #eee;\n}\n\n.delete-file-btn:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .delete-file-btn {\n\tbackground-image: var(--icon-delete-000);\n}\n\n.delete-file-btn:hover, body.theme--dark .delete-file-btn:hover {\n\tbackground-image: var(--icon-delete-e9322d);\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsFile.vue?vue&type=script&lang=js&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsFile.vue?vue&type=style&index=0&id=0f225859&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./DetailsFile.vue?vue&type=template&id=0f225859&scoped=true&\"\nimport script from \"./DetailsFile.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsFile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailsFile.vue?vue&type=style&index=0&id=0f225859&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f225859\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file\",style:('width: ' + _vm.detailsGridSize + 'px;')},[(_vm.updating)?_c('div',{staticClass:\"updating-blackout\"},[_c('span',{staticClass:\"icon-loading\"})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"file-thumb\",on:{\"click\":function($event){return _vm.openFile(_vm.file)}}},[(_vm.file.filempart === 'image' || (_vm.file.filempart === 'video' && _vm.file.has_preview))?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"file-thumb-loaded\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],key:_vm.file.filepath,attrs:{\"src\":_vm.imageUrl,\"alt\":_vm.file.filename,\"title\":_vm.file.filepath},on:{\"load\":_vm.onLoad}})]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loaded && _vm.file.filempart === 'video'),expression:\"!loaded && file.filempart === 'video'\"}],staticClass:\"placeholder\",style:('min-height: ' + _vm.detailsGridSize + 'px'),attrs:{\"title\":_vm.file.filepath}},[_c('svg',{attrs:{\"width\":\"50%\",\"height\":\"50%\",\"version\":\"1.1\",\"viewBox\":\"-31 0 512 512\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"m440.59 206.68h-341.17l327.7-94.93c2.5469-0.73828 4.6953-2.4609 5.9766-4.7812 1.2812-2.3242 1.5859-5.0586 0.84766-7.6055l-17.148-59.199c-6.8516-23.645-28.867-40.16-53.539-40.16-5.1992 0-10.379 0.73828-15.402 2.1914l-307.68 89.129c-14.23 4.1211-26.023 13.582-33.215 26.633-7.1875 13.051-8.875 28.078-4.7539 42.305l16.754 57.836v238.25c0 30.688 24.965 55.652 55.648 55.652h120.16c5.5234 0 10-4.4766 10-10s-4.4766-10-10-10h-120.16c-19.66 0-35.652-15.992-35.652-35.652v-136.09h391.63v136.09c2.1e-4 19.66-15.992 35.652-35.652 35.652h-120.16c-5.5195 0-10 4.4766-10 10s4.4805 10 10 10h120.16c30.688 0 55.652-24.965 55.652-55.652v-239.67c0-5.5234-4.4766-10-10-10zm-176.33 93.586 42.488-73.586h55.262l-42.484 73.586zm-78.359 0 42.488-73.586h55.262l-42.484 73.586zm-78.355 0 42.484-73.586h55.266l-42.488 73.586zm37.18-129.46-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543l71.148 68.336-53.309 15.441c-0.375-0.54688-0.81641-1.0664-1.3125-1.543zm134-125.84 71.148 68.336-53.309 15.441c-0.375-0.54688-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.375 0.54688 0.8125 1.0625 1.3125 1.543zm-75.266 21.805 71.148 68.332-53.309 15.445c-0.375-0.54687-0.8125-1.0664-1.3125-1.543l-71.148-68.336 53.309-15.441c0.37891 0.54297 0.81641 1.0625 1.3125 1.543zm149.96-45.367c3.2109-0.92969 6.5195-1.4023 9.8359-1.4023 15.824 0 29.938 10.578 34.328 25.727l14.367 49.59-40.121 11.621c-0.3789-0.54688-0.8164-1.0625-1.3164-1.543l-71.145-68.332zm-328.94 106.2c4.6094-8.3711 12.16-14.434 21.262-17.07l5.875-1.7031c0.37891 0.54688 0.81641 1.0664 1.3125 1.543l71.148 68.336-88.293 25.578-14.367-49.59c-2.6367-9.0976-1.5469-18.719 3.0625-27.094zm14.48 99.074h87.973l-42.484 73.586h-45.488zm303.66 73.586 42.484-73.586h45.488v73.586z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"m303.92 405.11c0-3.5742-1.9062-6.875-5-8.6602l-87.855-50.723c-3.0938-1.7852-6.9062-1.7852-10 0-3.0938 1.7852-5 5.0859-5 8.6602v101.45c0 3.5703 1.9062 6.8711 5 8.6562 1.5469 0.89453 3.2734 1.3438 5 1.3438 1.7266 0 3.4531-0.44922 5-1.3438l87.855-50.719c3.0938-1.7852 5-5.0859 5-8.6602zm-87.855 33.402v-66.805l57.855 33.402z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"m234.77 492c-5.5078 0-10 4.4922-10 10s4.4922 10 10 10c5.5117 0 10-4.4922 10-10s-4.4883-10-10-10z\"}})])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loaded && _vm.file.filempart === 'image'),expression:\"!loaded && file.filempart === 'image'\"}],staticClass:\"placeholder\",style:('min-height: ' + _vm.detailsGridSize + 'px'),attrs:{\"title\":_vm.file.filepath}},[_c('svg',{attrs:{\"width\":\"50%\",\"enable-background\":\"new 0 0 512 512\",\"version\":\"1.1\",\"viewBox\":\"0 0 512 512\",\"xml:space\":\"preserve\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"m446.58 0h-381.15c-36.076 0-65.425 29.35-65.425 65.426v381.15c0 36.075 29.349 65.425 65.425 65.425h381.15c36.076 0 65.425-29.35 65.425-65.426v-381.15c0-36.076-29.349-65.426-65.425-65.426zm35.267 446.58c0 19.447-15.821 35.267-35.267 35.267h-381.15c-19.447 0-35.268-15.821-35.268-35.267v-55.007l99.255-84.451c3.622-3.082 8.906-3.111 12.562-0.075l62.174 51.628c5.995 4.977 14.795 4.569 20.304-0.946l147.73-147.95c2.67-2.675 5.783-2.935 7.408-2.852 1.62 0.083 4.695 0.661 7.078 3.596l95.176 117.19v118.87zm0-166.71-71.766-88.366c-7.117-8.764-17.666-14.122-28.942-14.701-11.268-0.57-22.317 3.672-30.294 11.662l-138.01 138.22-51.59-42.839c-14.959-12.422-36.563-12.293-51.373 0.308l-79.712 67.822v-286.55c0-19.447 15.821-35.268 35.268-35.268h381.15c19.447 0 35.267 15.821 35.267 35.268v214.44z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"m161.17 62.995c-40.095 0-72.713 32.62-72.713 72.713 0 40.094 32.619 72.713 72.713 72.713s72.713-32.619 72.713-72.713-32.618-72.713-72.713-72.713zm0 115.27c-23.466 0-42.556-19.091-42.556-42.556 0-23.466 19.09-42.556 42.556-42.556s42.556 19.091 42.556 42.556-19.09 42.556-42.556 42.556z\"}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"file-info\"},[_c('span',{staticClass:\"filename\",attrs:{\"title\":_vm.file.filepath}},[_vm._v(_vm._s(_vm.file.filename))]),_vm._v(\" \"),_c('span',{staticClass:\"owner\"},[_vm._v(_vm._s(_vm.file.fileowner))]),_vm._v(\" \"),_c('span',{staticClass:\"size\"},[_vm._v(_vm._s(_vm.formatBytes(Number(_vm.file.filesize))))]),_vm._v(\" \"),_c('div',{staticClass:\"actions\",staticStyle:{\"display\":\"flex\"}},[_c('CheckboxRadioSwitch',{staticClass:\"batch-checkbox\",staticStyle:{\"margin-right\":\"20px\"},attrs:{\"checked\":_vm.checked},on:{\"update:checked\":function($event){_vm.checked=$event}}}),_vm._v(\" \"),_c('span',{staticClass:\"delete-file-btn icon-delete-white\",on:{\"click\":function($event){return _vm.deleteGroupFile(_vm.file)}}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div v-if=\"!loadingFiles\" class=\"details-group\">\n\t\t<div class=\"filters\">\n\t\t\t<div class=\"sorting\">\n\t\t\t\t{{ t('mediadc', 'Files size sorting') }}\n\t\t\t\t<span :class=\"filesAscending ? 'icon-triangle-s sorting-group-files-btn' : 'icon-triangle-n sorting-group-files-btn'\" @click=\"updateFileSorting\" />\n\t\t\t</div>\n\t\t\t<div class=\"search\">\n\t\t\t\t<label for=\"filename-filter\">\n\t\t\t\t\t{{ t('mediadc', 'Filter by filename: ') }}\n\t\t\t\t\t<input id=\"filename-filter\"\n\t\t\t\t\t\tv-model=\"filterFileName\"\n\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\tname=\"filename-filter\"\n\t\t\t\t\t\t:placeholder=\"t('mediadc', 'Filename or part')\"\n\t\t\t\t\t\t@input=\"filterByFileName\">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div v-if=\"checkedFiles.length > 0\" class=\"batch-editing\">\n\t\t\t\t{{ translatePlural('mediadc', 'Batch actions for %n file', 'Batch actions for %n files', checkedFiles.length) }}\n\t\t\t\t<div class=\"app-content-list-menu\" style=\"margin: 0 0 0 10px; position: relative;\">\n\t\t\t\t\t<div class=\"icon-more batch-actions-menu-button\" @click=\"openBatchActionsPopup\" />\n\t\t\t\t\t<div :class=\"batchActionsOpened ? 'popovermenu open' : 'popovermenu'\"\n\t\t\t\t\t\tstyle=\"right: -1px;\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"icon-checkmark\" @click=\"selectAllFiles\">\n\t\t\t\t\t\t\t\t\t<span>{{ checkedFiles.length === allFiles.length ? t('mediadc', 'Deselect all') : t('mediadc', 'Select all') }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li v-if=\"JSON.parse(detail.group_files_ids).length > groupItemsPerPage\">\n\t\t\t\t\t\t\t\t<a class=\"icon-checkmark\" @click=\"selectAllFilesOnPage\">\n\t\t\t\t\t\t\t\t\t<span>{{ checkedFilesIntersect.length === files.length ? t('mediadc', 'Deselect all on page') : t('mediadc', 'Select all on page') }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"icon-close\" :title=\"t('mediadc', 'Remove without deleting')\" @click=\"removeCheckedFiles\">\n\t\t\t\t\t\t\t\t\t<span>{{ translatePlural('mediadc', 'Remove file', 'Remove files', checkedFiles.length) }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"icon-delete\" @click=\"deleteCheckedFiles\">\n\t\t\t\t\t\t\t\t\t<span>{{ translatePlural('mediadc', 'Delete file', 'Delete files', checkedFiles.length) }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!filesFiltered\" class=\"details-group-files\">\n\t\t\t<DetailsFile\n\t\t\t\tv-for=\"file in files\"\n\t\t\t\t:key=\"file.fileid\"\n\t\t\t\t:file=\"file\"\n\t\t\t\t:files=\"files\"\n\t\t\t\t:all-files=\"allFiles\"\n\t\t\t\t:checked-files.sync=\"checkedFiles\"\n\t\t\t\t:detail=\"detail\" />\n\t\t</div>\n\t\t<div v-else-if=\"filteredFiles.length > 0\" class=\"details-group-files\">\n\t\t\t<DetailsFile\n\t\t\t\tv-for=\"file in filteredFiles\"\n\t\t\t\t:key=\"file.fileid\"\n\t\t\t\t:file=\"file\"\n\t\t\t\t:files=\"files\"\n\t\t\t\t:all-files=\"allFiles\"\n\t\t\t\t:checked-files.sync=\"checkedFiles\"\n\t\t\t\t:detail=\"detail\" />\n\t\t</div>\n\t\t<div v-else class=\"details-group-files\">\n\t\t\t<p style=\"margin: 0 0 10px;\">\n\t\t\t\t{{ t('mediadc', 'No matches on this page') }}\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<div v-else>\n\t\t<span class=\"icon-loading\" style=\"width: 20px; height: 20px; display: flex; margin: 20px auto;\" />\n\t</div>\n</template>\n\n<script>\nimport Formats from '../../mixins/Formats'\nimport { mapGetters } from 'vuex'\nimport DetailsFile from './DetailsFile'\nimport { showError, showMessage, showSuccess, showWarning } from '@nextcloud/dialogs'\nimport { generateUrl } from '@nextcloud/router'\nimport axios from '@nextcloud/axios'\nimport { emit } from '@nextcloud/event-bus'\n\nexport default {\n\tname: 'DetailsGroupList',\n\tcomponents: { DetailsFile },\n\tmixins: [Formats],\n\tprops: {\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tallFiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdetail: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tloadingFiles: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tupdating: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tfilesAscending: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcheckedFiles: [],\n\t\t\tbatchActionsOpened: false,\n\t\t\tfilesFiltered: false,\n\t\t\tfilterFileName: '',\n\t\t\tfilteredFiles: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'detailsGridSize',\n\t\t\t'deleteFileConfirmation',\n\t\t\t'groupItemsPerPage',\n\t\t\t'details',\n\t\t]),\n\t\tcheckedFilesIntersect() {\n\t\t\tconst a = new Set(this.files)\n\t\t\tconst b = new Set(this.checkedFiles)\n\t\t\tconst intersect = new Set([...a].filter(i => b.has(i)))\n\t\t\treturn Array.from(intersect)\n\t\t},\n\t},\n\twatch: {\n\t\tfiles() {\n\t\t\tthis.filterByFileName()\n\t\t},\n\t},\n\tmethods: {\n\t\topenBatchActionsPopup() {\n\t\t\tdocument.addEventListener('click', this.toggleBatchActionsPopup)\n\t\t},\n\t\ttoggleBatchActionsPopup() {\n\t\t\tif (this.batchActionsOpened) {\n\t\t\t\tdocument.removeEventListener('click', this.toggleBatchActionsPopup)\n\t\t\t}\n\t\t\tthis.batchActionsOpened = !this.batchActionsOpened\n\t\t},\n\t\tselectAllFiles() {\n\t\t\tif (this.checkedFiles.length === this.allFiles.length) { // Deselect files\n\t\t\t\temit('deselectFiles', this.checkedFiles)\n\t\t\t\tfor (const file of this.allFiles) {\n\t\t\t\t\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\n\t\t\t\t\tif (fileIndex !== -1) {\n\t\t\t\t\t\tthis.checkedFiles.splice(fileIndex, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const file of this.allFiles) {\n\t\t\t\t\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\n\t\t\t\t\tif (fileIndex === -1) {\n\t\t\t\t\t\tthis.checkedFiles.push(file)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectAllFilesOnPage() {\n\t\t\tif (this.files.length === this.checkedFilesIntersect.length) {\n\t\t\t\tconst filesToDeselect = this.checkedFilesIntersect\n\t\t\t\temit('deselectFiles', filesToDeselect)\n\t\t\t\tfor (const fileid of filesToDeselect.map(f => f.fileid)) {\n\t\t\t\t\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\n\t\t\t\t\tif (fileIndex !== -1) {\n\t\t\t\t\t\tthis.checkedFiles.splice(fileIndex, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const file of this.files) {\n\t\t\t\t\tconst fileIndex = this.checkedFiles.findIndex(f => f.fileid === file.fileid)\n\t\t\t\t\tif (fileIndex === -1) {\n\t\t\t\t\t\tthis.checkedFiles.push(file)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tremoveCheckedFiles() {\n\t\t\tthis.$emit('update:updating', true)\n\t\t\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/remove`), { fileIds: this.checkedFiles.map(f => f.fileid) }).then(res => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tconst allFiles = this.allFiles\n\t\t\t\t\tif ((this.allFiles.length - this.checkedFiles.length) <= 1) {\n\t\t\t\t\t\temit('openNextDetailGroup', this.detail)\n\t\t\t\t\t\t// Remove detail\n\t\t\t\t\t\tthis.$store.dispatch('deleteDetail', this.detail)\n\t\t\t\t\t\tif ((this.allFiles.length - this.checkedFiles.length) === 1) {\n\t\t\t\t\t\t\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (const fileid of res.data.removedFileIds) {\n\t\t\t\t\t\tconst fileidIndex = allFiles.findIndex(f => f.fileid === fileid)\n\t\t\t\t\t\tallFiles.splice(fileidIndex, 1)\n\t\t\t\t\t\tconst checkedFileIdIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\n\t\t\t\t\t\tif (checkedFileIdIndex !== -1) {\n\t\t\t\t\t\t\tthis.checkedFiles.splice(checkedFileIdIndex, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\temit('updateTaskInfo')\n\t\t\t\t\tthis.$emit('update:allFiles', allFiles)\n\t\t\t\t\temit('updateGroupFilesPagination')\n\t\t\t\t\tthis.$emit('update:updating', false)\n\t\t\t\t\tshowSuccess(this.t('mediadc', 'Checked files successfully removed'))\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.debug(err)\n\t\t\t\tshowError(this.t('mediadc', 'Some server error occured'))\n\t\t\t\tthis.$emit('update:updating', false)\n\t\t\t})\n\t\t},\n\t\tdeleteCheckedFiles() {\n\t\t\tif (this.allFiles.length === this.checkedFiles.length) {\n\t\t\t\tif (confirm(this.t('mediadc', 'Are you sure, you want delete all files'))) {\n\t\t\t\t\tthis._deleteCheckedFiles()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._deleteCheckedFiles()\n\t\t\t}\n\t\t},\n\t\t_deleteCheckedFiles() {\n\t\t\tthis.$emit('update:updating', true)\n\t\t\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.detail.task_id}/files/${this.detail.id}/delete`), { fileIds: this.checkedFiles.map(f => f.fileid) }).then(res => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tthis._updateDeletedFiles(res)\n\t\t\t\t} else if (!res.data.success && res.data.deletedFileIds.length > 0) {\n\t\t\t\t\tshowWarning(this.t('mediadc', 'Not all files deleted'))\n\t\t\t\t\tthis._updateDeletedFiles(res)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.debug(res.data.errors)\n\t\t\t\t\tshowError(this.t('mediadc', 'Some server error occured. Files not deleted'))\n\t\t\t\t\tthis.$emit('update:updating', false)\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.debug(err)\n\t\t\t\tshowError(this.t('mediadc', 'Some server error occured'))\n\t\t\t\tthis.$emit('update:updating', false)\n\t\t\t})\n\t\t},\n\t\t_updateDeletedFiles(res) {\n\t\t\tconst allFiles = this.allFiles\n\t\t\tif ((this.allFiles.length - this.checkedFiles.length) <= 1 && res.data.deletedFileIds.length === this.checkedFiles.length) {\n\t\t\t\temit('openNextDetailGroup', this.detail)\n\t\t\t\t// Remove detail\n\t\t\t\tthis.$store.dispatch('deleteDetail', this.detail)\n\t\t\t\tif ((this.allFiles.length - this.checkedFiles.length) === 1) {\n\t\t\t\t\tshowMessage(this.t('mediadc', 'Group successfully removed (1 file left)'))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const fileid of res.data.deletedFileIds) {\n\t\t\t\tconst fileidIndex = allFiles.findIndex(f => f.fileid === fileid)\n\t\t\t\tallFiles.splice(fileidIndex, 1)\n\t\t\t\tconst checkedFileIdIndex = this.checkedFiles.findIndex(f => f.fileid === fileid)\n\t\t\t\tif (checkedFileIdIndex !== -1) {\n\t\t\t\t\tthis.checkedFiles.splice(checkedFileIdIndex, 1)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temit('updateTaskInfo')\n\t\t\tthis.$emit('update:allFiles', allFiles)\n\t\t\temit('updateGroupFilesPagination')\n\t\t\tthis.$emit('update:updating', false)\n\t\t\tshowSuccess(this.t('mediadc', 'Checked files successfully deleted'))\n\t\t},\n\t\tfilterByFileName() {\n\t\t\tif (this.filterFileName !== '') {\n\t\t\t\tthis.filesFiltered = true\n\t\t\t\tthis.filteredFiles = this.files.filter(f => f.filename.toLowerCase().includes(this.filterFileName.toLowerCase()))\n\t\t\t} else {\n\t\t\t\tthis.filesFiltered = false\n\t\t\t\tthis.filteredFiles = []\n\t\t\t}\n\t\t},\n\t\tupdateFileSorting() {\n\t\t\tthis.$emit('update:filesAscending', !this.filesAscending)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.details-group {\n\twidth: 100%;\n\tborder-top: 1px solid #dadada;\n\tborder-bottom: 1px solid #dadada;\n\tmargin: 10px 0;\n}\n\nbody.theme--dark .details-group {\n\tborder-color: #717171;\n}\n\n.details-group-files {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\tmax-height: 100vh;\n\toverflow-y: scroll;\n}\n\n.file {\n\tdisplay: flex;\n\theight: 100%;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\twidth: 192px;\n\tborder-radius: 5px;\n\tborder: 1px solid #dadada;\n\ttransition: box-shadow .3s;\n\tmargin: 10px;\n}\n\nbody.theme--dark .file {\n\tborder-color: #717171;\n}\n\n@media (max-width: 540px) {\n\t.file {\n\t\tmax-width: 192px;\n\t}\n\n\t.filters {\n\t\tflex-direction: column;\n\t}\n}\n\n.file:hover {\n\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .25);\n}\n\n.filters {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 5px 10px;\n\tmargin: 10px 0;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n}\n\n.search {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.sorting {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.sorting-group-files-btn {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tmargin: 0 5px;\n\tcursor: pointer;\n}\n\n.sorting-group-files-btn:hover {\n\tbackground-color: #eee;\n}\n\n.sorting-group-files-btn:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .sorting-group-files-btn:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .sorting-group-files-btn:active {\n\tbackground-color: #5b5b5b;\n}\n\n.batch-editing {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.batch-actions-menu-button {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.batch-actions-menu-button:hover {\n\tbackground-color: #eee;\n}\n\n.batch-actions-menu-button:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .batch-actions-menu-button:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .batch-actions-menu-button:active {\n\tbackground-color: #5b5b5b;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsGroupList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsGroupList.vue?vue&type=script&lang=js&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsGroupList.vue?vue&type=style&index=0&id=287ce272&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./DetailsGroupList.vue?vue&type=template&id=287ce272&scoped=true&\"\nimport script from \"./DetailsGroupList.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsGroupList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailsGroupList.vue?vue&type=style&index=0&id=287ce272&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"287ce272\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.loadingFiles)?_c('div',{staticClass:\"details-group\"},[_c('div',{staticClass:\"filters\"},[_c('div',{staticClass:\"sorting\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Files size sorting'))+\"\\n\\t\\t\\t\"),_c('span',{class:_vm.filesAscending ? 'icon-triangle-s sorting-group-files-btn' : 'icon-triangle-n sorting-group-files-btn',on:{\"click\":_vm.updateFileSorting}})]),_vm._v(\" \"),_c('div',{staticClass:\"search\"},[_c('label',{attrs:{\"for\":\"filename-filter\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Filter by filename: '))+\"\\n\\t\\t\\t\\t\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filterFileName),expression:\"filterFileName\"}],attrs:{\"id\":\"filename-filter\",\"type\":\"search\",\"name\":\"filename-filter\",\"placeholder\":_vm.t('mediadc', 'Filename or part')},domProps:{\"value\":(_vm.filterFileName)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.filterFileName=$event.target.value},_vm.filterByFileName]}})])]),_vm._v(\" \"),(_vm.checkedFiles.length > 0)?_c('div',{staticClass:\"batch-editing\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.translatePlural('mediadc', 'Batch actions for %n file', 'Batch actions for %n files', _vm.checkedFiles.length))+\"\\n\\t\\t\\t\"),_c('div',{staticClass:\"app-content-list-menu\",staticStyle:{\"margin\":\"0 0 0 10px\",\"position\":\"relative\"}},[_c('div',{staticClass:\"icon-more batch-actions-menu-button\",on:{\"click\":_vm.openBatchActionsPopup}}),_vm._v(\" \"),_c('div',{class:_vm.batchActionsOpened ? 'popovermenu open' : 'popovermenu',staticStyle:{\"right\":\"-1px\"}},[_c('ul',[_c('li',[_c('a',{staticClass:\"icon-checkmark\",on:{\"click\":_vm.selectAllFiles}},[_c('span',[_vm._v(_vm._s(_vm.checkedFiles.length === _vm.allFiles.length ? _vm.t('mediadc', 'Deselect all') : _vm.t('mediadc', 'Select all')))])])]),_vm._v(\" \"),(JSON.parse(_vm.detail.group_files_ids).length > _vm.groupItemsPerPage)?_c('li',[_c('a',{staticClass:\"icon-checkmark\",on:{\"click\":_vm.selectAllFilesOnPage}},[_c('span',[_vm._v(_vm._s(_vm.checkedFilesIntersect.length === _vm.files.length ? _vm.t('mediadc', 'Deselect all on page') : _vm.t('mediadc', 'Select all on page')))])])]):_vm._e(),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-close\",attrs:{\"title\":_vm.t('mediadc', 'Remove without deleting')},on:{\"click\":_vm.removeCheckedFiles}},[_c('span',[_vm._v(_vm._s(_vm.translatePlural('mediadc', 'Remove file', 'Remove files', _vm.checkedFiles.length)))])])]),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-delete\",on:{\"click\":_vm.deleteCheckedFiles}},[_c('span',[_vm._v(_vm._s(_vm.translatePlural('mediadc', 'Delete file', 'Delete files', _vm.checkedFiles.length)))])])])])])])]):_vm._e()]),_vm._v(\" \"),(!_vm.filesFiltered)?_c('div',{staticClass:\"details-group-files\"},_vm._l((_vm.files),function(file){return _c('DetailsFile',{key:file.fileid,attrs:{\"file\":file,\"files\":_vm.files,\"all-files\":_vm.allFiles,\"checked-files\":_vm.checkedFiles,\"detail\":_vm.detail},on:{\"update:checkedFiles\":function($event){_vm.checkedFiles=$event},\"update:checked-files\":function($event){_vm.checkedFiles=$event}}})}),1):(_vm.filteredFiles.length > 0)?_c('div',{staticClass:\"details-group-files\"},_vm._l((_vm.filteredFiles),function(file){return _c('DetailsFile',{key:file.fileid,attrs:{\"file\":file,\"files\":_vm.files,\"all-files\":_vm.allFiles,\"checked-files\":_vm.checkedFiles,\"detail\":_vm.detail},on:{\"update:checkedFiles\":function($event){_vm.checkedFiles=$event},\"update:checked-files\":function($event){_vm.checkedFiles=$event}}})}),1):_c('div',{staticClass:\"details-group-files\"},[_c('p',{staticStyle:{\"margin\":\"0 0 10px\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'No matches on this page'))+\"\\n\\t\\t\")])])]):_c('div',[_c('span',{staticClass:\"icon-loading\",staticStyle:{\"width\":\"20px\",\"height\":\"20px\",\"display\":\"flex\",\"margin\":\"20px auto\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div class=\"details-list-item\">\n\t\t<div v-show=\"updating\" class=\"action-blackout\">\n\t\t\t<span class=\"icon-loading\" />\n\t\t</div>\n\t\t<div class=\"details-list-item-title\">\n\t\t\t<CheckboxRadioSwitch class=\"batch-checkbox\" :checked.sync=\"checked\" />\n\t\t\t<span class=\"group-info\" @click=\"openDetailFiles(detail)\">\n\t\t\t\t<span class=\"icon-projects\" style=\"margin: 0 10px 0 10px;\" />\n\t\t\t\t{{ t('mediadc', 'Duplicate group') }} #{{ detail.id }} ({{ JSON.parse(detail.group_files_ids).length }}\n\t\t\t\t{{ translatePlural('mediadc', 'file', 'files', JSON.parse(detail.group_files_ids).length) }}{{ Array.isArray(files) && files.length > 0 ? ' - ' + formatBytes(groupFilesSize) : '' }})\n\t\t\t\t<span :class=\"!opened ? 'icon-triangle-s open-details-btn' : 'icon-triangle-n open-details-btn'\" />\n\t\t\t</span>\n\t\t\t<span class=\"icon-delete delete-group-btn\"\n\t\t\t\t:title=\"t('mediadc', 'Remove group without deleting files')\"\n\t\t\t\t@click=\"removeTaskDetail(detail)\" />\n\t\t</div>\n\t\t<div v-if=\"opened && JSON.parse(detail.group_files_ids).length > groupItemsPerPage\" class=\"pagination\">\n\t\t\t<span class=\"icon-view-previous pagination-button\"\n\t\t\t\t@click=\"openPrevDetailFiles(detail)\" />\n\t\t\t<span>{{ t('mediadc', 'Page:') }}&nbsp;</span>\n\t\t\t<span>{{ page + 1 }}/{{ Math.ceil(JSON.parse(detail.group_files_ids).length / groupItemsPerPage) }}</span>\n\t\t\t<span class=\"icon-view-next pagination-button\"\n\t\t\t\t@click=\"openNextDetailFiles(detail)\" />\n\t\t</div>\n\t\t<DetailsGroupList v-show=\"opened\"\n\t\t\t:detail=\"detail\"\n\t\t\t:files=\"files\"\n\t\t\t:all-files=\"allFiles\"\n\t\t\t:loading-files.sync=\"loadingFiles\"\n\t\t\t:updating.sync=\"updating\"\n\t\t\t:files-ascending.sync=\"filesAscending\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport DetailsGroupList from './DetailsGroupList'\nimport Formats from '../../mixins/Formats'\nimport { mapGetters } from 'vuex'\nimport { showError, showSuccess, showWarning } from '@nextcloud/dialogs'\nimport { subscribe, unsubscribe, emit } from '@nextcloud/event-bus'\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\n\nexport default {\n\tname: 'DetailsListItem',\n\tcomponents: { DetailsGroupList, CheckboxRadioSwitch },\n\tmixins: [Formats],\n\tprops: {\n\t\tdetail: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcheckedDetailGroups: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\topened: false,\n\t\t\tpage: 0,\n\t\t\ttotalPages: 0,\n\t\t\tloadingFiles: false,\n\t\t\tfiles: [],\n\t\t\tallFiles: [],\n\t\t\tpaginatedFiles: {},\n\t\t\tchecked: false,\n\t\t\tfilesAscending: false,\n\t\t\tupdating: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'task',\n\t\t\t'details',\n\t\t\t'groupItemsPerPage',\n\t\t]),\n\t\tgroupFilesSize() {\n\t\t\treturn this.allFiles.length > 0 ? this.allFiles.reduce((sum, file) => sum + file.filesize, 0) : 0\n\t\t},\n\t},\n\twatch: {\n\t\tchecked() {\n\t\t\tconst newCheckedDetailGroups = this.checkedDetailGroups\n\t\t\tconst detailIndex = newCheckedDetailGroups.findIndex(d => d.id === this.detail.id)\n\t\t\tif (this.checked) {\n\t\t\t\tif (detailIndex === -1) {\n\t\t\t\t\tnewCheckedDetailGroups.push(this.detail)\n\t\t\t\t}\n\t\t\t} else if (detailIndex !== -1) {\n\t\t\t\tnewCheckedDetailGroups.splice(detailIndex, 1)\n\t\t\t}\n\t\t\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\n\t\t},\n\t\tfilesAscending() {\n\t\t\tthis.sortFiles(this.filesAscending)\n\t\t},\n\t\tcheckedDetailGroups() {\n\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === this.detail.id)\n\t\t\tif (!this.checked && detailIndex !== -1) {\n\t\t\t\tthis.checked = true\n\t\t\t}\n\t\t},\n\t\tgroupItemsPerPage(newGroupItemsPerPage) {\n\t\t\tif (this.opened) {\n\t\t\t\tif (this.page >= Math.ceil(JSON.parse(this.detail.group_files_ids).length / newGroupItemsPerPage)) {\n\t\t\t\t\tthis.page = Math.ceil(JSON.parse(this.detail.group_files_ids).length / newGroupItemsPerPage) - 1\n\t\t\t\t}\n\t\t\t\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\n\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t}\n\t\t},\n\t\tallFiles(newAllFiles) {\n\t\t\tif (this.page >= Math.ceil(newAllFiles.length / this.groupItemsPerPage)) {\n\t\t\t\tthis.page = Math.ceil(newAllFiles.length / this.groupItemsPerPage) - 1\n\t\t\t\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\n\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t}\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tconst detailCheckedIndex = this.checkedDetailGroups.findIndex(d => d.id === this.detail.id)\n\t\tthis.checked = detailCheckedIndex !== -1\n\t\tsubscribe('updateGroupFilesPagination', this.updateFilesPagination)\n\t\tsubscribe('deselectGroups', this.deselect)\n\t\tsubscribe('openGroup', this.openGroup)\n\t},\n\tbeforeDestroy() {\n\t\tunsubscribe('updateGroupFilesPagination', this.updateFilesPagination)\n\t\tunsubscribe('deselectGroups', this.deselect)\n\t\tunsubscribe('openGroup', this.openGroup)\n\t},\n\tmethods: {\n\t\topenDetailFiles(detail) {\n\t\t\tif (!this.opened) {\n\t\t\t\tif (this.files === undefined || this.files.length === 0) {\n\t\t\t\t\tconst taskId = detail.task_id\n\t\t\t\t\tconst detailId = detail.id\n\t\t\t\t\tthis.loadingFiles = true\n\t\t\t\t\tthis.opened = true\n\t\t\t\t\tif (this.allFiles.length === 0) {\n\t\t\t\t\t\tthis.loadAllFilesInfo(taskId, detailId)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t\t\t\tthis.loadingFiles = false\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.opened = true\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.opened = false\n\t\t\t}\n\t\t},\n\t\topenNextDetailFiles(detail) {\n\t\t\tif (this.page < Math.ceil(JSON.parse(detail.group_files_ids).length / this.groupItemsPerPage) - 1) {\n\t\t\t\tthis.page += 1\n\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'Last page reached!'))\n\t\t\t}\n\t\t},\n\t\topenPrevDetailFiles(detail) {\n\t\t\tif (this.page > 0) {\n\t\t\t\tthis.page -= 1\n\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'First page reached!'))\n\t\t\t}\n\t\t},\n\t\tloadAllFilesInfo(taskId, detailId) {\n\t\t\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${taskId}/files/${detailId}/all`)).then(res => {\n\t\t\t\tthis.allFiles = res.data.files\n\t\t\t\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\n\t\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t\t\tthis.loadingFiles = false\n\t\t\t})\n\t\t},\n\t\tpaginateFiles(files) {\n\t\t\tconst paginatedFiles = []\n\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\tconst last = paginatedFiles[paginatedFiles.length - 1]\n\t\t\t\tif (!last || last.length === this.groupItemsPerPage) {\n\t\t\t\t\tpaginatedFiles.push([files[i]])\n\t\t\t\t} else {\n\t\t\t\t\tlast.push(files[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn paginatedFiles\n\t\t},\n\t\tremoveTaskDetail(detail) {\n\t\t\tif (confirm(this.t('mediadc', 'Are you sure, you want remove this group without deleting files?'))) {\n\t\t\t\tthis.updating = true\n\t\t\t\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${detail.task_id}/detail/${detail.id}`)).then(res => {\n\t\t\t\t\tif (res.data.success) {\n\t\t\t\t\t\temit('openNextDetailGroup', this.detail)\n\t\t\t\t\t\tconst updatedDetails = [...this.details]\n\t\t\t\t\t\tconst removedDetailIndex = updatedDetails.findIndex(d => d.id === this.detail.id)\n\t\t\t\t\t\tupdatedDetails.splice(removedDetailIndex, 1)\n\t\t\t\t\t\tthis.$store.dispatch('setDetails', updatedDetails)\n\t\t\t\t\t\tconst checkedIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\t\tconst newCheckedDetailGroups = [...this.checkedDetailGroups]\n\t\t\t\t\t\tif (this.checked && checkedIndex !== -1) {\n\t\t\t\t\t\t\tnewCheckedDetailGroups.splice(checkedIndex, 1)\n\t\t\t\t\t\t\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\n\t\t\t\t\t\t}\n\t\t\t\t\t\temit('updateTaskInfo')\n\t\t\t\t\t\tshowSuccess(this.t('mediadc', 'Duplicate group succesffully removed'))\n\t\t\t\t\t\tconst detailCheckedIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\t\tif (detailCheckedIndex !== -1) {\n\t\t\t\t\t\t\tconst newCheckedDetailGroups = this.checkedDetailGroups\n\t\t\t\t\t\t\tnewCheckedDetailGroups.splice(detailCheckedIndex, 1)\n\t\t\t\t\t\t\tthis.$emit('update:checkedDetailGroups', newCheckedDetailGroups)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.updating = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowError(this.t('mediadc', 'Some error occured while deleting duplicate group'))\n\t\t\t\t\t\tthis.updating = false\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.debug(err)\n\t\t\t\t\tshowError(this.t('mediadc', 'Some error occured while deleting duplicate group'))\n\t\t\t\t\tthis.updating = false\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tsortFiles(ascending) {\n\t\t\tthis.allFiles.sort((a, b) => (ascending) ? a.filesize - b.filesize : b.filesize - a.filesize)\n\t\t\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\n\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t},\n\t\tupdateFilesPagination(file) {\n\t\t\tif (file) {\n\t\t\t\tconst deletedFileIndex = this.allFiles.findIndex(f => f.fileid === file.fileid)\n\t\t\t\tif (deletedFileIndex !== -1) {\n\t\t\t\t\tthis.allFiles.splice(deletedFileIndex, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.paginatedFiles = this.paginateFiles(this.allFiles)\n\t\t\tthis.files = this.paginatedFiles[this.page]\n\t\t},\n\t\tdeselect(groupsToDeselect) {\n\t\t\tif (this.checked && groupsToDeselect.includes(this.detail.id)) {\n\t\t\t\tthis.checked = false\n\t\t\t}\n\t\t},\n\t\topenGroup(detail) {\n\t\t\tif (this.detail.id === detail.id && !this.opened) {\n\t\t\t\tthis.openDetailFiles(detail)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.details-list-item {\n\twidth: 100%;\n\tpadding: 10px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tflex-direction: column;\n\tposition: relative;\n}\n\n.details-list-item-title {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.group-info {\n\tpadding: 10px;\n\tborder-radius: 20px;\n\tdisplay: flex;\n\talign-items: center;\n\tuser-select: none;\n}\n\n.group-info:hover {\n\tcursor: pointer;\n\tbackground-color: #eee;\n}\n\n.group-info:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .group-info:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .group-info:active {\n\tbackground-color: #5b5b5b;\n}\n\n.pagination {\n\tdisplay: flex;\n\talign-items: center;\n\t/* margin: 10px 0; */\n}\n\n.pagination-button {\n\tpadding: 20px;\n\tmargin: 0 5px;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: pointer;\n\tborder-radius: 50%;\n\tuser-select: none;\n}\n\n.pagination-button:hover {\n\tbackground-color: #eee;\n}\n\n.pagination-button:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .pagination-button:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .pagination-button:active {\n\tbackground-color: #5b5b5b;\n}\n\n.open-details-btn {\n\tdisplay: inline-flex;\n\twidth: 16px;\n\theight: 16px;\n\tmargin: 0 5px 0 10px;\n\tcursor: pointer;\n}\n\n.delete-group-btn {\n\tvisibility: hidden;\n\tcursor: pointer;\n\tmargin: 0 10px 0 5px;\n\tpadding: 20px;\n\tborder-radius: 50%;\n}\n\n.delete-group-btn:hover {\n\tbackground-color: #eee;\n}\n\n.delete-group-btn:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .delete-group-btn:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .delete-group-btn:active {\n\tbackground-color: #5b5b5b;\n}\n\n.details-list-item:hover .delete-group-btn {\n\tvisibility: visible;\n}\n\n.action-blackout {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tz-index: 999;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 5px;\n}\n\n.batch-checkbox {\n\tvisibility: hidden;\n\tmargin-right: 20px;\n}\n\n.batch-checkbox .checkbox-radio-switch__icon {\n\tmargin-right: 0;\n\tcolor: #000;\n}\n\n.batch-checkbox.checkbox-radio-switch--checked {\n\tvisibility: visible;\n}\n\n.details-list-item:hover .batch-checkbox {\n\tvisibility: visible;\n}\n\n@media (max-width: 540px) {\n\t.delete-group-btn {\n\t\tvisibility: visible;\n\t}\n\n\t.batch-checkbox {\n\t\tvisibility: visible;\n\t\tmargin-right: 10px;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsListItem.vue?vue&type=script&lang=js&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsListItem.vue?vue&type=style&index=0&id=08060f22&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./DetailsListItem.vue?vue&type=template&id=08060f22&scoped=true&\"\nimport script from \"./DetailsListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailsListItem.vue?vue&type=style&index=0&id=08060f22&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08060f22\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"details-list-item\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.updating),expression:\"updating\"}],staticClass:\"action-blackout\"},[_c('span',{staticClass:\"icon-loading\"})]),_vm._v(\" \"),_c('div',{staticClass:\"details-list-item-title\"},[_c('CheckboxRadioSwitch',{staticClass:\"batch-checkbox\",attrs:{\"checked\":_vm.checked},on:{\"update:checked\":function($event){_vm.checked=$event}}}),_vm._v(\" \"),_c('span',{staticClass:\"group-info\",on:{\"click\":function($event){return _vm.openDetailFiles(_vm.detail)}}},[_c('span',{staticClass:\"icon-projects\",staticStyle:{\"margin\":\"0 10px 0 10px\"}}),_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Duplicate group'))+\" #\"+_vm._s(_vm.detail.id)+\" (\"+_vm._s(JSON.parse(_vm.detail.group_files_ids).length)+\"\\n\\t\\t\\t\"+_vm._s(_vm.translatePlural('mediadc', 'file', 'files', JSON.parse(_vm.detail.group_files_ids).length))+_vm._s(Array.isArray(_vm.files) && _vm.files.length > 0 ? ' - ' + _vm.formatBytes(_vm.groupFilesSize) : '')+\")\\n\\t\\t\\t\"),_c('span',{class:!_vm.opened ? 'icon-triangle-s open-details-btn' : 'icon-triangle-n open-details-btn'})]),_vm._v(\" \"),_c('span',{staticClass:\"icon-delete delete-group-btn\",attrs:{\"title\":_vm.t('mediadc', 'Remove group without deleting files')},on:{\"click\":function($event){return _vm.removeTaskDetail(_vm.detail)}}})],1),_vm._v(\" \"),(_vm.opened && JSON.parse(_vm.detail.group_files_ids).length > _vm.groupItemsPerPage)?_c('div',{staticClass:\"pagination\"},[_c('span',{staticClass:\"icon-view-previous pagination-button\",on:{\"click\":function($event){return _vm.openPrevDetailFiles(_vm.detail)}}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Page:'))+\"\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.page + 1)+\"/\"+_vm._s(Math.ceil(JSON.parse(_vm.detail.group_files_ids).length / _vm.groupItemsPerPage)))]),_vm._v(\" \"),_c('span',{staticClass:\"icon-view-next pagination-button\",on:{\"click\":function($event){return _vm.openNextDetailFiles(_vm.detail)}}})]):_vm._e(),_vm._v(\" \"),_c('DetailsGroupList',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.opened),expression:\"opened\"}],attrs:{\"detail\":_vm.detail,\"files\":_vm.files,\"all-files\":_vm.allFiles,\"loading-files\":_vm.loadingFiles,\"updating\":_vm.updating,\"files-ascending\":_vm.filesAscending},on:{\"update:loadingFiles\":function($event){_vm.loadingFiles=$event},\"update:loading-files\":function($event){_vm.loadingFiles=$event},\"update:updating\":function($event){_vm.updating=$event},\"update:filesAscending\":function($event){_vm.filesAscending=$event},\"update:files-ascending\":function($event){_vm.filesAscending=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div class=\"task-details\">\n\t\t<div class=\"task-details-heading\">\n\t\t\t<h3>\n\t\t\t\t{{ t('mediadc', 'Duplicates list') }}\n\t\t\t\t<span v-if=\"getStatusBadge(task) === 'finished'\">\n\t\t\t\t\t- {{ details.length }} {{ translatePlural('mediadc', 'group, ', 'groups', details.length) }}\n\t\t\t\t\t({{ filestotal }} {{ translatePlural('mediadc', 'file', 'files', filestotal) }} - {{ formatBytes(filessize) }})\n\t\t\t\t</span>\n\t\t\t</h3>\n\t\t\t<div class=\"pagination\">\n\t\t\t\t<CheckboxRadioSwitch :checked.sync=\"sortGroups\" style=\"margin-right: 20px;\">\n\t\t\t\t\t{{ t('mediadc', 'Sort groups') }}\n\t\t\t\t</CheckboxRadioSwitch>\n\t\t\t\t<span :class=\"!sorted ? 'icon-triangle-s toggle-sorting-button' : 'icon-triangle-n toggle-sorting-button'\"\n\t\t\t\t\t:title=\"t('mediadc', 'Sorting details by files count')\"\n\t\t\t\t\t@click=\"toggleSorting\" />\n\t\t\t\t<span v-if=\"details.length > itemsPerPage\"\n\t\t\t\t\tclass=\"icon-view-previous pagination-button\"\n\t\t\t\t\t@click=\"prevGroupsPage()\" />\n\t\t\t\t<span v-if=\"details.length > itemsPerPage\">{{ t('mediadc', 'Page:') }}&nbsp;</span>\n\t\t\t\t<span v-if=\"details.length > itemsPerPage\">{{ page + 1 }}/{{ Math.ceil(details.length / itemsPerPage) }}</span>\n\t\t\t\t<span v-if=\"details.length > itemsPerPage\" class=\"icon-view-next pagination-button\" @click=\"nextGroupsPage()\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"details.length > 0\">\n\t\t\t<div class=\"filters\">\n\t\t\t\t<label for=\"group-id-filter\">\n\t\t\t\t\t{{ t('mediadc', 'Filter by duplicate group id: ') }}\n\t\t\t\t\t<input id=\"group-id-filter\"\n\t\t\t\t\t\tv-model=\"filterId\"\n\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\tname=\"group-id-filter\"\n\t\t\t\t\t\tplaceholder=\"#id\"\n\t\t\t\t\t\t@input=\"filterByGroupId\">\n\t\t\t\t</label>\n\t\t\t\t<div v-if=\"checkedDetailGroups.length > 0\" class=\"batch-editing\">\n\t\t\t\t\t{{ translatePlural('mediadc', 'Batch actions for %n group', 'Batch actions for %n groups', checkedDetailGroups.length) }}\n\t\t\t\t\t<div class=\"app-content-list-menu\" style=\"margin: 0 0 0 10px; position: relative;\">\n\t\t\t\t\t\t<div class=\"icon-more batch-actions-menu-button\" @click=\"openBatchActionsPopup\" />\n\t\t\t\t\t\t<div :class=\"batchActionsOpened ? 'popovermenu open' : 'popovermenu'\"\n\t\t\t\t\t\t\tstyle=\"right: -1px;\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-checkmark\" @click=\"selectAllGroups\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ checkedDetailGroups.length === details.length ? t('mediadc', 'Deselect all') : t('mediadc', 'Select all') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li v-if=\"details.length > itemsPerPage\">\n\t\t\t\t\t\t\t\t\t<a class=\"icon-checkmark\" @click=\"selectAllGroupsOnPage\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ checkedDetailGroupsIntersect.length === paginatedDetails[page].length ? t('mediadc', 'Deselect all on page') : t('mediadc', 'Select all on page') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-close\" @click=\"removeCheckedGroups\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ translatePlural('mediadc', 'Remove group', 'Remove groups', checkedDetailGroups.length) }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"batchUpdating\" class=\"action-blackout\">\n\t\t\t\t<span class=\"icon-loading\" />\n\t\t\t</div>\n\t\t\t<div v-else-if=\"detailsFiltered === undefined || (detailsFiltered.length === 0 && (filterId === '' || filterId === null))\">\n\t\t\t\t<template v-if=\"sortGroups\">\n\t\t\t\t\t<div v-for=\"detail in paginatedSortedDetails[page]\"\n\t\t\t\t\t\tv-show=\"JSON.parse(detail.group_files_ids).length > 1\"\n\t\t\t\t\t\t:key=\"detail.id\"\n\t\t\t\t\t\tclass=\"task-details-row\">\n\t\t\t\t\t\t<DetailsListItem :detail=\"detail\" :checked-detail-groups.sync=\"checkedDetailGroups\" />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-for=\"detail in paginatedDetails[page]\"\n\t\t\t\t\t\tv-show=\"JSON.parse(detail.group_files_ids).length > 1\"\n\t\t\t\t\t\t:key=\"detail.id\"\n\t\t\t\t\t\tclass=\"task-details-row\">\n\t\t\t\t\t\t<DetailsListItem :detail=\"detail\" :checked-detail-groups.sync=\"checkedDetailGroups\" />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"detailsFiltered.length > 0\">\n\t\t\t\t<div v-for=\"detail in detailsFiltered\"\n\t\t\t\t\tv-show=\"JSON.parse(detail.group_files_ids).length > 1\"\n\t\t\t\t\t:key=\"detail.id\"\n\t\t\t\t\tclass=\"task-details-row\">\n\t\t\t\t\t<DetailsListItem :detail=\"detail\" :checked-detail-groups.sync=\"checkedDetailGroups\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<p style=\"text-align: center; font-weight: bold;\">\n\t\t\t\t\t{{ t('mediadc', 'No matching found') }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else style=\"margin-top: 10px;\">\n\t\t\t<strong>{{ t('mediadc', 'No duplicates found.') }}</strong>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { showError, showSuccess, showWarning } from '@nextcloud/dialogs'\nimport { mapGetters } from 'vuex'\nimport Formats from '../../mixins/Formats'\nimport DetailsListItem from './DetailsListItem'\nimport { subscribe, unsubscribe, emit } from '@nextcloud/event-bus'\nimport CheckboxRadioSwitch from '@nextcloud/vue/dist/Components/CheckboxRadioSwitch'\n\nexport default {\n\tname: 'DetailsList',\n\tcomponents: { DetailsListItem, CheckboxRadioSwitch },\n\tmixins: [Formats],\n\tprops: {\n\t\tfilessize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tfilestotal: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpage: 0,\n\t\t\tfilterId: null,\n\t\t\tcheckedDetailGroups: [],\n\t\t\tbatchActionsOpened: false,\n\t\t\tbatchActionResult: null,\n\t\t\tbatchUpdating: false,\n\t\t\tsortGroups: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'task',\n\t\t\t'details',\n\t\t\t'sortedDetails',\n\t\t\t'sorted',\n\t\t\t'paginatedDetails',\n\t\t\t'paginatedSortedDetails',\n\t\t\t'itemsPerPage',\n\t\t\t'detailsFiltered',\n\t\t\t'autoOpenNextGroup',\n\t\t]),\n\t\tcheckedDetailGroupsIntersect() {\n\t\t\tconst a = new Set(this.paginatedDetails[this.page].map(d => d.id))\n\t\t\tconst b = new Set(this.checkedDetailGroups.map(d => d.id))\n\t\t\tconst intersect = new Set([...a].filter(i => b.has(i)))\n\t\t\treturn Array.from(intersect)\n\t\t},\n\t},\n\twatch: {\n\t\titemsPerPage(newItemsPerPage) {\n\t\t\tif (this.page >= Math.ceil(this.details.length / newItemsPerPage)) {\n\t\t\t\tthis.page = Math.ceil(this.details.length / newItemsPerPage) - 1\n\t\t\t}\n\t\t},\n\t\tdetails(newDetails) {\n\t\t\tif (this.page >= Math.ceil(newDetails.length / this.itemsPerPage)) {\n\t\t\t\tthis.page = Math.ceil(newDetails.length / this.itemsPerPage) - 1\n\t\t\t}\n\t\t},\n\t\tsortGroups() {\n\t\t\twindow.localStorage.setItem('mediadc_details_sort_groups', this.sortGroups)\n\t\t\tthis.$store.dispatch('setSortGroups', this.sortGroups)\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.$emit('update:loading', false)\n\t\tconst sortGroups = window.localStorage.getItem('mediadc_details_sort_groups')\n\t\tthis.sortGroups = sortGroups !== null ? JSON.parse(sortGroups) === true : true\n\t\tthis.$store.dispatch('setSortGroups', sortGroups !== null ? JSON.parse(sortGroups) === true : true)\n\t\tsubscribe('openNextDetailGroup', this.openNextDetailGroup)\n\t},\n\tbeforeDestroy() {\n\t\tunsubscribe('openNextDetailGroup', this.openNextDetailGroup)\n\t},\n\tmethods: {\n\t\tprevGroupsPage() {\n\t\t\tif (this.page > 0) {\n\t\t\t\tthis.page -= 1\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'First page reached!'))\n\t\t\t}\n\t\t},\n\t\tnextGroupsPage() {\n\t\t\tif (this.page < Math.ceil(this.details.length / this.itemsPerPage) - 1) {\n\t\t\t\tthis.page += 1\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'Last page reached!'))\n\t\t\t}\n\t\t},\n\t\ttoggleSorting() {\n\t\t\tthis.$store.dispatch('setSorted', !this.sorted)\n\t\t},\n\t\tfilterByGroupId() {\n\t\t\tif (this.filterId !== null && this.filterId !== '') {\n\t\t\t\tthis.$store.dispatch('setDetailsFiltered', this.details.filter(d => d.id.toString().includes(this.filterId)))\n\t\t\t} else {\n\t\t\t\tthis.$store.dispatch('setDetailsFiltered', [])\n\t\t\t}\n\t\t},\n\t\topenBatchActionsPopup() {\n\t\t\tdocument.addEventListener('click', this.toggleBatchActionsPopup)\n\t\t},\n\t\ttoggleBatchActionsPopup() {\n\t\t\tif (this.batchActionsOpened) {\n\t\t\t\tdocument.removeEventListener('click', this.toggleBatchActionsPopup)\n\t\t\t}\n\t\t\tthis.batchActionsOpened = !this.batchActionsOpened\n\t\t},\n\t\tremoveCheckedGroups() {\n\t\t\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${this.task.id}/details/remove`), { taskDetailIds: this.checkedDetailGroups.map(d => d.id) }).then(res => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\temit('updateTaskInfo')\n\t\t\t\t\tconst updatedDetails = this.details\n\t\t\t\t\tfor (const taskDetail of res.data.removedTaskDetails) {\n\t\t\t\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === taskDetail.id)\n\t\t\t\t\t\tthis.checkedDetailGroups.splice(detailIndex, 1)\n\t\t\t\t\t\tconst removedDetailIndex = updatedDetails.findIndex(d => d.id === taskDetail.id)\n\t\t\t\t\t\tupdatedDetails.splice(removedDetailIndex, 1)\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.dispatch('setDetails', updatedDetails)\n\t\t\t\t\tshowSuccess(this.t('mediadc', 'Selected groups successfully removed'))\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tshowError(this.t('mediadc', 'Some server error occured'))\n\t\t\t\tconsole.debug(err)\n\t\t\t})\n\t\t},\n\t\tselectAllGroups() {\n\t\t\tif (this.checkedDetailGroups.length === this.details.length) {\n\t\t\t\temit('deselectGroups', this.checkedDetailGroups.map(d => d.id))\n\t\t\t\tfor (const detail of this.details) {\n\t\t\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\tif (detailIndex !== -1) {\n\t\t\t\t\t\tthis.checkedDetailGroups.splice(detailIndex, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetTimeout(() => { this.batchUpdating = false }, 300)\n\t\t\t} else {\n\t\t\t\tfor (const detail of this.details) {\n\t\t\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\tif (detailIndex === -1) {\n\t\t\t\t\t\tthis.checkedDetailGroups.push(detail)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectAllGroupsOnPage() {\n\t\t\tif (this.paginatedDetails[this.page].length === this.checkedDetailGroupsIntersect.length) {\n\t\t\t\tconst groupsToDeselect = this.checkedDetailGroupsIntersect\n\t\t\t\temit('deselectGroups', groupsToDeselect)\n\t\t\t\tfor (const detail of groupsToDeselect) {\n\t\t\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\tif (detailIndex !== -1) {\n\t\t\t\t\t\tthis.checkedDetailGroups.splice(detailIndex, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const detail of this.paginatedDetails[this.page]) {\n\t\t\t\t\tconst detailIndex = this.checkedDetailGroups.findIndex(d => d.id === detail.id)\n\t\t\t\t\tif (detailIndex === -1) {\n\t\t\t\t\t\tthis.checkedDetailGroups.push(detail)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\topenNextDetailGroup(detail) {\n\t\t\tif (this.autoOpenNextGroup) {\n\t\t\t\tconst detailIndex = this.details.findIndex(d => d.id === detail.id)\n\t\t\t\tif (detailIndex !== -1) {\n\t\t\t\t\tif (detailIndex !== this.details.length - 1) {\n\t\t\t\t\t\temit('openGroup', this.details[detailIndex + 1])\n\t\t\t\t\t} else if (detailIndex === this.details.length - 1 && this.details.length >= 2) {\n\t\t\t\t\t\temit('openGroup', this.details[detailIndex - 1])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.task-details {\n\twidth: 100%;\n\tpadding: 20px 10px 20px 20px;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n\toverflow-y: scroll;\n\tmargin: 0 auto;\n}\n\n.task-details-heading {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.action-blackout {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tz-index: 999;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 5px;\n}\n\n.task-details-heading h3 {\n\tmargin: 0;\n}\n\n@media (max-width: 540px) {\n\t.task-details-heading {\n\t\tflex-direction: column;\n\t\ttext-align: center;\n\t}\n}\n\n.pagination {\n\tdisplay: flex;\n\talign-items: center;\n\t/* margin: 10px 0; */\n}\n\n.pagination-button {\n\tpadding: 20px;\n\tmargin: 0 5px;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: pointer;\n\tborder-radius: 50%;\n\tuser-select: none;\n}\n\n.sorting {\n\tdisplay: flex;\n}\n\n.toggle-sorting-button {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tuser-select: none;\n\tcursor: pointer;\n}\n\n.pagination-button:hover, .toggle-sorting-button:hover {\n\tbackground-color: #eee;\n}\n\n.pagination-button:active, .toggle-sorting-button:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .pagination-button:hover, body.theme--dark .toggle-sorting-button:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .pagination-button:active, body.theme--dark .toggle-sorting-button:active {\n\tbackground-color: #5b5b5b;\n}\n\nbody.theme--dark .task-details {\n\tborder-color: #717171;\n}\n\n.task-details-row {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tborder: 1px solid #dedede;\n\tborder-radius: 5px;\n\tmargin-bottom: 5px;\n\ttransition: height .3s;\n}\n\n.filters {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 5px 10px;\n\tmargin: 10px 0;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n}\n\nbody.theme--dark .task-details-row, body.theme--dark .filters {\n\tborder-color: #717171;\n}\n\n@media (max-width: 540px) {\n\t.filters {\n\t\tflex-direction: column;\n\t}\n}\n\n.batch-editing {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.batch-actions-menu-button {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.batch-actions-menu-button:hover {\n\tbackground-color: #eee;\n}\n\n.batch-actions-menu-button:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .batch-actions-menu-button:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .batch-actions-menu-button:active {\n\tbackground-color: #5b5b5b;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsList.vue?vue&type=script&lang=js&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsList.vue?vue&type=style&index=0&id=6970fd5d&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./DetailsList.vue?vue&type=template&id=6970fd5d&scoped=true&\"\nimport script from \"./DetailsList.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailsList.vue?vue&type=style&index=0&id=6970fd5d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6970fd5d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task-details\"},[_c('div',{staticClass:\"task-details-heading\"},[_c('h3',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Duplicates list'))+\"\\n\\t\\t\\t\"),(_vm.getStatusBadge(_vm.task) === 'finished')?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t- \"+_vm._s(_vm.details.length)+\" \"+_vm._s(_vm.translatePlural('mediadc', 'group, ', 'groups', _vm.details.length))+\"\\n\\t\\t\\t\\t(\"+_vm._s(_vm.filestotal)+\" \"+_vm._s(_vm.translatePlural('mediadc', 'file', 'files', _vm.filestotal))+\" - \"+_vm._s(_vm.formatBytes(_vm.filessize))+\")\\n\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('CheckboxRadioSwitch',{staticStyle:{\"margin-right\":\"20px\"},attrs:{\"checked\":_vm.sortGroups},on:{\"update:checked\":function($event){_vm.sortGroups=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Sort groups'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{class:!_vm.sorted ? 'icon-triangle-s toggle-sorting-button' : 'icon-triangle-n toggle-sorting-button',attrs:{\"title\":_vm.t('mediadc', 'Sorting details by files count')},on:{\"click\":_vm.toggleSorting}}),_vm._v(\" \"),(_vm.details.length > _vm.itemsPerPage)?_c('span',{staticClass:\"icon-view-previous pagination-button\",on:{\"click\":function($event){return _vm.prevGroupsPage()}}}):_vm._e(),_vm._v(\" \"),(_vm.details.length > _vm.itemsPerPage)?_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Page:'))+\"\")]):_vm._e(),_vm._v(\" \"),(_vm.details.length > _vm.itemsPerPage)?_c('span',[_vm._v(_vm._s(_vm.page + 1)+\"/\"+_vm._s(Math.ceil(_vm.details.length / _vm.itemsPerPage)))]):_vm._e(),_vm._v(\" \"),(_vm.details.length > _vm.itemsPerPage)?_c('span',{staticClass:\"icon-view-next pagination-button\",on:{\"click\":function($event){return _vm.nextGroupsPage()}}}):_vm._e()],1)]),_vm._v(\" \"),(_vm.details.length > 0)?_c('div',[_c('div',{staticClass:\"filters\"},[_c('label',{attrs:{\"for\":\"group-id-filter\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Filter by duplicate group id: '))+\"\\n\\t\\t\\t\\t\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filterId),expression:\"filterId\"}],attrs:{\"id\":\"group-id-filter\",\"type\":\"search\",\"name\":\"group-id-filter\",\"placeholder\":\"#id\"},domProps:{\"value\":(_vm.filterId)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.filterId=$event.target.value},_vm.filterByGroupId]}})]),_vm._v(\" \"),(_vm.checkedDetailGroups.length > 0)?_c('div',{staticClass:\"batch-editing\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.translatePlural('mediadc', 'Batch actions for %n group', 'Batch actions for %n groups', _vm.checkedDetailGroups.length))+\"\\n\\t\\t\\t\\t\"),_c('div',{staticClass:\"app-content-list-menu\",staticStyle:{\"margin\":\"0 0 0 10px\",\"position\":\"relative\"}},[_c('div',{staticClass:\"icon-more batch-actions-menu-button\",on:{\"click\":_vm.openBatchActionsPopup}}),_vm._v(\" \"),_c('div',{class:_vm.batchActionsOpened ? 'popovermenu open' : 'popovermenu',staticStyle:{\"right\":\"-1px\"}},[_c('ul',[_c('li',[_c('a',{staticClass:\"icon-checkmark\",on:{\"click\":_vm.selectAllGroups}},[_c('span',[_vm._v(_vm._s(_vm.checkedDetailGroups.length === _vm.details.length ? _vm.t('mediadc', 'Deselect all') : _vm.t('mediadc', 'Select all')))])])]),_vm._v(\" \"),(_vm.details.length > _vm.itemsPerPage)?_c('li',[_c('a',{staticClass:\"icon-checkmark\",on:{\"click\":_vm.selectAllGroupsOnPage}},[_c('span',[_vm._v(_vm._s(_vm.checkedDetailGroupsIntersect.length === _vm.paginatedDetails[_vm.page].length ? _vm.t('mediadc', 'Deselect all on page') : _vm.t('mediadc', 'Select all on page')))])])]):_vm._e(),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"icon-close\",on:{\"click\":_vm.removeCheckedGroups}},[_c('span',[_vm._v(_vm._s(_vm.translatePlural('mediadc', 'Remove group', 'Remove groups', _vm.checkedDetailGroups.length)))])])])])])])]):_vm._e()]),_vm._v(\" \"),(_vm.batchUpdating)?_c('div',{staticClass:\"action-blackout\"},[_c('span',{staticClass:\"icon-loading\"})]):(_vm.detailsFiltered === undefined || (_vm.detailsFiltered.length === 0 && (_vm.filterId === '' || _vm.filterId === null)))?_c('div',[(_vm.sortGroups)?_vm._l((_vm.paginatedSortedDetails[_vm.page]),function(detail){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(JSON.parse(detail.group_files_ids).length > 1),expression:\"JSON.parse(detail.group_files_ids).length > 1\"}],key:detail.id,staticClass:\"task-details-row\"},[_c('DetailsListItem',{attrs:{\"detail\":detail,\"checked-detail-groups\":_vm.checkedDetailGroups},on:{\"update:checkedDetailGroups\":function($event){_vm.checkedDetailGroups=$event},\"update:checked-detail-groups\":function($event){_vm.checkedDetailGroups=$event}}})],1)}):_vm._l((_vm.paginatedDetails[_vm.page]),function(detail){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(JSON.parse(detail.group_files_ids).length > 1),expression:\"JSON.parse(detail.group_files_ids).length > 1\"}],key:detail.id,staticClass:\"task-details-row\"},[_c('DetailsListItem',{attrs:{\"detail\":detail,\"checked-detail-groups\":_vm.checkedDetailGroups},on:{\"update:checkedDetailGroups\":function($event){_vm.checkedDetailGroups=$event},\"update:checked-detail-groups\":function($event){_vm.checkedDetailGroups=$event}}})],1)})],2):(_vm.detailsFiltered.length > 0)?_c('div',_vm._l((_vm.detailsFiltered),function(detail){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(JSON.parse(detail.group_files_ids).length > 1),expression:\"JSON.parse(detail.group_files_ids).length > 1\"}],key:detail.id,staticClass:\"task-details-row\"},[_c('DetailsListItem',{attrs:{\"detail\":detail,\"checked-detail-groups\":_vm.checkedDetailGroups},on:{\"update:checkedDetailGroups\":function($event){_vm.checkedDetailGroups=$event},\"update:checked-detail-groups\":function($event){_vm.checkedDetailGroups=$event}}})],1)}),0):_c('div',[_c('p',{staticStyle:{\"text-align\":\"center\",\"font-weight\":\"bold\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'No matching found'))+\"\\n\\t\\t\\t\")])])]):_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('strong',[_vm._v(_vm._s(_vm.t('mediadc', 'No duplicates found.')))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div v-show=\"opened\" class=\"blackout\">\n\t\t<div class=\"edit-task-block\">\n\t\t\t<span class=\"icon-close close-edit-button\" @click=\"closeEditTaskDialog\" />\n\t\t\t<h2>{{ t('mediadc', 'Edit task') }}</h2>\n\t\t\t<div class=\"selection-container\">\n\t\t\t\t<div class=\"block target-directories-block\">\n\t\t\t\t\t<h3>{{ t('mediadc', 'Target directories') }}</h3>\n\t\t\t\t\t<div v-if=\"targetDirectoriesIds.length > 0\">\n\t\t\t\t\t\t<div v-for=\"fileid in targetDirectoriesIds\" :key=\"fileid\" class=\"selected-target-directories-list\">\n\t\t\t\t\t\t\t<div class=\"target-directory\">\n\t\t\t\t\t\t\t\t<span style=\"overflow-y: scroll; white-space: nowrap;\">{{ targetDirectoriesPaths[fileid] }}</span>\n\t\t\t\t\t\t\t\t<span class=\"delete-button icon-delete\" @click=\"removeTargetDirectory(fileid)\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<span>{{ t('mediadc', 'Not selected') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t\t<button @click=\"openDirectoriesExplorer\">\n\t\t\t\t\t\t<span class=\"icon-add\" />\n\t\t\t\t\t\t{{ t('mediadc', 'Select') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"block\">\n\t\t\t\t\t<h3>{{ t('mediadc', 'Exclude directories') }}</h3>\n\t\t\t\t\t<div v-if=\"excludeDirectoriesPaths.length > 0\">\n\t\t\t\t\t\t<div v-for=\"fileid in Object.keys(excludeFileIds)\" :key=\"fileid\" class=\"selected-excluded-directories-list\">\n\t\t\t\t\t\t\t<div class=\"target-directory\">\n\t\t\t\t\t\t\t\t<span style=\"overflow-y: scroll;\">{{ excludeFileIds[fileid] }}</span>\n\t\t\t\t\t\t\t\t<span class=\"delete-button icon-delete\" @click=\"removeExcludeDirectory(fileid)\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<span>{{ t('mediadc', 'Not selected') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t\t<button @click=\"openExcludeExplorer\">\n\t\t\t\t\t\t<span class=\"icon-add\" />\n\t\t\t\t\t\t{{ t('mediadc', 'Select') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"selection-container\">\n\t\t\t\t<div class=\"block\">\n\t\t\t\t\t<h3>{{ t('mediadc', 'Custom exclude mask') }}</h3>\n\t\t\t\t\t<div v-if=\"customExcludeList.length > 0\" class=\"custom-masks-list\">\n\t\t\t\t\t\t<div v-for=\"(mask, index) in customExcludeList\" :key=\"index\" class=\"custom-mask\">\n\t\t\t\t\t\t\t<span>{{ mask }}</span>\n\t\t\t\t\t\t\t<span class=\"icon-delete\" style=\"cursor: pointer;\" @click=\"deleteCustomMask(mask)\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<span>{{ t('mediadc', 'Not added') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"addingCustomMask\" style=\"display: flex; align-items: center;\">\n\t\t\t\t\t\t<input id=\"custom-exclude-mask\"\n\t\t\t\t\t\t\tref=\"customExcludeMask\"\n\t\t\t\t\t\t\tv-model=\"customExcludeMask\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t@keyup.enter=\"addCustomMask\"\n\t\t\t\t\t\t\t@keyup.esc=\"cancelAddingCustomMask\">\n\t\t\t\t\t\t<span class=\"icon-checkmark\" style=\"width: 18px; height: 18px; margin: 0 5px; display: inline-block; cursor: pointer;\" @click=\"addCustomMask\" />\n\t\t\t\t\t\t<span class=\"icon-close\" style=\"width: 18px; height: 18px; margin: 0 5px; display: inline-block; cursor: pointer;\" @click=\"cancelAddingCustomMask\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style=\"display: flex; align-items: center; margin: 20px 0;\">\n\t\t\t\t\t\t<button @click=\"addNewMask\">\n\t\t\t\t\t\t\t<span class=\"icon-add\" />\n\t\t\t\t\t\t\t<span>{{ t('mediadc', 'Add mask') }}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"block\">\n\t\t\t\t\t<h3 style=\"margin: 5px 0;\">\n\t\t\t\t\t\t{{ t('mediadc', 'Target Mime Type') }}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<select id=\"target_mtype\"\n\t\t\t\t\t\tv-model=\"targetMimeType\"\n\t\t\t\t\t\tname=\"target_mtype\">\n\t\t\t\t\t\t<option :value=\"0\">\n\t\t\t\t\t\t\t{{ t('mediadc', 'Photos') }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t<option :value=\"1\">\n\t\t\t\t\t\t\t{{ t('mediadc', 'Videos') }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t<option :value=\"2\">\n\t\t\t\t\t\t\t{{ t('mediadc', 'Photos and Videos') }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<h3 style=\"margin: 5px 0;\">\n\t\t\t\t\t\t{{ t('mediadc', 'Similarity threshold') }}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<input v-model=\"similarity_threshold\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"50\"\n\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\tstyle=\"margin: 0 0 10px;\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button v-if=\"!runningTask\"\n\t\t\t\tstyle=\"margin: 10px 5px 0\"\n\t\t\t\t:disabled=\"Object.keys(targetDirectoriesPaths).length === 0\"\n\t\t\t\t@click=\"restartTask\">\n\t\t\t\t{{ t('mediadc', 'Restart task') }}\n\t\t\t</button>\n\t\t\t<button v-else disabled>\n\t\t\t\t<span class=\"icon-loading\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder, showWarning, showSuccess } from '@nextcloud/dialogs'\nimport axios from '@nextcloud/axios'\nimport { requestFileInfo, getFileId } from '../../utils/files'\nimport { mapGetters } from 'vuex'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { emit } from '@nextcloud/event-bus'\n\nexport default {\n\tname: 'TasksEdit',\n\tprops: {\n\t\topened: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttargetDirectoriesPaths: {},\n\t\t\ttargetDirectoriesIds: [],\n\t\t\texcludeDirectoriesPaths: [],\n\t\t\texcludeFileIds: {},\n\t\t\ttargetMimeType: 0,\n\t\t\tsimilarity_threshold: 90,\n\t\t\tcustomExcludeList: [],\n\t\t\tcustomExcludeMask: '',\n\t\t\taddingCustomMask: false,\n\t\t\trunningTask: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'settings',\n\t\t\t'settingByName',\n\t\t\t'tasks',\n\t\t\t'task',\n\t\t\t'taskInfo',\n\t\t]),\n\t},\n\tbeforeMount() {\n\t\tthis.similarity_threshold = this.settingByName('similarity_threshold') !== undefined\n\t\t\t? this.settingByName('similarity_threshold').value\n\t\t\t: 90\n\t\tthis.targetMimeType = JSON.parse(this.task.collector_settings).target_mtype\n\t\tthis.similarity_threshold = JSON.parse(this.task.collector_settings).similarity_threshold\n\t\tthis.parseTaskSettings()\n\t},\n\tmethods: {\n\t\tparseTaskSettings() {\n\t\t\tif (this.taskInfo !== null && 'target_directories' in this.taskInfo) {\n\t\t\t\tthis.taskInfo.target_directories.forEach(dir => {\n\t\t\t\t\tthis.targetDirectoriesIds.push(dir.fileid.toString())\n\t\t\t\t\tthis.targetDirectoriesPaths[dir.fileid.toString()] = dir.filepath.replace(`/${getCurrentUser().uid}/files`, '') !== '' ? dir.filepath.replace(`/${getCurrentUser().uid}/files`, '') : '/'\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (this.taskInfo !== null && 'exclude_directories' in this.taskInfo) {\n\t\t\t\tthis.taskInfo.exclude_directories.forEach(dir => {\n\t\t\t\t\tthis.excludeDirectoriesPaths.push(dir.filepath.replace())\n\t\t\t\t\tthis.excludeFileIds[dir.fileid.toString()] = dir.filepath.replace(`/${getCurrentUser().uid}/files`, '')\n\t\t\t\t})\n\t\t\t\tthis.customExcludeList = JSON.parse(this.task.exclude_list).user.mask\n\t\t\t}\n\t\t},\n\t\tgetDirectoriesPicker(title) {\n\t\t\treturn getFilePickerBuilder(title)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\t\t},\n\t\tgetFilesPicker(title) {\n\t\t\treturn getFilePickerBuilder(title)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\t\t},\n\t\topenDirectoriesExplorer() {\n\t\t\tthis.getDirectoriesPicker(this.t('mediadc', 'Choose target directory')).pick().then(dir => {\n\t\t\t\tif (dir.startsWith('/')) {\n\t\t\t\t\trequestFileInfo(dir).then(res => {\n\t\t\t\t\t\tconst fileid = getFileId(res.data)\n\t\t\t\t\t\tif (fileid !== -1) {\n\t\t\t\t\t\t\tif (!(fileid in this.targetDirectoriesPaths)) {\n\t\t\t\t\t\t\t\tthis.targetDirectoriesIds.push(fileid)\n\t\t\t\t\t\t\t\tthis.targetDirectoriesPaths[fileid.toString()] = dir\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tshowWarning(this.t('mediadc', 'This directory already selected'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\trequestFileInfo('/').then(res => {\n\t\t\t\t\t\tconst fileid = getFileId(res.data)\n\t\t\t\t\t\tif (fileid !== -1) {\n\t\t\t\t\t\t\tif (!(fileid in this.targetDirectoriesPaths)) {\n\t\t\t\t\t\t\t\tthis.targetDirectoriesIds.push(fileid)\n\t\t\t\t\t\t\t\tthis.targetDirectoriesPaths[fileid.toString()] = '/'\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tshowWarning(this.t('mediadc', 'This directory already selected'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tthis.targetDirectoriesPaths.push('/')\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\topenExcludeExplorer() {\n\t\t\tthis.getDirectoriesPicker(this.t('mediadc', 'Choose directory to exclude')).pick().then(dir => {\n\t\t\t\tif (Object.values(this.excludeFileIds).findIndex(targetDir => targetDir === dir) === -1) {\n\t\t\t\t\tif (dir.startsWith('/')) {\n\t\t\t\t\t\trequestFileInfo(dir).then(res => {\n\t\t\t\t\t\t\tconst fileid = getFileId(res.data)\n\t\t\t\t\t\t\tif (fileid !== -1) {\n\t\t\t\t\t\t\t\tthis.excludeDirectoriesPaths.push(dir)\n\t\t\t\t\t\t\t\tthis.excludeFileIds[fileid.toString()] = dir\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequestFileInfo('/').then(res => {\n\t\t\t\t\t\t\tconst fileid = getFileId(res.data)\n\t\t\t\t\t\t\tif (fileid !== -1) {\n\t\t\t\t\t\t\t\tthis.excludeDirectoriesPaths.push(dir)\n\t\t\t\t\t\t\t\tthis.excludeFileIds[fileid.toString()] = '/'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tshowWarning(this.t('mediadc', 'This directory already excluded'))\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\trestartTask() {\n\t\t\tthis.runningTask = true\n\t\t\tthis.getSettings().then(res => {\n\t\t\t\tthis.$store.dispatch('setSettings', res.data)\n\t\t\t\taxios.post(generateUrl('/apps/mediadc/api/v1/tasks/restart'), {\n\t\t\t\t\ttaskId: this.task.id,\n\t\t\t\t\ttargetDirectoryIds: JSON.stringify(this.targetDirectoriesIds),\n\t\t\t\t\texcludeList: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\tmask: this.customExcludeList,\n\t\t\t\t\t\t\tfileid: Object.keys(this.excludeFileIds).map(item => Number(item)),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadmin: JSON.parse(this.settingByName('exclude_list').value) || { mask: [], fileid: [] },\n\t\t\t\t\t},\n\t\t\t\t\tcollectorSettings: {\n\t\t\t\t\t\thashing_algorithm: JSON.parse(this.settingByName('hashing_algorithm').value) || 'dhash',\n\t\t\t\t\t\tsimilarity_threshold: Number(this.similarity_threshold),\n\t\t\t\t\t\thash_size: Number(this.settingByName('hash_size').value) || 16,\n\t\t\t\t\t\ttarget_mtype: this.targetMimeType,\n\t\t\t\t\t},\n\t\t\t\t}).then(res => {\n\t\t\t\t\tthis.runningTask = false\n\t\t\t\t\tif (res.data.success) {\n\t\t\t\t\t\tthis.runningTask = false\n\t\t\t\t\t\tthis.closeEditTaskDialog()\n\t\t\t\t\t\temit('restartTask')\n\t\t\t\t\t\tshowSuccess(this.t('mediadc', 'Task successfully restarted!'))\n\t\t\t\t\t} else if (res.data.limit) {\n\t\t\t\t\t\tshowWarning(this.t('mediadc', 'Running tasks limit exceed. Try again later.'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowWarning(t('medaidc', 'Some error occured while running Collector Task. Try again.'))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tremoveTargetDirectory(fileid) {\n\t\t\tdelete this.targetDirectoriesPaths[fileid]\n\t\t\tconst fileidIndex = this.targetDirectoriesIds.findIndex(id => id === fileid)\n\t\t\tthis.targetDirectoriesIds.splice(fileidIndex, 1)\n\t\t},\n\t\tremoveExcludeDirectory(fileid) {\n\t\t\tif (fileid in this.excludeFileIds) {\n\t\t\t\tconst dirIndex = this.excludeDirectoriesPaths.findIndex(dir => dir === this.excludeFileIds[fileid])\n\t\t\t\tthis.excludeDirectoriesPaths.splice(dirIndex, 1)\n\t\t\t\tdelete this.excludeFileIds[fileid]\n\t\t\t}\n\t\t},\n\t\tremoveExcludeFileid(fileid) {\n\t\t\tdelete this.excludeFileIds[fileid]\n\t\t},\n\t\taddNewMask() {\n\t\t\tthis.addingCustomMask = true\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$refs.customExcludeMask.focus()\n\t\t\t}, 100)\n\t\t},\n\t\taddCustomMask() {\n\t\t\tif (this.customExcludeMask.length > 0) {\n\t\t\t\tif (this.customExcludeList.findIndex(mask => mask === this.customExcludeMask) === -1) {\n\t\t\t\t\tthis.customExcludeList.push(this.customExcludeMask)\n\t\t\t\t\tthis.customExcludeMask = ''\n\t\t\t\t\tthis.addingCustomMask = false\n\t\t\t\t} else {\n\t\t\t\t\tshowWarning(this.t('mediadc', 'This mask already exists!'))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'Enter custom mask!'))\n\t\t\t}\n\t\t},\n\t\tcancelAddingCustomMask() {\n\t\t\tthis.customExcludeMask = ''\n\t\t\tthis.addingCustomMask = false\n\t\t},\n\t\tdeleteCustomMask(mask) {\n\t\t\tconst maskIndex = this.customExcludeList.findIndex(m => m === mask)\n\t\t\tthis.customExcludeList.splice(maskIndex, 1)\n\t\t},\n\t\tasync getTasks() {\n\t\t\taxios.get(generateUrl('/apps/mediadc/api/v1/tasks')).then(res => {\n\t\t\t\tthis.$store.dispatch('setTasks', res.data)\n\t\t\t\tthis.$emit('update:loading', false)\n\t\t\t})\n\t\t},\n\t\tresetForm() {\n\t\t\tthis.targetDirectoriesPaths = {}\n\t\t\tthis.targetDirectoriesIds = []\n\t\t\tthis.excludeDirectoriesNames = []\n\t\t\tthis.excludeFileIds = {}\n\t\t\tthis.targetMimeType = 0\n\t\t\tthis.similarity_threshold = this.settingByName('similarity_threshold') !== undefined\n\t\t\t\t? this.settingByName('similarity_threshold').value\n\t\t\t\t: 90\n\t\t\tthis.customExcludeList = []\n\t\t\tthis.runningTask = false\n\t\t},\n\t\tcloseEditTaskDialog() {\n\t\t\tthis.$emit('update:opened', false)\n\t\t},\n\t\tasync getSettings() {\n\t\t\treturn axios.get(generateUrl('/apps/mediadc/api/v1/settings'))\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.blackout {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.3);\n\tz-index: 999;\n}\n\n.edit-task-block {\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n\tbox-shadow: 0 0 4px 0 rgba(0, 0, 0, .05);\n\tpadding: 20px;\n\twidth: 100%;\n\tmax-width: 600px;\n\tposition: absolute;\n\tbackground-color: #fff;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n}\n\n.selection-container {\n\twidth: 100%;\n\tdisplay: flex;\n}\n\n@media (max-width: 767px) {\n\t.selection-container {\n\t\tflex-wrap: wrap;\n\t}\n}\n\n@media (max-width: 540px) {\n\t.edit-task-block {\n\t\twidth: 90vw;\n\t\theight: 80vh;\n\t\toverflow-y: scroll;\n\t\ttop: calc(50% + calc(100% - 96vh));\n\t}\n}\n\n.block {\n\twidth: 100%;\n\theight: 100%;\n\tmax-height: 200px;\n\toverflow-y: scroll;\n\tpadding: 10px 15px;\n\tmargin: 5px 10px;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n}\n\n.block:hover {\n\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, .05)\n}\n\n.target-directory, .custom-mask {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 5px 0;\n\tborder-bottom: 1px solid #dadada;\n}\n\n.delete-button {\n\tdisplay: inline-flex;\n\twidth: 15px;\n\theight: 15px;\n\tcursor: pointer;\n\tmargin: 0 10px;\n}\n\n.close-edit-button {\n\tposition: absolute;\n\ttop: 15px;\n\tright: 15px;\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tcursor: pointer;\n\topacity: 0.5;\n}\n\n.close-edit-button:hover, .close-edit-button:active {\n\topacity: 1;\n}\n\nbody.theme--dark .actions-menu-button:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .close-edit-button:active {\n\tbackground-color: #5b5b5b;\n}\n\nbody.theme--dark .edit-task-block, body.theme--dark .block {\n\tborder-color: #717171;\n}\n\nbody.theme--dark .edit-task-block {\n\tbackground-color: #111;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TasksEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TasksEdit.vue?vue&type=script&lang=js&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TasksEdit.vue?vue&type=style&index=0&id=5dcd7180&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TasksEdit.vue?vue&type=template&id=5dcd7180&scoped=true&\"\nimport script from \"./TasksEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./TasksEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TasksEdit.vue?vue&type=style&index=0&id=5dcd7180&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dcd7180\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.opened),expression:\"opened\"}],staticClass:\"blackout\"},[_c('div',{staticClass:\"edit-task-block\"},[_c('span',{staticClass:\"icon-close close-edit-button\",on:{\"click\":_vm.closeEditTaskDialog}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mediadc', 'Edit task')))]),_vm._v(\" \"),_c('div',{staticClass:\"selection-container\"},[_c('div',{staticClass:\"block target-directories-block\"},[_c('h3',[_vm._v(_vm._s(_vm.t('mediadc', 'Target directories')))]),_vm._v(\" \"),(_vm.targetDirectoriesIds.length > 0)?_c('div',_vm._l((_vm.targetDirectoriesIds),function(fileid){return _c('div',{key:fileid,staticClass:\"selected-target-directories-list\"},[_c('div',{staticClass:\"target-directory\"},[_c('span',{staticStyle:{\"overflow-y\":\"scroll\",\"white-space\":\"nowrap\"}},[_vm._v(_vm._s(_vm.targetDirectoriesPaths[fileid]))]),_vm._v(\" \"),_c('span',{staticClass:\"delete-button icon-delete\",on:{\"click\":function($event){return _vm.removeTargetDirectory(fileid)}}})])])}),0):_c('div',[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Not selected')))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.openDirectoriesExplorer}},[_c('span',{staticClass:\"icon-add\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Select'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('h3',[_vm._v(_vm._s(_vm.t('mediadc', 'Exclude directories')))]),_vm._v(\" \"),(_vm.excludeDirectoriesPaths.length > 0)?_c('div',_vm._l((Object.keys(_vm.excludeFileIds)),function(fileid){return _c('div',{key:fileid,staticClass:\"selected-excluded-directories-list\"},[_c('div',{staticClass:\"target-directory\"},[_c('span',{staticStyle:{\"overflow-y\":\"scroll\"}},[_vm._v(_vm._s(_vm.excludeFileIds[fileid]))]),_vm._v(\" \"),_c('span',{staticClass:\"delete-button icon-delete\",on:{\"click\":function($event){return _vm.removeExcludeDirectory(fileid)}}})])])}),0):_c('div',[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Not selected')))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.openExcludeExplorer}},[_c('span',{staticClass:\"icon-add\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Select'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"selection-container\"},[_c('div',{staticClass:\"block\"},[_c('h3',[_vm._v(_vm._s(_vm.t('mediadc', 'Custom exclude mask')))]),_vm._v(\" \"),(_vm.customExcludeList.length > 0)?_c('div',{staticClass:\"custom-masks-list\"},_vm._l((_vm.customExcludeList),function(mask,index){return _c('div',{key:index,staticClass:\"custom-mask\"},[_c('span',[_vm._v(_vm._s(mask))]),_vm._v(\" \"),_c('span',{staticClass:\"icon-delete\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.deleteCustomMask(mask)}}})])}),0):_c('div',[_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Not added')))])]),_vm._v(\" \"),(_vm.addingCustomMask)?_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.customExcludeMask),expression:\"customExcludeMask\"}],ref:\"customExcludeMask\",attrs:{\"id\":\"custom-exclude-mask\",\"type\":\"text\"},domProps:{\"value\":(_vm.customExcludeMask)},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addCustomMask.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.cancelAddingCustomMask.apply(null, arguments)}],\"input\":function($event){if($event.target.composing){ return; }_vm.customExcludeMask=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"icon-checkmark\",staticStyle:{\"width\":\"18px\",\"height\":\"18px\",\"margin\":\"0 5px\",\"display\":\"inline-block\",\"cursor\":\"pointer\"},on:{\"click\":_vm.addCustomMask}}),_vm._v(\" \"),_c('span',{staticClass:\"icon-close\",staticStyle:{\"width\":\"18px\",\"height\":\"18px\",\"margin\":\"0 5px\",\"display\":\"inline-block\",\"cursor\":\"pointer\"},on:{\"click\":_vm.cancelAddingCustomMask}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"margin\":\"20px 0\"}},[_c('button',{on:{\"click\":_vm.addNewMask}},[_c('span',{staticClass:\"icon-add\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('mediadc', 'Add mask')))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Target Mime Type'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.targetMimeType),expression:\"targetMimeType\"}],attrs:{\"id\":\"target_mtype\",\"name\":\"target_mtype\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.targetMimeType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{domProps:{\"value\":0}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Photos'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":1}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Videos'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":2}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Photos and Videos'))+\"\\n\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('h3',{staticStyle:{\"margin\":\"5px 0\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Similarity threshold'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.similarity_threshold),expression:\"similarity_threshold\"}],staticStyle:{\"margin\":\"0 0 10px\"},attrs:{\"type\":\"number\",\"min\":\"50\",\"max\":\"100\"},domProps:{\"value\":(_vm.similarity_threshold)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.similarity_threshold=$event.target.value}}})])]),_vm._v(\" \"),(!_vm.runningTask)?_c('button',{staticStyle:{\"margin\":\"10px 5px 0\"},attrs:{\"disabled\":Object.keys(_vm.targetDirectoriesPaths).length === 0},on:{\"click\":_vm.restartTask}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mediadc', 'Restart task'))+\"\\n\\t\\t\")]):_c('button',{attrs:{\"disabled\":\"\"}},[_c('span',{staticClass:\"icon-loading\"})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2021 Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @copyright Copyright (c) 2021 Alexander Piskun <bigcat88@icloud.com>\n -\n - @author Andrey Borysenko <andrey18106x@gmail.com>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n\n<template>\n\t<div v-if=\"!loading\" class=\"container\">\n\t\t<TasksEdit v-if=\"editingTask\" :opened.sync=\"editingTask\" />\n\t\t<div class=\"task-details\">\n\t\t\t<div class=\"task-details-heading\">\n\t\t\t\t<h2>\n\t\t\t\t\t{{ rootTitle }}\n\t\t\t\t\t<span :class=\"!collapsedStatus\n\t\t\t\t\t\t\t? 'icon-triangle-n collapse-task-status-btn'\n\t\t\t\t\t\t\t: 'icon-triangle-s collapse-task-status-btn'\"\n\t\t\t\t\t\t:title=\"t('mediadc', 'Collapse task status')\"\n\t\t\t\t\t\t@click=\"collapseTaskStatus\" />\n\t\t\t\t</h2>\n\t\t\t\t<div v-show=\"!collapsedStatus\" class=\"task-details-description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{ t('mediadc', 'Here you can view task details, manage task (stop or restart), ' +\n\t\t\t\t\t\t\t'delete found duplicated photos and videos.') }}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{ t('mediadc', 'Deleted files are placed in the trashbin, so that they can be restored in case of need.') }}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show=\"!collapsedStatus\" class=\"task-status-row\">\n\t\t\t\t<div class=\"task-status\">\n\t\t\t\t\t<span :class=\"'badge ' + getStatusBadge(task)\">{{ getStatusBadge(task) }}</span>\n\t\t\t\t\t<div style=\"display: flex; flex-direction: column;\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<b>{{ parseTargetMtype(task) }}</b> {{ task.files_scanned !== task.files_total ? `${task.files_scanned}/` : '' }}{{ task.files_total }} {{ translatePlural('mediadc', 'file', 'files', task.files_total) }}\n\t\t\t\t\t\t\t({{ formatBytes(Number(task.files_total_size)) }})\n\t\t\t\t\t\t\t({{ task !== null && 'collector_settings' in task ? t('mediadc', 'precision: ') + JSON.parse(task.collector_settings).similarity_threshold + '%' : '' }})\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<b>{{ t('mediadc', 'Deleted: ') }} </b>\n\t\t\t\t\t\t\t{{ task.deleted_files_count }} {{ translatePlural('mediadc', 'file', 'files', task.deleted_files_count) }}\n\t\t\t\t\t\t\t({{ formatBytes(Number(task.deleted_files_size)) }})\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ parseUnixTimestamp(task.created_time) }}\n\t\t\t\t\t\t\t{{ Number(task.finished_time) > 0 ? ' - ' + parseUnixTimestamp(task.finished_time) : '' }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"app-content-list-menu\" style=\"margin: 0 0 0 10px; position: relative;\">\n\t\t\t\t\t\t<div class=\"icon-more actions-menu-button\" @click=\"openActionsPopup\" />\n\t\t\t\t\t\t<div :class=\"actionsOpened ? 'popovermenu open' : 'popovermenu'\"\n\t\t\t\t\t\t\tstyle=\"right: -1px;\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-history\" @click=\"restartTask(task)\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ t('mediadc', 'Restart') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-rename\" @click=\"openEditTaskDialog(task)\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ t('mediadc', 'Edit') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-pause\" @click=\"terminateTask(task)\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ t('mediadc', 'Stop') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a class=\"icon-delete\" @click=\"deleteTask(task)\">\n\t\t\t\t\t\t\t\t\t\t<span>{{ t('mediadc', 'Delete') }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"task-info\">\n\t\t\t\t\t<h3>{{ t('mediadc', 'Target directories') }}</h3>\n\t\t\t\t\t<div class=\"target-directories-list\">\n\t\t\t\t\t\t<div v-for=\"dir in taskInfo.target_directories\" :key=\"dir.fileid\" class=\"target-directory-row\">\n\t\t\t\t\t\t\t<div class=\"owner-tooltip\">\n\t\t\t\t\t\t\t\t<div class=\"tooltip-title\">\n\t\t\t\t\t\t\t\t\t{{ t('mediadc', 'onwer:') }} {{ dir.fileowner }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tooltip-content\">\n\t\t\t\t\t\t\t\t\t<a :href=\"filesDirLink(dir)\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${currentUser}/files`, '') !== ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t? dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${currentUser}/files`, '')\n\t\t\t\t\t\t\t\t\t\t\t\t\t: '/'\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t\t\t({{ formatBytes(dir.filesize) }})\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isValidUser\" class=\"details-row\">\n\t\t\t\t<DetailsList v-if=\"getStatusBadge(task) === 'finished'\"\n\t\t\t\t\t:filessize=\"filessize\"\n\t\t\t\t\t:filestotal=\"filestotal\" />\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<p style=\"text-align: center;\">\n\t\t\t\t\t<b>{{ t('mediadc', 'You are not allowed to manage other user\\'s tasks.') }}</b>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div v-if=\"task.errors !== undefined && task.errors.length > 0\" class=\"errors\">\n\t\t\t\t<h3>{{ t('mediadc', 'Task errors') }}</h3>\n\t\t\t\t<div v-for=\"error in task.errors.split('\\\\n')\" :key=\"error\" class=\"error-row\">\n\t\t\t\t\t{{ error }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { mapGetters } from 'vuex'\nimport Formats from '../mixins/Formats'\nimport { generateUrl } from '@nextcloud/router'\nimport DetailsList from '../components/details/DetailsList'\nimport { showSuccess, showError, showWarning } from '@nextcloud/dialogs'\nimport Configure from '../mixins/Configure'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { subscribe, unsubscribe } from '@nextcloud/event-bus'\nimport TasksEdit from '../components/tasks/TasksEdit'\n\nexport default {\n\tname: 'CollectorDetails',\n\tcomponents: {\n\t\tDetailsList,\n\t\tTasksEdit,\n\t},\n\tmixins: [\n\t\tFormats,\n\t\tConfigure,\n\t],\n\tprops: {\n\t\trootTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tupdater: null,\n\t\t\tstatsUpdater: null,\n\t\t\tfilessize: 0,\n\t\t\tfilestotal: 0,\n\t\t\tactionsOpened: false,\n\t\t\tcollapsedStatus: false,\n\t\t\teditingTask: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'task',\n\t\t\t'taskInfo',\n\t\t\t'details',\n\t\t\t'settingByName',\n\t\t]),\n\t\tisValidUser() {\n\t\t\treturn getCurrentUser().uid === this.task.owner\n\t\t},\n\t\tcurrentUser() {\n\t\t\treturn getCurrentUser().uid\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.$emit('update:loading', true)\n\t\tthis.getTaskDetails()\n\t\tthis.getTaskInfo()\n\t\tsubscribe('restartTask', this.onRestartTaskEvent)\n\t\tsubscribe('updateTaskInfo', this.getDetailFilesTotalSize)\n\t\tthis.updater = setInterval(this.getTaskDetails, 5000)\n\t},\n\tbeforeDestroy() {\n\t\tclearInterval(this.updater)\n\t\tunsubscribe('updateTaskInfo', this.getTaskInfo)\n\t\tunsubscribe('restartTask', this.onRestartTaskEvent)\n\t},\n\tmethods: {\n\t\tterminateTask(task) {\n\t\t\tthis.toggleActionsPopup()\n\t\t\tif (this.isValidUser) {\n\t\t\t\tthis.terminating = true\n\t\t\t\taxios.post(generateUrl(`/apps/mediadc/api/v1/tasks/${task.id}/terminate`)).then(res => {\n\t\t\t\t\tshowSuccess(this.t('mediadc', 'Task terminated'))\n\t\t\t\t\tthis.terminating = false\n\t\t\t\t\tthis.getTaskDetails()\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'You are not allowed to terminate this task'))\n\t\t\t}\n\t\t},\n\t\trestartTask(task) {\n\t\t\tthis.toggleActionsPopup()\n\t\t\tif (this.isValidUser) {\n\t\t\t\tthis.restarting = true\n\t\t\t\tthis.getSettings().then(() => {\n\t\t\t\t\taxios.post(generateUrl('/apps/mediadc/api/v1/tasks/restart'), {\n\t\t\t\t\t\ttaskId: task.id,\n\t\t\t\t\t\ttargetDirectoryIds: task.target_directory_ids,\n\t\t\t\t\t\texcludeList: {\n\t\t\t\t\t\t\tuser: JSON.parse(task.exclude_list).user,\n\t\t\t\t\t\t\tadmin: JSON.parse(this.settingByName('exclude_list').value),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcollectorSettings: {\n\t\t\t\t\t\t\thashing_algorithm: JSON.parse(this.settingByName('hashing_algorithm').value) || 'dhash',\n\t\t\t\t\t\t\tsimilarity_threshold: Number(JSON.parse(this.task.collector_settings).similarity_threshold),\n\t\t\t\t\t\t\thash_size: Number(this.settingByName('hash_size').value) || 16,\n\t\t\t\t\t\t\ttarget_mtype: Number(JSON.parse(this.task.collector_settings).target_mtype),\n\t\t\t\t\t\t},\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tthis.restarting = false\n\t\t\t\t\t\tif (res.data.success) {\n\t\t\t\t\t\t\tshowSuccess(this.t('mediadc', 'Task successfully restarted with previous settings!'))\n\t\t\t\t\t\t\tthis.getTaskDetails()\n\t\t\t\t\t\t\tthis.filessize = 0\n\t\t\t\t\t\t\tthis.filestotal = 0\n\t\t\t\t\t\t} else if (res.data.limit) {\n\t\t\t\t\t\t\tshowWarning(this.t('mediadc', 'Running tasks limit exceed. Try again later.'))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tshowWarning(this.t('medaidc', 'Some error occured while running Collector Task. Try again.'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tthis.restarting = false\n\t\t\t\t\t\tconsole.debug(err)\n\t\t\t\t\t\tshowError('Some error occured while running Collector Task. Try again.')\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'You are not allowed to restart this task'))\n\t\t\t}\n\t\t},\n\t\tdeleteTask(task) {\n\t\t\tthis.toggleActionsPopup()\n\t\t\tif (this.isValidUser) {\n\t\t\t\tif (confirm(this.t('mediadc', 'Are sure, you want delete this task?'))) {\n\t\t\t\t\tthis.deleting = true\n\t\t\t\t\taxios.delete(generateUrl(`/apps/mediadc/api/v1/tasks/${task.id}`)).then(res => {\n\t\t\t\t\t\tthis.$router.push({ name: 'collector' })\n\t\t\t\t\t\tshowSuccess(this.t('mediadc', 'Task successfully deleted'))\n\t\t\t\t\t\tthis.deleting = false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tshowWarning(this.t('mediadc', 'You are not allowed to delete this task'))\n\t\t\t}\n\t\t},\n\t\tasync getTaskDetails() {\n\t\t\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}`)).then(res => {\n\t\t\t\tif ('success' in res.data && res.data.success) {\n\t\t\t\t\tthis.$store.dispatch('setTask', res.data.collectorTask)\n\t\t\t\t\tthis.$store.dispatch('setDetails', res.data.collectorTaskDetails)\n\t\t\t\t\tif (this.getStatusBadge(this.task) === 'finished'\n\t\t\t\t\t\t&& this.filestotal === 0 && this.filessize === 0) {\n\t\t\t\t\t\tthis.getDetailFilesTotalSize()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$emit('update:loading', false)\n\t\t\t})\n\t\t},\n\t\tasync getTaskInfo() {\n\t\t\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}/info`)).then(res => {\n\t\t\t\tthis.$store.dispatch('setTaskInfo', res.data.collectorTaskInfo)\n\t\t\t})\n\t\t},\n\t\tasync getDetailFilesTotalSize() {\n\t\t\taxios.get(generateUrl(`/apps/mediadc/api/v1/tasks/${this.$route.params.taskId}/filestotal`)).then(res => {\n\t\t\t\tthis.filessize = res.data.filessize\n\t\t\t\tthis.filestotal = res.data.filestotal\n\t\t\t})\n\t\t},\n\t\topenActionsPopup() {\n\t\t\tdocument.addEventListener('click', this.toggleActionsPopup)\n\t\t},\n\t\ttoggleActionsPopup() {\n\t\t\tif (this.actionsOpened) {\n\t\t\t\tdocument.removeEventListener('click', this.toggleActionsPopup)\n\t\t\t}\n\t\t\tthis.actionsOpened = !this.actionsOpened\n\t\t},\n\t\tcollapseTaskStatus() {\n\t\t\tthis.collapsedStatus = !this.collapsedStatus\n\t\t},\n\t\topenEditTaskDialog() {\n\t\t\tthis.editingTask = true\n\t\t},\n\t\tfilesDirLink(dir) {\n\t\t\tif (dir) {\n\t\t\t\tconst path = dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${this.currentUser}/files`, '') !== ''\n\t\t\t\t\t? dir.filepath.replace(`/${dir.fileowner}/files`, '').replace(`/${this.currentUser}/files`, '')\n\t\t\t\t\t: '/'\n\t\t\t\treturn generateUrl(`/apps/files?dir=${path}`)\n\t\t\t}\n\t\t\treturn '#'\n\t\t},\n\t\tonRestartTaskEvent() {\n\t\t\tthis.getTaskInfo()\n\t\t\tthis.getTaskDetails()\n\t\t\tthis.filessize = 0\n\t\t\tthis.filestotal = 0\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.container {\n\tpadding: 0 20px;\n\twidth: 100%;\n\tmax-width: 1440px;\n\tmargin: 0 auto;\n\tmax-height: 100%;\n}\n\n@media (min-width: 1920px) {\n\t.container {\n\t\tmax-width: 80vw;\n\t}\n}\n\nh2 {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 100%;\n\tmargin: 20px auto 10px;\n\ttext-align: center;\n}\n\n.collapse-task-status-btn {\n\tdisplay: inline-flex;\n\tcursor: pointer;\n\twidth: 16px;\n\theight: 16px;\n\tmargin: 0 10px;\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tuser-select: none;\n}\n\n.task-details-heading p {\n\ttext-align: center;\n}\n\n.details-row {\n\tdisplay: flex;\n\tmargin: 0 10px 20px;\n\tposition: relative;\n}\n\n@media (max-width: 767px) {\n\t.details-row {\n\t\tflex-wrap: wrap;\n\t}\n\t.task-details-heading {\n\t\tflex-direction: column;\n\t}\n}\n\n.task-status-row {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-wrap: wrap;\n}\n\n.task-status {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n\tmargin: 20px;\n\tpadding: 10px;\n}\n\n.actions-menu-button {\n\tpadding: 20px;\n\tborder-radius: 50%;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.actions-menu-button:hover, .collapse-task-status-btn:hover {\n\tbackground-color: #eee;\n}\n\n.actions-menu-button:active, .collapse-task-status-btn:active {\n\tbackground-color: #ddd;\n}\n\nbody.theme--dark .actions-menu-button:hover, body.theme--dark .collapse-task-status-btn:hover {\n\tbackground-color: #727272;\n}\n\nbody.theme--dark .actions-menu-button:active, body.theme--dark .collapse-task-status-btn:active {\n\tbackground-color: #5b5b5b;\n}\n\nbody.theme--dark .task-status, body.theme--dark .task-info {\n\tborder-color: #717171;\n}\n\n.task-info {\n\tmargin: 20px 0;\n\tborder: 1px solid #dadada;\n\tborder-radius: 5px;\n\tpadding: 10px 20px;\n\theight: 100%;\n\tmin-height: 94px;\n\tmax-height: 94px;\n\tmax-width: 50%;\n\toverflow-y: scroll;\n}\n\n.owner-tooltip {\n\tposition: relative;\n}\n\n.tooltip-title {\n\tdisplay: none;\n\tpadding: 0 5px;\n\tborder-radius: 5px;\n\tbackground-color: #000;\n\tcolor: #fff;\n\tposition: absolute;\n\ttop: calc(-100% - 5px);\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tfont-size: 12px;\n\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\n}\n\n.tooltip-title:before {\n\tcontent: '';\n\tposition: absolute;\n\tleft: 50%;\n\ttransform: translateX(-50%) rotateZ(45deg);\n\tbottom: -3px;\n\twidth: 10px;\n\theight: 10px;\n\tbackground-color: #000;\n\tz-index: -1;\n}\n\n.owner-tooltip:hover .tooltip-title {\n\tdisplay: block;\n}\n\n@media (max-width: 767px) {\n\t.details-row {\n\t\tmargin: 0 0 20px;\n\t}\n\n\t.task-status {\n\t\tflex-direction: column;\n\t\tmargin: 0 0 20px;\n\t\twidth: 100%;\n\t}\n\n\t.task-info {\n\t\tmax-width: 100%;\n\t\tmargin: 0;\n\t}\n}\n\n.task-info h3 {\n\tmargin: 0 0 5px 0;\n}\n\n.target-directory-row {\n\twhite-space: nowrap;\n}\n\n.badge {\n\tdisplay: inline-flex;\n\tpadding: 0 10px;\n\tbackground-color: #eee;\n\tborder-radius: 20px;\n\tmargin-right: 20px;\n}\n\n@media (max-width: 540px) {\n\t.task-status-row {\n\t\tflex-direction: column;\n\t\tmargin: 20px 0;\n\t}\n\n\t.badge {\n\t\tmargin-right: 0;\n\t\tmargin-top: 10px;\n\t\tmargin-bottom: 10px;\n\t}\n}\n\n.badge.finished {\n\tbackground-color: #49b382;\n\tcolor: #fff;\n}\n\n.badge.running, .badge.pending {\n\tbackground-color: #dadada;\n\tcolor: #000;\n}\n\n.badge.error {\n\tbackground-color: #bd3f3f;\n\tcolor: #fff;\n}\n\n.badge.terminated {\n\tbackground-color: #f17b1b;\n\tcolor: #fff;\n}\n\n.errors {\n\tmargin: 20px;\n\tborder: 1px solid #bd3f3f;\n\tborder-radius: 5px;\n\tpadding: 10px;\n\tmax-height: 100vh;\n\toverflow-y: scroll;\n}\n\n.error-row {\n\tborder-bottom: 1px solid #bd3f3f;\n\tpadding: 5px 0;\n\tmax-height: 100%;\n\toverflow-y: scroll;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectorDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectorDetails.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectorDetails.vue?vue&type=style&index=0&id=101b5a4b&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./CollectorDetails.vue?vue&type=template&id=101b5a4b&scoped=true&\"\nimport script from \"./CollectorDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectorDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectorDetails.vue?vue&type=style&index=0&id=101b5a4b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"101b5a4b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["targetMType","t","methods","formatBytes","parseUnixTimestamp","time","moment","Number","format","getStatusBadge","task","errors","py_pid","finished_time","updated_time","files_scanned","unix","keepAliveInterval","parseTargetMtype","JSON","parse","collector_settings","target_mtype","getFileId","xml","window","DOMParser","parseFromString","getElementsByTagName","innerHTML","requestFileInfo","async","davPath","generateRemoteUrl","getCurrentUser","uid","path","axios","method","url","data","headers","details","depth","bytes","decimals","dm","i","Math","floor","log","parseFloat","pow","toFixed","___CSS_LOADER_EXPORT___","push","module","id","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","exports","options","_vm","this","_h","$createElement","_c","_self","staticClass","style","detailsGridSize","_e","_v","on","$event","openFile","file","filempart","has_preview","directives","name","rawName","value","expression","key","filepath","attrs","imageUrl","filename","onLoad","loaded","_s","fileowner","filesize","staticStyle","checked","deleteGroupFile","loadingFiles","class","filesAscending","updateFileSorting","domProps","target","composing","filterFileName","filterByFileName","checkedFiles","length","translatePlural","openBatchActionsPopup","batchActionsOpened","selectAllFiles","allFiles","detail","group_files_ids","groupItemsPerPage","selectAllFilesOnPage","checkedFilesIntersect","files","removeCheckedFiles","deleteCheckedFiles","filesFiltered","filteredFiles","_l","fileid","openDetailFiles","Array","isArray","groupFilesSize","opened","removeTaskDetail","openPrevDetailFiles","page","ceil","openNextDetailFiles","updating","filestotal","filessize","sortGroups","sorted","toggleSorting","itemsPerPage","prevGroupsPage","nextGroupsPage","filterId","filterByGroupId","checkedDetailGroups","selectAllGroups","selectAllGroupsOnPage","checkedDetailGroupsIntersect","paginatedDetails","removeCheckedGroups","undefined","detailsFiltered","paginatedSortedDetails","closeEditTaskDialog","targetDirectoriesIds","targetDirectoriesPaths","removeTargetDirectory","openDirectoriesExplorer","excludeDirectoriesPaths","excludeFileIds","removeExcludeDirectory","openExcludeExplorer","customExcludeList","mask","index","deleteCustomMask","ref","type","indexOf","_k","keyCode","addCustomMask","apply","arguments","cancelAddingCustomMask","customExcludeMask","addNewMask","$$selectedVal","prototype","filter","call","selected","_value","targetMimeType","multiple","similarity_threshold","runningTask","restartTask","loading","editingTask","rootTitle","collapsedStatus","collapseTaskStatus","files_total","files_total_size","deleted_files_count","deleted_files_size","created_time","openActionsPopup","actionsOpened","openEditTaskDialog","terminateTask","deleteTask","taskInfo","dir","filesDirLink","replace","currentUser","split","error"],"sourceRoot":""}